var sa=Object.create;var Er=Object.defineProperty;var aa=Object.getOwnPropertyDescriptor;var ca=Object.getOwnPropertyNames;var ua=Object.getPrototypeOf,la=Object.prototype.hasOwnProperty;var Oi=e=>Er(e,"__esModule",{value:!0});var Ee=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),pa=(e,r)=>{for(var t in r)Er(e,t,{get:r[t],enumerable:!0})},Pi=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let c of ca(r))!la.call(e,c)&&(t||c!=="default")&&Er(e,c,{get:()=>r[c],enumerable:!(o=aa(r,c))||o.enumerable});return e},ct=(e,r)=>Pi(Oi(Er(e!=null?sa(ua(e)):{},"default",!r&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),da=(e=>(r,t)=>e&&e.get(r)||(t=Pi(Oi({}),r,1),e&&e.set(r,t),t))(typeof WeakMap!="undefined"?new WeakMap:0);var So=Ee(To=>{var fa=Object.create,nr=Object.defineProperty,ha=Object.getOwnPropertyDescriptor,va=Object.getOwnPropertyNames,Ri=Object.getOwnPropertySymbols,ma=Object.getPrototypeOf,xi=Object.prototype.hasOwnProperty,_a=Object.prototype.propertyIsEnumerable,Di=(e,r,t)=>r in e?nr(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,mt=(e,r)=>{for(var t in r||(r={}))xi.call(r,t)&&Di(e,t,r[t]);if(Ri)for(var t of Ri(r))_a.call(r,t)&&Di(e,t,r[t]);return e},Ni=e=>nr(e,"__esModule",{value:!0}),C=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),ga=(e,r)=>{Ni(e);for(var t in r)nr(e,t,{get:r[t],enumerable:!0})},ya=(e,r,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of va(r))!xi.call(e,o)&&o!=="default"&&nr(e,o,{get:()=>r[o],enumerable:!(t=ha(r,o))||t.enumerable});return e},ir=e=>ya(Ni(nr(e!=null?fa(ma(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),qe=C((e,r)=>{"use strict";var t=function(){function o(){}return o.info=function(c){for(var s=[],i=1;i<arguments.length;i++)s[i-1]=arguments[i];o.enableDebug&&console.info(o.TAG+c,s)},o.warn=function(c){for(var s=[],i=1;i<arguments.length;i++)s[i-1]=arguments[i];o.disableWarnings||console.warn(o.TAG+c,s)},o.enableDebug=!1,o.disableWarnings=!1,o.disableErrors=!1,o.TAG="ApplicationInsights:",o}();r.exports=t}),Mi=C(e=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(s){for(var i,n=1,a=arguments.length;n<a;n++){i=arguments[n];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(s[l]=i[l])}return s},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncScopeManager=e.OpenTelemetryScopeManagerWrapper=void 0;var t=Yt(),o=require("events"),c=function(){function s(){}return s.prototype.active=function(){var i=this,n=t.CorrelationContextManager.getCurrentContext();return r(r({},n),{getValue:function(a){return i._activeSymbol?a===i._activeSymbol?n:!1:(i._activeSymbol=a,n)},setValue:function(){}})},s.prototype.with=function(i,n){var a=i.parentSpanId,l=i.name,p=s._spanToContext(i,a,l);return t.CorrelationContextManager.runWithContext(p,n)()},s.prototype.bind=function(i){return typeof i=="function"?t.CorrelationContextManager.wrapCallback(i):(i instanceof o.EventEmitter&&t.CorrelationContextManager.wrapEmitter(i),i)},s.prototype.enable=function(){return t.CorrelationContextManager.enable(),this},s.prototype.disable=function(){return t.CorrelationContextManager.disable(),this},s._spanToContext=function(i,n,a){var l=n?"|"+i.spanContext().traceId+"."+n+".":i.spanContext().traceId,p=r(r({},i.spanContext()),{traceFlags:i.spanContext().traceFlags}),u=t.CorrelationContextManager.spanToContextObject(p,l,a);return u},s}();e.OpenTelemetryScopeManagerWrapper=c,e.AsyncScopeManager=new c}),Ea=C((e,r)=>{e=r.exports=j;var t;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?t=function(){var d=Array.prototype.slice.call(arguments,0);d.unshift("SEMVER"),console.log.apply(console,d)}:t=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var o=256,c=Number.MAX_SAFE_INTEGER||9007199254740991,s=16,i=e.re=[],n=e.src=[],a=0,l=a++;n[l]="0|[1-9]\\d*";var p=a++;n[p]="[0-9]+";var u=a++;n[u]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=a++;n[f]="("+n[l]+")\\.("+n[l]+")\\.("+n[l]+")";var h=a++;n[h]="("+n[p]+")\\.("+n[p]+")\\.("+n[p]+")";var v=a++;n[v]="(?:"+n[l]+"|"+n[u]+")";var m=a++;n[m]="(?:"+n[p]+"|"+n[u]+")";var g=a++;n[g]="(?:-("+n[v]+"(?:\\."+n[v]+")*))";var y=a++;n[y]="(?:-?("+n[m]+"(?:\\."+n[m]+")*))";var b=a++;n[b]="[0-9A-Za-z-]+";var S=a++;n[S]="(?:\\+("+n[b]+"(?:\\."+n[b]+")*))";var T=a++,O="v?"+n[f]+n[g]+"?"+n[S]+"?";n[T]="^"+O+"$";var D="[v=\\s]*"+n[h]+n[y]+"?"+n[S]+"?",M=a++;n[M]="^"+D+"$";var N=a++;n[N]="((?:<|>)?=?)";var L=a++;n[L]=n[p]+"|x|X|\\*";var B=a++;n[B]=n[l]+"|x|X|\\*";var F=a++;n[F]="[v=\\s]*("+n[B]+")(?:\\.("+n[B]+")(?:\\.("+n[B]+")(?:"+n[g]+")?"+n[S]+"?)?)?";var z=a++;n[z]="[v=\\s]*("+n[L]+")(?:\\.("+n[L]+")(?:\\.("+n[L]+")(?:"+n[y]+")?"+n[S]+"?)?)?";var ie=a++;n[ie]="^"+n[N]+"\\s*"+n[F]+"$";var ee=a++;n[ee]="^"+n[N]+"\\s*"+n[z]+"$";var ge=a++;n[ge]="(?:^|[^\\d])(\\d{1,"+s+"})(?:\\.(\\d{1,"+s+"}))?(?:\\.(\\d{1,"+s+"}))?(?:$|[^\\d])";var re=a++;n[re]="(?:~>?)";var H=a++;n[H]="(\\s*)"+n[re]+"\\s+",i[H]=new RegExp(n[H],"g");var G="$1~",V=a++;n[V]="^"+n[re]+n[F]+"$";var W=a++;n[W]="^"+n[re]+n[z]+"$";var X=a++;n[X]="(?:\\^)";var ne=a++;n[ne]="(\\s*)"+n[X]+"\\s+",i[ne]=new RegExp(n[ne],"g");var Y="$1^",he=a++;n[he]="^"+n[X]+n[F]+"$";var Se=a++;n[Se]="^"+n[X]+n[z]+"$";var _e=a++;n[_e]="^"+n[N]+"\\s*("+D+")$|^$";var ve=a++;n[ve]="^"+n[N]+"\\s*("+O+")$|^$";var ce=a++;n[ce]="(\\s*)"+n[N]+"\\s*("+D+"|"+n[F]+")",i[ce]=new RegExp(n[ce],"g");var xe="$1$2$3",ke=a++;n[ke]="^\\s*("+n[F]+")\\s+-\\s+("+n[F]+")\\s*$";var Z=a++;n[Z]="^\\s*("+n[z]+")\\s+-\\s+("+n[z]+")\\s*$";var Q=a++;for(n[Q]="(<|>)?=?\\s*\\*",te=0;te<a;te++)t(te,n[te]),i[te]||(i[te]=new RegExp(n[te]));var te;e.parse=fe;function fe(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof j)return d;if(typeof d!="string"||d.length>o)return null;var E=_.loose?i[M]:i[T];if(!E.test(d))return null;try{return new j(d,_)}catch{return null}}e.valid=It;function It(d,_){var E=fe(d,_);return E?E.version:null}e.clean=Ct;function Ct(d,_){var E=fe(d.trim().replace(/^[=v]+/,""),_);return E?E.version:null}e.SemVer=j;function j(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof j){if(d.loose===_.loose)return d;d=d.version}else if(typeof d!="string")throw new TypeError("Invalid Version: "+d);if(d.length>o)throw new TypeError("version is longer than "+o+" characters");if(!(this instanceof j))return new j(d,_);t("SemVer",d,_),this.options=_,this.loose=!!_.loose;var E=d.trim().match(_.loose?i[M]:i[T]);if(!E)throw new TypeError("Invalid Version: "+d);if(this.raw=d,this.major=+E[1],this.minor=+E[2],this.patch=+E[3],this.major>c||this.major<0)throw new TypeError("Invalid major version");if(this.minor>c||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>c||this.patch<0)throw new TypeError("Invalid patch version");E[4]?this.prerelease=E[4].split(".").map(function(I){if(/^[0-9]+$/.test(I)){var w=+I;if(w>=0&&w<c)return w}return I}):this.prerelease=[],this.build=E[5]?E[5].split("."):[],this.format()}j.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},j.prototype.toString=function(){return this.version},j.prototype.compare=function(d){return t("SemVer.compare",this.version,this.options,d),d instanceof j||(d=new j(d,this.options)),this.compareMain(d)||this.comparePre(d)},j.prototype.compareMain=function(d){return d instanceof j||(d=new j(d,this.options)),Ae(this.major,d.major)||Ae(this.minor,d.minor)||Ae(this.patch,d.patch)},j.prototype.comparePre=function(d){if(d instanceof j||(d=new j(d,this.options)),this.prerelease.length&&!d.prerelease.length)return-1;if(!this.prerelease.length&&d.prerelease.length)return 1;if(!this.prerelease.length&&!d.prerelease.length)return 0;var _=0;do{var E=this.prerelease[_],I=d.prerelease[_];if(t("prerelease compare",_,E,I),E===void 0&&I===void 0)return 0;if(I===void 0)return 1;if(E===void 0)return-1;if(E!==I)return Ae(E,I)}while(++_)},j.prototype.inc=function(d,_){switch(d){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",_);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",_);break;case"prepatch":this.prerelease.length=0,this.inc("patch",_),this.inc("pre",_);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",_),this.inc("pre",_);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var E=this.prerelease.length;--E>=0;)typeof this.prerelease[E]=="number"&&(this.prerelease[E]++,E=-2);E===-1&&this.prerelease.push(0)}_&&(this.prerelease[0]===_?isNaN(this.prerelease[1])&&(this.prerelease=[_,0]):this.prerelease=[_,0]);break;default:throw new Error("invalid increment argument: "+d)}return this.format(),this.raw=this.version,this},e.inc=wt;function wt(d,_,E,I){typeof E=="string"&&(I=E,E=void 0);try{return new j(d,E).inc(_,I).version}catch{return null}}e.diff=Ot;function Ot(d,_){if(Ve(d,_))return null;var E=fe(d),I=fe(_),w="";if(E.prerelease.length||I.prerelease.length){w="pre";var P="prerelease"}for(var x in E)if((x==="major"||x==="minor"||x==="patch")&&E[x]!==I[x])return w+x;return P}e.compareIdentifiers=Ae;var $e=/^[0-9]+$/;function Ae(d,_){var E=$e.test(d),I=$e.test(_);return E&&I&&(d=+d,_=+_),d===_?0:E&&!I?-1:I&&!E?1:d<_?-1:1}e.rcompareIdentifiers=ot;function ot(d,_){return Ae(_,d)}e.major=Be;function Be(d,_){return new j(d,_).major}e.minor=pt;function pt(d,_){return new j(d,_).minor}e.patch=dt;function dt(d,_){return new j(d,_).patch}e.compare=me;function me(d,_,E){return new j(d,E).compare(new j(_,E))}e.compareLoose=Pt;function Pt(d,_){return me(d,_,!0)}e.rcompare=st;function st(d,_,E){return me(_,d,E)}e.sort=ft;function ft(d,_){return d.sort(function(E,I){return e.compare(E,I,_)})}e.rsort=ht;function ht(d,_){return d.sort(function(E,I){return e.rcompare(E,I,_)})}e.gt=De;function De(d,_,E){return me(d,_,E)>0}e.lt=Ue;function Ue(d,_,E){return me(d,_,E)<0}e.eq=Ve;function Ve(d,_,E){return me(d,_,E)===0}e.neq=at;function at(d,_,E){return me(d,_,E)!==0}e.gte=ze;function ze(d,_,E){return me(d,_,E)>=0}e.lte=Le;function Le(d,_,E){return me(d,_,E)<=0}e.cmp=je;function je(d,_,E,I){switch(_){case"===":return typeof d=="object"&&(d=d.version),typeof E=="object"&&(E=E.version),d===E;case"!==":return typeof d=="object"&&(d=d.version),typeof E=="object"&&(E=E.version),d!==E;case"":case"=":case"==":return Ve(d,E,I);case"!=":return at(d,E,I);case">":return De(d,E,I);case">=":return ze(d,E,I);case"<":return Ue(d,E,I);case"<=":return Le(d,E,I);default:throw new TypeError("Invalid operator: "+_)}}e.Comparator=ae;function ae(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof ae){if(d.loose===!!_.loose)return d;d=d.value}if(!(this instanceof ae))return new ae(d,_);t("comparator",d,_),this.options=_,this.loose=!!_.loose,this.parse(d),this.semver===Ne?this.value="":this.value=this.operator+this.semver.version,t("comp",this)}var Ne={};ae.prototype.parse=function(d){var _=this.options.loose?i[_e]:i[ve],E=d.match(_);if(!E)throw new TypeError("Invalid comparator: "+d);this.operator=E[1],this.operator==="="&&(this.operator=""),E[2]?this.semver=new j(E[2],this.options.loose):this.semver=Ne},ae.prototype.toString=function(){return this.value},ae.prototype.test=function(d){return t("Comparator.test",d,this.options.loose),this.semver===Ne?!0:(typeof d=="string"&&(d=new j(d,this.options)),je(d,this.operator,this.semver,this.options))},ae.prototype.intersects=function(d,_){if(!(d instanceof ae))throw new TypeError("a Comparator is required");(!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1});var E;if(this.operator==="")return E=new $(d.value,_),He(this.value,E,_);if(d.operator==="")return E=new $(this.value,_),He(d.semver,E,_);var I=(this.operator===">="||this.operator===">")&&(d.operator===">="||d.operator===">"),w=(this.operator==="<="||this.operator==="<")&&(d.operator==="<="||d.operator==="<"),P=this.semver.version===d.semver.version,x=(this.operator===">="||this.operator==="<=")&&(d.operator===">="||d.operator==="<="),q=je(this.semver,"<",d.semver,_)&&(this.operator===">="||this.operator===">")&&(d.operator==="<="||d.operator==="<"),U=je(this.semver,">",d.semver,_)&&(this.operator==="<="||this.operator==="<")&&(d.operator===">="||d.operator===">");return I||w||P&&x||q||U},e.Range=$;function $(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof $)return d.loose===!!_.loose&&d.includePrerelease===!!_.includePrerelease?d:new $(d.raw,_);if(d instanceof ae)return new $(d.value,_);if(!(this instanceof $))return new $(d,_);if(this.options=_,this.loose=!!_.loose,this.includePrerelease=!!_.includePrerelease,this.raw=d,this.set=d.split(/\s*\|\|\s*/).map(function(E){return this.parseRange(E.trim())},this).filter(function(E){return E.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+d);this.format()}$.prototype.format=function(){return this.range=this.set.map(function(d){return d.join(" ").trim()}).join("||").trim(),this.range},$.prototype.toString=function(){return this.range},$.prototype.parseRange=function(d){var _=this.options.loose;d=d.trim();var E=_?i[Z]:i[ke];d=d.replace(E,kt),t("hyphen replace",d),d=d.replace(i[ce],xe),t("comparator trim",d,i[ce]),d=d.replace(i[H],G),d=d.replace(i[ne],Y),d=d.split(/\s+/).join(" ");var I=_?i[_e]:i[ve],w=d.split(" ").map(function(P){return tt(P,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(w=w.filter(function(P){return!!P.match(I)})),w=w.map(function(P){return new ae(P,this.options)},this),w},$.prototype.intersects=function(d,_){if(!(d instanceof $))throw new TypeError("a Range is required");return this.set.some(function(E){return E.every(function(I){return d.set.some(function(w){return w.every(function(P){return I.intersects(P,_)})})})})},e.toComparators=vt;function vt(d,_){return new $(d,_).set.map(function(E){return E.map(function(I){return I.value}).join(" ").trim().split(" ")})}function tt(d,_){return t("comp",d,_),d=xt(d,_),t("caret",d),d=We(d,_),t("tildes",d),d=Nt(d,_),t("xrange",d),d=Fe(d,_),t("stars",d),d}function J(d){return!d||d.toLowerCase()==="x"||d==="*"}function We(d,_){return d.trim().split(/\s+/).map(function(E){return Rt(E,_)}).join(" ")}function Rt(d,_){var E=_.loose?i[W]:i[V];return d.replace(E,function(I,w,P,x,q){t("tilde",d,I,w,P,x,q);var U;return J(w)?U="":J(P)?U=">="+w+".0.0 <"+(+w+1)+".0.0":J(x)?U=">="+w+"."+P+".0 <"+w+"."+(+P+1)+".0":q?(t("replaceTilde pr",q),U=">="+w+"."+P+"."+x+"-"+q+" <"+w+"."+(+P+1)+".0"):U=">="+w+"."+P+"."+x+" <"+w+"."+(+P+1)+".0",t("tilde return",U),U})}function xt(d,_){return d.trim().split(/\s+/).map(function(E){return Dt(E,_)}).join(" ")}function Dt(d,_){t("caret",d,_);var E=_.loose?i[Se]:i[he];return d.replace(E,function(I,w,P,x,q){t("caret",d,I,w,P,x,q);var U;return J(w)?U="":J(P)?U=">="+w+".0.0 <"+(+w+1)+".0.0":J(x)?w==="0"?U=">="+w+"."+P+".0 <"+w+"."+(+P+1)+".0":U=">="+w+"."+P+".0 <"+(+w+1)+".0.0":q?(t("replaceCaret pr",q),w==="0"?P==="0"?U=">="+w+"."+P+"."+x+"-"+q+" <"+w+"."+P+"."+(+x+1):U=">="+w+"."+P+"."+x+"-"+q+" <"+w+"."+(+P+1)+".0":U=">="+w+"."+P+"."+x+"-"+q+" <"+(+w+1)+".0.0"):(t("no pr"),w==="0"?P==="0"?U=">="+w+"."+P+"."+x+" <"+w+"."+P+"."+(+x+1):U=">="+w+"."+P+"."+x+" <"+w+"."+(+P+1)+".0":U=">="+w+"."+P+"."+x+" <"+(+w+1)+".0.0"),t("caret return",U),U})}function Nt(d,_){return t("replaceXRanges",d,_),d.split(/\s+/).map(function(E){return Mt(E,_)}).join(" ")}function Mt(d,_){d=d.trim();var E=_.loose?i[ee]:i[ie];return d.replace(E,function(I,w,P,x,q,U){t("xRange",d,I,w,P,x,q,U);var pe=J(P),ue=pe||J(x),se=ue||J(q),oe=se;return w==="="&&oe&&(w=""),pe?w===">"||w==="<"?I="<0.0.0":I="*":w&&oe?(ue&&(x=0),q=0,w===">"?(w=">=",ue?(P=+P+1,x=0,q=0):(x=+x+1,q=0)):w==="<="&&(w="<",ue?P=+P+1:x=+x+1),I=w+P+"."+x+"."+q):ue?I=">="+P+".0.0 <"+(+P+1)+".0.0":se&&(I=">="+P+"."+x+".0 <"+P+"."+(+x+1)+".0"),t("xRange return",I),I})}function Fe(d,_){return t("replaceStars",d,_),d.trim().replace(i[Q],"")}function kt(d,_,E,I,w,P,x,q,U,pe,ue,se,oe){return J(E)?_="":J(I)?_=">="+E+".0.0":J(w)?_=">="+E+"."+I+".0":_=">="+_,J(U)?q="":J(pe)?q="<"+(+U+1)+".0.0":J(ue)?q="<"+U+"."+(+pe+1)+".0":se?q="<="+U+"."+pe+"."+ue+"-"+se:q="<="+q,(_+" "+q).trim()}$.prototype.test=function(d){if(!d)return!1;typeof d=="string"&&(d=new j(d,this.options));for(var _=0;_<this.set.length;_++)if(Lt(this.set[_],d,this.options))return!0;return!1};function Lt(d,_,E){for(var I=0;I<d.length;I++)if(!d[I].test(_))return!1;if(_.prerelease.length&&!E.includePrerelease){for(I=0;I<d.length;I++)if(t(d[I].semver),d[I].semver!==Ne&&d[I].semver.prerelease.length>0){var w=d[I].semver;if(w.major===_.major&&w.minor===_.minor&&w.patch===_.patch)return!0}return!1}return!0}e.satisfies=He;function He(d,_,E){try{_=new $(_,E)}catch{return!1}return _.test(d)}e.maxSatisfying=jt;function jt(d,_,E){var I=null,w=null;try{var P=new $(_,E)}catch{return null}return d.forEach(function(x){P.test(x)&&(!I||w.compare(x)===-1)&&(I=x,w=new j(I,E))}),I}e.minSatisfying=Ut;function Ut(d,_,E){var I=null,w=null;try{var P=new $(_,E)}catch{return null}return d.forEach(function(x){P.test(x)&&(!I||w.compare(x)===1)&&(I=x,w=new j(I,E))}),I}e.minVersion=Xe;function Xe(d,_){d=new $(d,_);var E=new j("0.0.0");if(d.test(E)||(E=new j("0.0.0-0"),d.test(E)))return E;E=null;for(var I=0;I<d.set.length;++I){var w=d.set[I];w.forEach(function(P){var x=new j(P.semver.version);switch(P.operator){case">":x.prerelease.length===0?x.patch++:x.prerelease.push(0),x.raw=x.format();case"":case">=":(!E||De(E,x))&&(E=x);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+P.operator)}})}return E&&d.test(E)?E:null}e.validRange=qt;function qt(d,_){try{return new $(d,_).range||"*"}catch{return null}}e.ltr=Ht;function Ht(d,_,E){return Ke(d,_,"<",E)}e.gtr=Bt;function Bt(d,_,E){return Ke(d,_,">",E)}e.outside=Ke;function Ke(d,_,E,I){d=new j(d,I),_=new $(_,I);var w,P,x,q,U;switch(E){case">":w=De,P=Le,x=Ue,q=">",U=">=";break;case"<":w=Ue,P=ze,x=De,q="<",U="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(He(d,_,I))return!1;for(var pe=0;pe<_.set.length;++pe){var ue=_.set[pe],se=null,oe=null;if(ue.forEach(function(ye){ye.semver===Ne&&(ye=new ae(">=0.0.0")),se=se||ye,oe=oe||ye,w(ye.semver,se.semver,I)?se=ye:x(ye.semver,oe.semver,I)&&(oe=ye)}),se.operator===q||se.operator===U||(!oe.operator||oe.operator===q)&&P(d,oe.semver)||oe.operator===U&&x(d,oe.semver))return!1}return!0}e.prerelease=Ft;function Ft(d,_){var E=fe(d,_);return E&&E.prerelease.length?E.prerelease:null}e.intersects=Ze;function Ze(d,_,E){return d=new $(d,E),_=new $(_,E),d.intersects(_)}e.coerce=Vt;function Vt(d){if(d instanceof j)return d;if(typeof d!="string")return null;var _=d.match(i[ge]);return _==null?null:fe(_[1]+"."+(_[2]||"0")+"."+(_[3]||"0"))}}),ki=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makePatchingRequire=void 0;var r=require("path"),t=Ea(),o=require("module"),c=Object.keys(process.binding("natives")),s=o.prototype.require;function i(n){var a={};return function(l){var p=s.apply(this,arguments);if(n[l]){var u=o._resolveFilename(l,this);if(a.hasOwnProperty(u))return a[u];var f=void 0;if(c.indexOf(l)<0)try{f=s.call(this,r.join(l,"package.json")).version}catch{return p}else f=process.version.substring(1);var h=f.indexOf("-");h>=0&&(f=f.substring(0,h));for(var v=p,m=0,g=n[l];m<g.length;m++){var y=g[m];t.satisfies(f,y.versionSpecifier)&&(v=y.patch(v,u))}return a[u]=v}return p}}e.makePatchingRequire=i}),ba=C((e,r)=>{r.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}}),Me=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.channel=e.makePatchingRequire=void 0;var r=ki(),t=ki();Object.defineProperty(e,"makePatchingRequire",{enumerable:!0,get:function(){return t.makePatchingRequire}});var o=function(i){return!0},c=function(){function i(){this.version=ba().version,this.subscribers={},this.contextPreservationFunction=function(n){return n},this.knownPatches={},this.currentlyPublishing=!1}return i.prototype.shouldPublish=function(n){var a=this.subscribers[n];return a?a.some(function(l){var p=l.filter;return!p||p(!1)}):!1},i.prototype.publish=function(n,a){if(!this.currentlyPublishing){var l=this.subscribers[n];if(l){var p={timestamp:Date.now(),data:a};this.currentlyPublishing=!0,l.forEach(function(u){var f=u.listener,h=u.filter;try{h&&h(!0)&&f(p)}catch{}}),this.currentlyPublishing=!1}}},i.prototype.subscribe=function(n,a,l){l===void 0&&(l=o),this.subscribers[n]||(this.subscribers[n]=[]),this.subscribers[n].push({listener:a,filter:l})},i.prototype.unsubscribe=function(n,a,l){l===void 0&&(l=o);var p=this.subscribers[n];if(p){for(var u=0;u<p.length;++u)if(p[u].listener===a&&p[u].filter===l)return p.splice(u,1),!0}return!1},i.prototype.reset=function(){var n=this;this.subscribers={},this.contextPreservationFunction=function(a){return a},Object.getOwnPropertyNames(this.knownPatches).forEach(function(a){return delete n.knownPatches[a]})},i.prototype.bindToContext=function(n){return this.contextPreservationFunction(n)},i.prototype.addContextPreservation=function(n){var a=this.contextPreservationFunction;this.contextPreservationFunction=function(l){return n(a(l))}},i.prototype.registerMonkeyPatch=function(n,a){this.knownPatches[n]||(this.knownPatches[n]=[]),this.knownPatches[n].push(a)},i.prototype.getPatchesObject=function(){return this.knownPatches},i}();global.diagnosticsSource||(global.diagnosticsSource=new c,s=require("module"),s.prototype.require=r.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var s;e.channel=global.diagnosticsSource}),Ta=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Sa=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._globalThis=void 0,e._globalThis=typeof globalThis=="object"?globalThis:global}),Aa=C(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(o,c,s,i){i===void 0&&(i=s),Object.defineProperty(o,i,{enumerable:!0,get:function(){return c[s]}})}:function(o,c,s,i){i===void 0&&(i=s),o[i]=c[s]}),t=e&&e.__exportStar||function(o,c){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&r(c,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),t(Sa(),e)}),Ia=C(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(o,c,s,i){i===void 0&&(i=s),Object.defineProperty(o,i,{enumerable:!0,get:function(){return c[s]}})}:function(o,c,s,i){i===void 0&&(i=s),o[i]=c[s]}),t=e&&e.__exportStar||function(o,c){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&r(c,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),t(Aa(),e)}),Li=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="1.0.3"}),Ca=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCompatible=e._makeCompatibilityCheck=void 0;var r=Li(),t=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function o(c){var s=new Set([c]),i=new Set,n=c.match(t);if(!n)return function(){return!1};var a={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(a.prerelease!=null)return function(u){return u===c};function l(u){return i.add(u),!1}function p(u){return s.add(u),!0}return function(u){if(s.has(u))return!0;if(i.has(u))return!1;var f=u.match(t);if(!f)return l(u);var h={major:+f[1],minor:+f[2],patch:+f[3],prerelease:f[4]};return h.prerelease!=null||a.major!==h.major?l(u):a.major===0?a.minor===h.minor&&a.patch<=h.patch?p(u):l(u):a.minor<=h.minor?p(u):l(u)}}e._makeCompatibilityCheck=o,e.isCompatible=o(r.VERSION)}),or=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unregisterGlobal=e.getGlobal=e.registerGlobal=void 0;var r=Ia(),t=Li(),o=Ca(),c=t.VERSION.split(".")[0],s=Symbol.for("opentelemetry.js.api."+c),i=r._globalThis;function n(p,u,f,h){var v;h===void 0&&(h=!1);var m=i[s]=(v=i[s])!==null&&v!==void 0?v:{version:t.VERSION};if(!h&&m[p]){var g=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+p);return f.error(g.stack||g.message),!1}if(m.version!==t.VERSION){var g=new Error("@opentelemetry/api: All API registration versions must match");return f.error(g.stack||g.message),!1}return m[p]=u,f.debug("@opentelemetry/api: Registered a global for "+p+" v"+t.VERSION+"."),!0}e.registerGlobal=n;function a(p){var u,f,h=(u=i[s])===null||u===void 0?void 0:u.version;if(!(!h||!o.isCompatible(h)))return(f=i[s])===null||f===void 0?void 0:f[p]}e.getGlobal=a;function l(p,u){u.debug("@opentelemetry/api: Unregistering a global for "+p+" v"+t.VERSION+".");var f=i[s];f&&delete f[p]}e.unregisterGlobal=l}),wa=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagComponentLogger=void 0;var r=or(),t=function(){function c(s){this._namespace=s.namespace||"DiagComponentLogger"}return c.prototype.debug=function(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];return o("debug",this._namespace,s)},c.prototype.error=function(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];return o("error",this._namespace,s)},c.prototype.info=function(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];return o("info",this._namespace,s)},c.prototype.warn=function(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];return o("warn",this._namespace,s)},c.prototype.verbose=function(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];return o("verbose",this._namespace,s)},c}();e.DiagComponentLogger=t;function o(c,s,i){var n=r.getGlobal("diag");if(n)return i.unshift(s),n[c].apply(n,i)}}),on=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagLogLevel=void 0;var r;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(r=e.DiagLogLevel||(e.DiagLogLevel={}))}),Oa=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createLogLevelDiagLogger=void 0;var r=on();function t(o,c){o<r.DiagLogLevel.NONE?o=r.DiagLogLevel.NONE:o>r.DiagLogLevel.ALL&&(o=r.DiagLogLevel.ALL),c=c||{};function s(i,n){var a=c[i];return typeof a=="function"&&o>=n?a.bind(c):function(){}}return{error:s("error",r.DiagLogLevel.ERROR),warn:s("warn",r.DiagLogLevel.WARN),info:s("info",r.DiagLogLevel.INFO),debug:s("debug",r.DiagLogLevel.DEBUG),verbose:s("verbose",r.DiagLogLevel.VERBOSE)}}e.createLogLevelDiagLogger=t}),sr=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagAPI=void 0;var r=wa(),t=Oa(),o=on(),c=or(),s="diag",i=function(){function n(){function a(p){return function(){var u=c.getGlobal("diag");if(u)return u[p].apply(u,arguments)}}var l=this;l.setLogger=function(p,u){var f,h;if(u===void 0&&(u=o.DiagLogLevel.INFO),p===l){var v=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return l.error((f=v.stack)!==null&&f!==void 0?f:v.message),!1}var m=c.getGlobal("diag"),g=t.createLogLevelDiagLogger(u,p);if(m){var y=(h=new Error().stack)!==null&&h!==void 0?h:"<failed to generate stacktrace>";m.warn("Current logger will be overwritten from "+y),g.warn("Current logger will overwrite one already registered from "+y)}return c.registerGlobal("diag",g,l,!0)},l.disable=function(){c.unregisterGlobal(s,l)},l.createComponentLogger=function(p){return new r.DiagComponentLogger(p)},l.verbose=a("verbose"),l.debug=a("debug"),l.info=a("info"),l.warn=a("warn"),l.error=a("error")}return n.instance=function(){return this._instance||(this._instance=new n),this._instance},n}();e.DiagAPI=i}),Pa=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaggageImpl=void 0;var r=function(){function t(o){this._entries=o?new Map(o):new Map}return t.prototype.getEntry=function(o){var c=this._entries.get(o);if(c)return Object.assign({},c)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(o){var c=o[0],s=o[1];return[c,s]})},t.prototype.setEntry=function(o,c){var s=new t(this._entries);return s._entries.set(o,c),s},t.prototype.removeEntry=function(o){var c=new t(this._entries);return c._entries.delete(o),c},t.prototype.removeEntries=function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];for(var s=new t(this._entries),i=0,n=o;i<n.length;i++){var a=n[i];s._entries.delete(a)}return s},t.prototype.clear=function(){return new t},t}();e.BaggageImpl=r}),Ra=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataSymbol=void 0,e.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")}),ji=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataFromString=e.createBaggage=void 0;var r=sr(),t=Pa(),o=Ra(),c=r.DiagAPI.instance();function s(n){return n===void 0&&(n={}),new t.BaggageImpl(new Map(Object.entries(n)))}e.createBaggage=s;function i(n){return typeof n!="string"&&(c.error("Cannot create baggage metadata from unknown type: "+typeof n),n=""),{__TYPE__:o.baggageEntryMetadataSymbol,toString:function(){return n}}}e.baggageEntryMetadataFromString=i}),xa=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Da=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Na=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagConsoleLogger=void 0;var r=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],t=function(){function o(){function c(i){return function(){var n=arguments;if(console){var a=console[i];if(typeof a!="function"&&(a=console.log),typeof a=="function")return a.apply(console,n)}}}for(var s=0;s<r.length;s++)this[r[s].n]=c(r[s].c)}return o}();e.DiagConsoleLogger=t}),Ma=C(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(o,c,s,i){i===void 0&&(i=s),Object.defineProperty(o,i,{enumerable:!0,get:function(){return c[s]}})}:function(o,c,s,i){i===void 0&&(i=s),o[i]=c[s]}),t=e&&e.__exportStar||function(o,c){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&r(c,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),t(Na(),e),t(on(),e)}),Ui=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTextMapSetter=e.defaultTextMapGetter=void 0,e.defaultTextMapGetter={get:function(r,t){if(r!=null)return r[t]},keys:function(r){return r==null?[]:Object.keys(r)}},e.defaultTextMapSetter={set:function(r,t,o){r!=null&&(r[t]=o)}}}),ka=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),La=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),br=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ROOT_CONTEXT=e.createContextKey=void 0;function r(o){return Symbol.for(o)}e.createContextKey=r;var t=function(){function o(c){var s=this;s._currentContext=c?new Map(c):new Map,s.getValue=function(i){return s._currentContext.get(i)},s.setValue=function(i,n){var a=new o(s._currentContext);return a._currentContext.set(i,n),a},s.deleteValue=function(i){var n=new o(s._currentContext);return n._currentContext.delete(i),n}}return o}();e.ROOT_CONTEXT=new t}),ja=C(e=>{"use strict";var r=e&&e.__spreadArray||function(c,s){for(var i=0,n=s.length,a=c.length;i<n;i++,a++)c[a]=s[i];return c};Object.defineProperty(e,"__esModule",{value:!0}),e.NoopContextManager=void 0;var t=br(),o=function(){function c(){}return c.prototype.active=function(){return t.ROOT_CONTEXT},c.prototype.with=function(s,i,n){for(var a=[],l=3;l<arguments.length;l++)a[l-3]=arguments[l];return i.call.apply(i,r([n],a))},c.prototype.bind=function(s,i){return i},c.prototype.enable=function(){return this},c.prototype.disable=function(){return this},c}();e.NoopContextManager=o}),qi=C(e=>{"use strict";var r=e&&e.__spreadArray||function(a,l){for(var p=0,u=l.length,f=a.length;p<u;p++,f++)a[f]=l[p];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.ContextAPI=void 0;var t=ja(),o=or(),c=sr(),s="context",i=new t.NoopContextManager,n=function(){function a(){}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.setGlobalContextManager=function(l){return o.registerGlobal(s,l,c.DiagAPI.instance())},a.prototype.active=function(){return this._getContextManager().active()},a.prototype.with=function(l,p,u){for(var f,h=[],v=3;v<arguments.length;v++)h[v-3]=arguments[v];return(f=this._getContextManager()).with.apply(f,r([l,p,u],h))},a.prototype.bind=function(l,p){return this._getContextManager().bind(l,p)},a.prototype._getContextManager=function(){return o.getGlobal(s)||i},a.prototype.disable=function(){this._getContextManager().disable(),o.unregisterGlobal(s,c.DiagAPI.instance())},a}();e.ContextAPI=n}),Hi=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceFlags=void 0;var r;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(r=e.TraceFlags||(e.TraceFlags={}))}),sn=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=void 0;var r=Hi();e.INVALID_SPANID="0000000000000000",e.INVALID_TRACEID="00000000000000000000000000000000",e.INVALID_SPAN_CONTEXT={traceId:e.INVALID_TRACEID,spanId:e.INVALID_SPANID,traceFlags:r.TraceFlags.NONE}}),an=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NonRecordingSpan=void 0;var r=sn(),t=function(){function o(c){c===void 0&&(c=r.INVALID_SPAN_CONTEXT),this._spanContext=c}return o.prototype.spanContext=function(){return this._spanContext},o.prototype.setAttribute=function(c,s){return this},o.prototype.setAttributes=function(c){return this},o.prototype.addEvent=function(c,s){return this},o.prototype.setStatus=function(c){return this},o.prototype.updateName=function(c){return this},o.prototype.end=function(c){},o.prototype.isRecording=function(){return!1},o.prototype.recordException=function(c,s){},o}();e.NonRecordingSpan=t}),Bi=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSpanContext=e.setSpanContext=e.deleteSpan=e.setSpan=e.getSpan=void 0;var r=br(),t=an(),o=r.createContextKey("OpenTelemetry Context Key SPAN");function c(l){return l.getValue(o)||void 0}e.getSpan=c;function s(l,p){return l.setValue(o,p)}e.setSpan=s;function i(l){return l.deleteValue(o)}e.deleteSpan=i;function n(l,p){return s(l,new t.NonRecordingSpan(p))}e.setSpanContext=n;function a(l){var p;return(p=c(l))===null||p===void 0?void 0:p.spanContext()}e.getSpanContext=a}),cn=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wrapSpanContext=e.isSpanContextValid=e.isValidSpanId=e.isValidTraceId=void 0;var r=sn(),t=an(),o=/^([0-9a-f]{32})$/i,c=/^[0-9a-f]{16}$/i;function s(l){return o.test(l)&&l!==r.INVALID_TRACEID}e.isValidTraceId=s;function i(l){return c.test(l)&&l!==r.INVALID_SPANID}e.isValidSpanId=i;function n(l){return s(l.traceId)&&i(l.spanId)}e.isSpanContextValid=n;function a(l){return new t.NonRecordingSpan(l)}e.wrapSpanContext=a}),Fi=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracer=void 0;var r=qi(),t=Bi(),o=an(),c=cn(),s=r.ContextAPI.getInstance(),i=function(){function a(){}return a.prototype.startSpan=function(l,p,u){var f=Boolean(p==null?void 0:p.root);if(f)return new o.NonRecordingSpan;var h=u&&t.getSpanContext(u);return n(h)&&c.isSpanContextValid(h)?new o.NonRecordingSpan(h):new o.NonRecordingSpan},a.prototype.startActiveSpan=function(l,p,u,f){var h,v,m;if(!(arguments.length<2)){arguments.length===2?m=p:arguments.length===3?(h=p,m=u):(h=p,v=u,m=f);var g=v??s.active(),y=this.startSpan(l,h,g),b=t.setSpan(g,y);return s.with(b,m,void 0,y)}},a}();e.NoopTracer=i;function n(a){return typeof a=="object"&&typeof a.spanId=="string"&&typeof a.traceId=="string"&&typeof a.traceFlags=="number"}}),Vi=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracer=void 0;var r=Fi(),t=new r.NoopTracer,o=function(){function c(s,i,n){this._provider=s,this.name=i,this.version=n}return c.prototype.startSpan=function(s,i,n){return this._getTracer().startSpan(s,i,n)},c.prototype.startActiveSpan=function(s,i,n,a){var l=this._getTracer();return Reflect.apply(l.startActiveSpan,l,arguments)},c.prototype._getTracer=function(){if(this._delegate)return this._delegate;var s=this._provider.getDelegateTracer(this.name,this.version);return s?(this._delegate=s,this._delegate):t},c}();e.ProxyTracer=o}),Ua=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracerProvider=void 0;var r=Fi(),t=function(){function o(){}return o.prototype.getTracer=function(c,s){return new r.NoopTracer},o}();e.NoopTracerProvider=t}),Gi=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracerProvider=void 0;var r=Vi(),t=Ua(),o=new t.NoopTracerProvider,c=function(){function s(){}return s.prototype.getTracer=function(i,n){var a;return(a=this.getDelegateTracer(i,n))!==null&&a!==void 0?a:new r.ProxyTracer(this,i,n)},s.prototype.getDelegate=function(){var i;return(i=this._delegate)!==null&&i!==void 0?i:o},s.prototype.setDelegate=function(i){this._delegate=i},s.prototype.getDelegateTracer=function(i,n){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(i,n)},s}();e.ProxyTracerProvider=c}),qa=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ha=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SamplingDecision=void 0;var r;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(r=e.SamplingDecision||(e.SamplingDecision={}))}),Ba=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Fa=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpanKind=void 0;var r;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(r=e.SpanKind||(e.SpanKind={}))}),Va=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ga=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),$a=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpanStatusCode=void 0;var r;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(r=e.SpanStatusCode||(e.SpanStatusCode={}))}),za=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Wa=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ka=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ya=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Qa=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceAPI=void 0;var r=or(),t=Gi(),o=cn(),c=Bi(),s=sr(),i="trace",n=function(){function a(){this._proxyTracerProvider=new t.ProxyTracerProvider,this.wrapSpanContext=o.wrapSpanContext,this.isSpanContextValid=o.isSpanContextValid,this.deleteSpan=c.deleteSpan,this.getSpan=c.getSpan,this.getSpanContext=c.getSpanContext,this.setSpan=c.setSpan,this.setSpanContext=c.setSpanContext}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.setGlobalTracerProvider=function(l){var p=r.registerGlobal(i,this._proxyTracerProvider,s.DiagAPI.instance());return p&&this._proxyTracerProvider.setDelegate(l),p},a.prototype.getTracerProvider=function(){return r.getGlobal(i)||this._proxyTracerProvider},a.prototype.getTracer=function(l,p){return this.getTracerProvider().getTracer(l,p)},a.prototype.disable=function(){r.unregisterGlobal(i,s.DiagAPI.instance()),this._proxyTracerProvider=new t.ProxyTracerProvider},a}();e.TraceAPI=n}),Xa=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTextMapPropagator=void 0;var r=function(){function t(){}return t.prototype.inject=function(o,c){},t.prototype.extract=function(o,c){return o},t.prototype.fields=function(){return[]},t}();e.NoopTextMapPropagator=r}),Za=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deleteBaggage=e.setBaggage=e.getBaggage=void 0;var r=br(),t=r.createContextKey("OpenTelemetry Baggage Key");function o(i){return i.getValue(t)||void 0}e.getBaggage=o;function c(i,n){return i.setValue(t,n)}e.setBaggage=c;function s(i){return i.deleteValue(t)}e.deleteBaggage=s}),Ja=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropagationAPI=void 0;var r=or(),t=Xa(),o=Ui(),c=Za(),s=ji(),i=sr(),n="propagation",a=new t.NoopTextMapPropagator,l=function(){function p(){this.createBaggage=s.createBaggage,this.getBaggage=c.getBaggage,this.setBaggage=c.setBaggage,this.deleteBaggage=c.deleteBaggage}return p.getInstance=function(){return this._instance||(this._instance=new p),this._instance},p.prototype.setGlobalPropagator=function(u){return r.registerGlobal(n,u,i.DiagAPI.instance())},p.prototype.inject=function(u,f,h){return h===void 0&&(h=o.defaultTextMapSetter),this._getGlobalPropagator().inject(u,f,h)},p.prototype.extract=function(u,f,h){return h===void 0&&(h=o.defaultTextMapGetter),this._getGlobalPropagator().extract(u,f,h)},p.prototype.fields=function(){return this._getGlobalPropagator().fields()},p.prototype.disable=function(){r.unregisterGlobal(n,i.DiagAPI.instance())},p.prototype._getGlobalPropagator=function(){return r.getGlobal(n)||a},p}();e.PropagationAPI=l}),we=C(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(p,u,f,h){h===void 0&&(h=f),Object.defineProperty(p,h,{enumerable:!0,get:function(){return u[f]}})}:function(p,u,f,h){h===void 0&&(h=f),p[h]=u[f]}),t=e&&e.__exportStar||function(p,u){for(var f in p)f!=="default"&&!Object.prototype.hasOwnProperty.call(u,f)&&r(u,p,f)};Object.defineProperty(e,"__esModule",{value:!0}),e.diag=e.propagation=e.trace=e.context=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=e.isValidSpanId=e.isValidTraceId=e.isSpanContextValid=e.baggageEntryMetadataFromString=void 0,t(Ta(),e);var o=ji();Object.defineProperty(e,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return o.baggageEntryMetadataFromString}}),t(xa(),e),t(Da(),e),t(Ma(),e),t(Ui(),e),t(ka(),e),t(La(),e),t(Vi(),e),t(Gi(),e),t(qa(),e),t(Ha(),e),t(Ba(),e),t(Fa(),e),t(Va(),e),t(Ga(),e),t($a(),e),t(Hi(),e),t(za(),e),t(Wa(),e),t(Ka(),e);var c=cn();Object.defineProperty(e,"isSpanContextValid",{enumerable:!0,get:function(){return c.isSpanContextValid}}),Object.defineProperty(e,"isValidTraceId",{enumerable:!0,get:function(){return c.isValidTraceId}}),Object.defineProperty(e,"isValidSpanId",{enumerable:!0,get:function(){return c.isValidSpanId}});var s=sn();Object.defineProperty(e,"INVALID_SPANID",{enumerable:!0,get:function(){return s.INVALID_SPANID}}),Object.defineProperty(e,"INVALID_TRACEID",{enumerable:!0,get:function(){return s.INVALID_TRACEID}}),Object.defineProperty(e,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return s.INVALID_SPAN_CONTEXT}}),t(br(),e),t(Ya(),e);var i=qi();e.context=i.ContextAPI.getInstance();var n=Qa();e.trace=n.TraceAPI.getInstance();var a=Ja();e.propagation=a.PropagationAPI.getInstance();var l=sr();e.diag=l.DiagAPI.instance(),e.default={trace:e.trace,context:e.context,propagation:e.propagation,diag:e.diag}}),un=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTracingSuppressed=e.unsuppressTracing=e.suppressTracing=void 0;var r=we(),t=r.createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function o(i){return i.setValue(t,!0)}e.suppressTracing=o;function c(i){return i.deleteValue(t)}e.unsuppressTracing=c;function s(i){return i.getValue(t)===!0}e.isTracingSuppressed=s}),$i=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BAGGAGE_MAX_TOTAL_LENGTH=e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=e.BAGGAGE_MAX_NAME_VALUE_PAIRS=e.BAGGAGE_HEADER=e.BAGGAGE_ITEMS_SEPARATOR=e.BAGGAGE_PROPERTIES_SEPARATOR=e.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,e.BAGGAGE_KEY_PAIR_SEPARATOR="=",e.BAGGAGE_PROPERTIES_SEPARATOR=";",e.BAGGAGE_ITEMS_SEPARATOR=",",e.BAGGAGE_HEADER="baggage",e.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,e.BAGGAGE_MAX_TOTAL_LENGTH=8192}),zi=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseKeyPairsIntoRecord=e.parsePairKeyValue=e.getKeyPairs=e.serializeKeyPairs=void 0;var r=we(),t=$i(),o=n=>n.reduce((a,l)=>{let p=`${a}${a!==""?t.BAGGAGE_ITEMS_SEPARATOR:""}${l}`;return p.length>t.BAGGAGE_MAX_TOTAL_LENGTH?a:p},"");e.serializeKeyPairs=o;var c=n=>n.getAllEntries().map(([a,l])=>`${encodeURIComponent(a)}=${encodeURIComponent(l.value)}`);e.getKeyPairs=c;var s=n=>{let a=n.split(t.BAGGAGE_PROPERTIES_SEPARATOR);if(a.length<=0)return;let l=a.shift();if(!l)return;let p=l.split(t.BAGGAGE_KEY_PAIR_SEPARATOR);if(p.length!==2)return;let u=decodeURIComponent(p[0].trim()),f=decodeURIComponent(p[1].trim()),h;return a.length>0&&(h=r.baggageEntryMetadataFromString(a.join(t.BAGGAGE_PROPERTIES_SEPARATOR))),{key:u,value:f,metadata:h}};e.parsePairKeyValue=s;var i=n=>typeof n!="string"||n.length===0?{}:n.split(t.BAGGAGE_ITEMS_SEPARATOR).map(a=>e.parsePairKeyValue(a)).filter(a=>a!==void 0&&a.value.length>0).reduce((a,l)=>(a[l.key]=l.value,a),{});e.parseKeyPairsIntoRecord=i}),ec=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpBaggagePropagator=void 0;var r=we(),t=un(),o=$i(),c=zi(),s=class{inject(i,n,a){let l=r.propagation.getBaggage(i);if(!l||t.isTracingSuppressed(i))return;let p=c.getKeyPairs(l).filter(f=>f.length<=o.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,o.BAGGAGE_MAX_NAME_VALUE_PAIRS),u=c.serializeKeyPairs(p);u.length>0&&a.set(n,o.BAGGAGE_HEADER,u)}extract(i,n,a){let l=a.get(n,o.BAGGAGE_HEADER);if(!l)return i;let p={};return l.length===0||(l.split(o.BAGGAGE_ITEMS_SEPARATOR).forEach(u=>{let f=c.parsePairKeyValue(u);if(f){let h={value:f.value};f.metadata&&(h.metadata=f.metadata),p[f.key]=h}}),Object.entries(p).length===0)?i:r.propagation.setBaggage(i,r.propagation.createBaggage(p))}fields(){return[o.BAGGAGE_HEADER]}};e.HttpBaggagePropagator=s}),tc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isAttributeValue=e.sanitizeAttributes=void 0;function r(s){let i={};if(s==null||typeof s!="object")return i;for(let[n,a]of Object.entries(s))t(a)&&(Array.isArray(a)?i[n]=a.slice():i[n]=a);return i}e.sanitizeAttributes=r;function t(s){return s==null?!0:Array.isArray(s)?o(s):c(s)}e.isAttributeValue=t;function o(s){let i;for(let n of s)if(n!=null){if(!i){if(c(n)){i=typeof n;continue}return!1}if(typeof n!==i)return!1}return!0}function c(s){switch(typeof s){case"number":return!0;case"boolean":return!0;case"string":return!0}return!1}}),Wi=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loggingErrorHandler=void 0;var r=we();function t(){return s=>{r.diag.error(o(s))}}e.loggingErrorHandler=t;function o(s){return typeof s=="string"?s:JSON.stringify(c(s))}function c(s){let i={},n=s;for(;n!==null;)Object.getOwnPropertyNames(n).forEach(a=>{if(i[a])return;let l=n[a];l&&(i[a]=String(l))}),n=Object.getPrototypeOf(n);return i}}),Ki=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.globalErrorHandler=e.setGlobalErrorHandler=void 0;var r=Wi(),t=r.loggingErrorHandler();function o(s){t=s}e.setGlobalErrorHandler=o;var c=s=>{try{t(s)}catch{}};e.globalErrorHandler=c}),Yi=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TracesSamplerValues=void 0;var r;(function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})(r=e.TracesSamplerValues||(e.TracesSamplerValues={}))}),Qi=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseEnvironment=e.DEFAULT_ENVIRONMENT=void 0;var r=we(),t=Yi(),o=",",c=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function s(h){return c.indexOf(h)>-1}var i=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function n(h){return i.indexOf(h)>-1}e.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:r.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:t.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};function a(h,v,m,g=-1/0,y=1/0){if(typeof m[h]!="undefined"){let b=Number(m[h]);isNaN(b)||(b<g?v[h]=g:b>y?v[h]=y:v[h]=b)}}function l(h,v,m,g=o){let y=m[h];typeof y=="string"&&(v[h]=y.split(g).map(b=>b.trim()))}var p={ALL:r.DiagLogLevel.ALL,VERBOSE:r.DiagLogLevel.VERBOSE,DEBUG:r.DiagLogLevel.DEBUG,INFO:r.DiagLogLevel.INFO,WARN:r.DiagLogLevel.WARN,ERROR:r.DiagLogLevel.ERROR,NONE:r.DiagLogLevel.NONE};function u(h,v,m){let g=m[h];if(typeof g=="string"){let y=p[g.toUpperCase()];y!=null&&(v[h]=y)}}function f(h){let v={};for(let m in e.DEFAULT_ENVIRONMENT){let g=m;switch(g){case"OTEL_LOG_LEVEL":u(g,v,h);break;default:if(s(g))a(g,v,h);else if(n(g))l(g,v,h);else{let y=h[g];typeof y!="undefined"&&y!==null&&(v[g]=String(y))}}}return v}e.parseEnvironment=f}),rc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEnv=void 0;var r=require("os"),t=Qi();function o(){let c=t.parseEnvironment(process.env);return Object.assign({HOSTNAME:r.hostname()},t.DEFAULT_ENVIRONMENT,c)}e.getEnv=o}),nc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hexToBase64=void 0;function r(t){let o=t.length,c="";for(let s=0;s<o;s+=2){let i=t.substring(s,s+2),n=parseInt(i,16);c+=String.fromCharCode(n)}return Buffer.from(c,"ascii").toString("base64")}e.hexToBase64=r}),ic=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RandomIdGenerator=void 0;var r=8,t=16,o=class{constructor(){this.generateTraceId=s(t),this.generateSpanId=s(r)}};e.RandomIdGenerator=o;var c=Buffer.allocUnsafe(t);function s(i){return function(){for(let n=0;n<i/4;n++)c.writeUInt32BE(Math.random()*2**32>>>0,n*4);for(let n=0;n<i&&!(c[n]>0);n++)n===i-1&&(c[i-1]=1);return c.toString("hex",0,i)}}}),oc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.otperformance=void 0;var r=require("perf_hooks");e.otperformance=r.performance}),ln=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="0.23.0"}),sc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RpcGrpcStatusCodeValues=e.MessagingOperationValues=e.MessagingDestinationKindValues=e.HttpFlavorValues=e.NetTransportValues=e.FaasInvokedProviderValues=e.FaasDocumentOperationValues=e.FaasTriggerValues=e.DbCassandraConsistencyLevelValues=e.DbSystemValues=e.SemanticAttributes=void 0,e.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"};var r;(function(u){u.OTHER_SQL="other_sql",u.MSSQL="mssql",u.MYSQL="mysql",u.ORACLE="oracle",u.DB2="db2",u.POSTGRESQL="postgresql",u.REDSHIFT="redshift",u.HIVE="hive",u.CLOUDSCAPE="cloudscape",u.HSQLDB="hsqldb",u.PROGRESS="progress",u.MAXDB="maxdb",u.HANADB="hanadb",u.INGRES="ingres",u.FIRSTSQL="firstsql",u.EDB="edb",u.CACHE="cache",u.ADABAS="adabas",u.FIREBIRD="firebird",u.DERBY="derby",u.FILEMAKER="filemaker",u.INFORMIX="informix",u.INSTANTDB="instantdb",u.INTERBASE="interbase",u.MARIADB="mariadb",u.NETEZZA="netezza",u.PERVASIVE="pervasive",u.POINTBASE="pointbase",u.SQLITE="sqlite",u.SYBASE="sybase",u.TERADATA="teradata",u.VERTICA="vertica",u.H2="h2",u.COLDFUSION="coldfusion",u.CASSANDRA="cassandra",u.HBASE="hbase",u.MONGODB="mongodb",u.REDIS="redis",u.COUCHBASE="couchbase",u.COUCHDB="couchdb",u.COSMOSDB="cosmosdb",u.DYNAMODB="dynamodb",u.NEO4J="neo4j",u.GEODE="geode",u.ELASTICSEARCH="elasticsearch",u.MEMCACHED="memcached",u.COCKROACHDB="cockroachdb"})(r=e.DbSystemValues||(e.DbSystemValues={}));var t;(function(u){u.ALL="all",u.EACH_QUORUM="each_quorum",u.QUORUM="quorum",u.LOCAL_QUORUM="local_quorum",u.ONE="one",u.TWO="two",u.THREE="three",u.LOCAL_ONE="local_one",u.ANY="any",u.SERIAL="serial",u.LOCAL_SERIAL="local_serial"})(t=e.DbCassandraConsistencyLevelValues||(e.DbCassandraConsistencyLevelValues={}));var o;(function(u){u.DATASOURCE="datasource",u.HTTP="http",u.PUBSUB="pubsub",u.TIMER="timer",u.OTHER="other"})(o=e.FaasTriggerValues||(e.FaasTriggerValues={}));var c;(function(u){u.INSERT="insert",u.EDIT="edit",u.DELETE="delete"})(c=e.FaasDocumentOperationValues||(e.FaasDocumentOperationValues={}));var s;(function(u){u.AWS="aws",u.AZURE="azure",u.GCP="gcp"})(s=e.FaasInvokedProviderValues||(e.FaasInvokedProviderValues={}));var i;(function(u){u.IP_TCP="ip_tcp",u.IP_UDP="ip_udp",u.IP="ip",u.UNIX="unix",u.PIPE="pipe",u.INPROC="inproc",u.OTHER="other"})(i=e.NetTransportValues||(e.NetTransportValues={}));var n;(function(u){u.HTTP_1_0="1.0",u.HTTP_1_1="1.1",u.HTTP_2_0="2.0",u.SPDY="SPDY",u.QUIC="QUIC"})(n=e.HttpFlavorValues||(e.HttpFlavorValues={}));var a;(function(u){u.QUEUE="queue",u.TOPIC="topic"})(a=e.MessagingDestinationKindValues||(e.MessagingDestinationKindValues={}));var l;(function(u){u.RECEIVE="receive",u.PROCESS="process"})(l=e.MessagingOperationValues||(e.MessagingOperationValues={}));var p;(function(u){u[u.OK=0]="OK",u[u.CANCELLED=1]="CANCELLED",u[u.UNKNOWN=2]="UNKNOWN",u[u.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",u[u.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",u[u.NOT_FOUND=5]="NOT_FOUND",u[u.ALREADY_EXISTS=6]="ALREADY_EXISTS",u[u.PERMISSION_DENIED=7]="PERMISSION_DENIED",u[u.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",u[u.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",u[u.ABORTED=10]="ABORTED",u[u.OUT_OF_RANGE=11]="OUT_OF_RANGE",u[u.UNIMPLEMENTED=12]="UNIMPLEMENTED",u[u.INTERNAL=13]="INTERNAL",u[u.UNAVAILABLE=14]="UNAVAILABLE",u[u.DATA_LOSS=15]="DATA_LOSS",u[u.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(p=e.RpcGrpcStatusCodeValues||(e.RpcGrpcStatusCodeValues={}))}),ac=C(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(o,c,s,i){i===void 0&&(i=s),Object.defineProperty(o,i,{enumerable:!0,get:function(){return c[s]}})}:function(o,c,s,i){i===void 0&&(i=s),o[i]=c[s]}),t=e&&e.__exportStar||function(o,c){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&r(c,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),t(sc(),e)}),cc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetrySdkLanguageValues=e.OsTypeValues=e.HostArchValues=e.AwsEcsLaunchtypeValues=e.CloudPlatformValues=e.CloudProviderValues=e.ResourceAttributes=void 0,e.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};var r;(function(n){n.AWS="aws",n.AZURE="azure",n.GCP="gcp"})(r=e.CloudProviderValues||(e.CloudProviderValues={}));var t;(function(n){n.AWS_EC2="aws_ec2",n.AWS_ECS="aws_ecs",n.AWS_EKS="aws_eks",n.AWS_LAMBDA="aws_lambda",n.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",n.AZURE_VM="azure_vm",n.AZURE_CONTAINER_INSTANCES="azure_container_instances",n.AZURE_AKS="azure_aks",n.AZURE_FUNCTIONS="azure_functions",n.AZURE_APP_SERVICE="azure_app_service",n.GCP_COMPUTE_ENGINE="gcp_compute_engine",n.GCP_CLOUD_RUN="gcp_cloud_run",n.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",n.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",n.GCP_APP_ENGINE="gcp_app_engine"})(t=e.CloudPlatformValues||(e.CloudPlatformValues={}));var o;(function(n){n.EC2="ec2",n.FARGATE="fargate"})(o=e.AwsEcsLaunchtypeValues||(e.AwsEcsLaunchtypeValues={}));var c;(function(n){n.AMD64="amd64",n.ARM32="arm32",n.ARM64="arm64",n.IA64="ia64",n.PPC32="ppc32",n.PPC64="ppc64",n.X86="x86"})(c=e.HostArchValues||(e.HostArchValues={}));var s;(function(n){n.WINDOWS="windows",n.LINUX="linux",n.DARWIN="darwin",n.FREEBSD="freebsd",n.NETBSD="netbsd",n.OPENBSD="openbsd",n.DRAGONFLYBSD="dragonflybsd",n.HPUX="hpux",n.AIX="aix",n.SOLARIS="solaris",n.Z_OS="z_os"})(s=e.OsTypeValues||(e.OsTypeValues={}));var i;(function(n){n.CPP="cpp",n.DOTNET="dotnet",n.ERLANG="erlang",n.GO="go",n.JAVA="java",n.NODEJS="nodejs",n.PHP="php",n.PYTHON="python",n.RUBY="ruby",n.WEBJS="webjs"})(i=e.TelemetrySdkLanguageValues||(e.TelemetrySdkLanguageValues={}))}),uc=C(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(o,c,s,i){i===void 0&&(i=s),Object.defineProperty(o,i,{enumerable:!0,get:function(){return c[s]}})}:function(o,c,s,i){i===void 0&&(i=s),o[i]=c[s]}),t=e&&e.__exportStar||function(o,c){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&r(c,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),t(cc(),e)}),ar=C(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(o,c,s,i){i===void 0&&(i=s),Object.defineProperty(o,i,{enumerable:!0,get:function(){return c[s]}})}:function(o,c,s,i){i===void 0&&(i=s),o[i]=c[s]}),t=e&&e.__exportStar||function(o,c){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&r(c,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),t(ac(),e),t(uc(),e)}),lc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SDK_INFO=void 0;var r=ln(),t=ar();e.SDK_INFO={[t.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[t.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:t.TelemetrySdkLanguageValues.NODEJS,[t.ResourceAttributes.TELEMETRY_SDK_VERSION]:r.VERSION}}),pc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unrefTimer=void 0;function r(t){t.unref()}e.unrefTimer=r}),dc=C(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(o,c,s,i){i===void 0&&(i=s),Object.defineProperty(o,i,{enumerable:!0,get:function(){return c[s]}})}:function(o,c,s,i){i===void 0&&(i=s),o[i]=c[s]}),t=e&&e.__exportStar||function(o,c){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&r(c,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),t(rc(),e),t(nc(),e),t(ic(),e),t(oc(),e),t(lc(),e),t(pc(),e)}),Xi=C(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(o,c,s,i){i===void 0&&(i=s),Object.defineProperty(o,i,{enumerable:!0,get:function(){return c[s]}})}:function(o,c,s,i){i===void 0&&(i=s),o[i]=c[s]}),t=e&&e.__exportStar||function(o,c){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&r(c,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),t(dc(),e)}),fc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTimeInput=e.isTimeInputHrTime=e.hrTimeToMicroseconds=e.hrTimeToMilliseconds=e.hrTimeToNanoseconds=e.hrTimeToTimeStamp=e.hrTimeDuration=e.timeInputToHrTime=e.hrTime=void 0;var r=Xi(),t=9,o=Math.pow(10,t);function c(m){let g=m/1e3,y=Math.trunc(g),b=Number((g-y).toFixed(t))*o;return[y,b]}function s(){let m=r.otperformance.timeOrigin;if(typeof m!="number"){let g=r.otperformance;m=g.timing&&g.timing.fetchStart}return m}function i(m){let g=c(s()),y=c(typeof m=="number"?m:r.otperformance.now()),b=g[0]+y[0],S=g[1]+y[1];return S>o&&(S-=o,b+=1),[b,S]}e.hrTime=i;function n(m){if(h(m))return m;if(typeof m=="number")return m<s()?i(m):c(m);if(m instanceof Date)return c(m.getTime());throw TypeError("Invalid input type")}e.timeInputToHrTime=n;function a(m,g){let y=g[0]-m[0],b=g[1]-m[1];return b<0&&(y-=1,b+=o),[y,b]}e.hrTimeDuration=a;function l(m){let g=t,y=`${"0".repeat(g)}${m[1]}Z`,b=y.substr(y.length-g-1);return new Date(m[0]*1e3).toISOString().replace("000Z",b)}e.hrTimeToTimeStamp=l;function p(m){return m[0]*o+m[1]}e.hrTimeToNanoseconds=p;function u(m){return Math.round(m[0]*1e3+m[1]/1e6)}e.hrTimeToMilliseconds=u;function f(m){return Math.round(m[0]*1e6+m[1]/1e3)}e.hrTimeToMicroseconds=f;function h(m){return Array.isArray(m)&&m.length===2&&typeof m[0]=="number"&&typeof m[1]=="number"}e.isTimeInputHrTime=h;function v(m){return h(m)||typeof m=="number"||m instanceof Date}e.isTimeInput=v}),hc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),vc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExportResultCode=void 0;var r;(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})(r=e.ExportResultCode||(e.ExportResultCode={}))}),mc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompositePropagator=void 0;var r=we(),t=class{constructor(o={}){var c;this._propagators=(c=o.propagators)!==null&&c!==void 0?c:[],this._fields=Array.from(new Set(this._propagators.map(s=>typeof s.fields=="function"?s.fields():[]).reduce((s,i)=>s.concat(i),[])))}inject(o,c,s){for(let i of this._propagators)try{i.inject(o,c,s)}catch(n){r.diag.warn(`Failed to inject with ${i.constructor.name}. Err: ${n.message}`)}}extract(o,c,s){return this._propagators.reduce((i,n)=>{try{return n.extract(i,c,s)}catch(a){r.diag.warn(`Failed to inject with ${n.constructor.name}. Err: ${a.message}`)}return i},o)}fields(){return this._fields.slice()}};e.CompositePropagator=t}),_c=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateValue=e.validateKey=void 0;var r="[_0-9a-z-*/]",t=`[a-z]${r}{0,255}`,o=`[a-z0-9]${r}{0,240}@[a-z]${r}{0,13}`,c=new RegExp(`^(?:${t}|${o})$`),s=/^[ -~]{0,255}[!-~]$/,i=/,|=/;function n(l){return c.test(l)}e.validateKey=n;function a(l){return s.test(l)&&!i.test(l)}e.validateValue=a}),Zi=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceState=void 0;var r=_c(),t=32,o=512,c=",",s="=",i=class{constructor(n){this._internalState=new Map,n&&this._parse(n)}set(n,a){let l=this._clone();return l._internalState.has(n)&&l._internalState.delete(n),l._internalState.set(n,a),l}unset(n){let a=this._clone();return a._internalState.delete(n),a}get(n){return this._internalState.get(n)}serialize(){return this._keys().reduce((n,a)=>(n.push(a+s+this.get(a)),n),[]).join(c)}_parse(n){n.length>o||(this._internalState=n.split(c).reverse().reduce((a,l)=>{let p=l.trim(),u=p.indexOf(s);if(u!==-1){let f=p.slice(0,u),h=p.slice(u+1,l.length);r.validateKey(f)&&r.validateValue(h)&&a.set(f,h)}return a},new Map),this._internalState.size>t&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,t))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let n=new i;return n._internalState=new Map(this._internalState),n}};e.TraceState=i}),gc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpTraceContextPropagator=e.parseTraceParent=e.TRACE_STATE_HEADER=e.TRACE_PARENT_HEADER=void 0;var r=we(),t=un(),o=Zi();e.TRACE_PARENT_HEADER="traceparent",e.TRACE_STATE_HEADER="tracestate";var c="00",s="(?!ff)[\\da-f]{2}",i="(?![0]{32})[\\da-f]{32}",n="(?![0]{16})[\\da-f]{16}",a="[\\da-f]{2}",l=new RegExp(`^\\s?(${s})-(${i})-(${n})-(${a})(-.*)?\\s?$`);function p(f){let h=l.exec(f);return!h||h[1]==="00"&&h[5]?null:{traceId:h[2],spanId:h[3],traceFlags:parseInt(h[4],16)}}e.parseTraceParent=p;var u=class{inject(f,h,v){let m=r.trace.getSpanContext(f);if(!m||t.isTracingSuppressed(f)||!r.isSpanContextValid(m))return;let g=`${c}-${m.traceId}-${m.spanId}-0${Number(m.traceFlags||r.TraceFlags.NONE).toString(16)}`;v.set(h,e.TRACE_PARENT_HEADER,g),m.traceState&&v.set(h,e.TRACE_STATE_HEADER,m.traceState.serialize())}extract(f,h,v){let m=v.get(h,e.TRACE_PARENT_HEADER);if(!m)return f;let g=Array.isArray(m)?m[0]:m;if(typeof g!="string")return f;let y=p(g);if(!y)return f;y.isRemote=!0;let b=v.get(h,e.TRACE_STATE_HEADER);if(b){let S=Array.isArray(b)?b.join(","):b;y.traceState=new o.TraceState(typeof S=="string"?S:void 0)}return r.trace.setSpanContext(f,y)}fields(){return[e.TRACE_PARENT_HEADER,e.TRACE_STATE_HEADER]}};e.HttpTraceContextPropagator=u}),yc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ec=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRPCMetadata=e.deleteRPCMetadata=e.setRPCMetadata=e.RPCType=void 0;var r=we(),t=r.createContextKey("OpenTelemetry SDK Context Key RPC_METADATA"),o;(function(n){n.HTTP="http"})(o=e.RPCType||(e.RPCType={}));function c(n,a){return n.setValue(t,a)}e.setRPCMetadata=c;function s(n){return n.deleteValue(t)}e.deleteRPCMetadata=s;function i(n){return n.getValue(t)}e.getRPCMetadata=i}),Ji=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOffSampler=void 0;var r=we(),t=class{shouldSample(){return{decision:r.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};e.AlwaysOffSampler=t}),eo=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOnSampler=void 0;var r=we(),t=class{shouldSample(){return{decision:r.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};e.AlwaysOnSampler=t}),bc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParentBasedSampler=void 0;var r=we(),t=Ki(),o=Ji(),c=eo(),s=class{constructor(i){var n,a,l,p;this._root=i.root,this._root||(t.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new c.AlwaysOnSampler),this._remoteParentSampled=(n=i.remoteParentSampled)!==null&&n!==void 0?n:new c.AlwaysOnSampler,this._remoteParentNotSampled=(a=i.remoteParentNotSampled)!==null&&a!==void 0?a:new o.AlwaysOffSampler,this._localParentSampled=(l=i.localParentSampled)!==null&&l!==void 0?l:new c.AlwaysOnSampler,this._localParentNotSampled=(p=i.localParentNotSampled)!==null&&p!==void 0?p:new o.AlwaysOffSampler}shouldSample(i,n,a,l,p,u){let f=r.trace.getSpanContext(i);return!f||!r.isSpanContextValid(f)?this._root.shouldSample(i,n,a,l,p,u):f.isRemote?f.traceFlags&r.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(i,n,a,l,p,u):this._remoteParentNotSampled.shouldSample(i,n,a,l,p,u):f.traceFlags&r.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(i,n,a,l,p,u):this._localParentNotSampled.shouldSample(i,n,a,l,p,u)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};e.ParentBasedSampler=s}),Tc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceIdRatioBasedSampler=void 0;var r=we(),t=class{constructor(o=0){this._ratio=o,this._ratio=this._normalize(o),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(o,c){return{decision:r.isValidTraceId(c)&&this._accumulate(c)<this._upperBound?r.SamplingDecision.RECORD_AND_SAMPLED:r.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(o){return typeof o!="number"||isNaN(o)?0:o>=1?1:o<=0?0:o}_accumulate(o){let c=0;for(let s=0;s<o.length/8;s++){let i=s*8,n=parseInt(o.slice(i,i+8),16);c=(c^n)>>>0}return c}};e.TraceIdRatioBasedSampler=t}),Sc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isUrlIgnored=e.urlMatches=void 0;function r(o,c){return typeof c=="string"?o===c:c.test(o)}e.urlMatches=r;function t(o,c){if(!c)return!1;for(let s of c)if(r(o,s))return!0;return!1}e.isUrlIgnored=t}),Ac=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isWrapped=void 0;function r(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===!0}e.isWrapped=r}),rt=C(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(o,c,s,i){i===void 0&&(i=s),Object.defineProperty(o,i,{enumerable:!0,get:function(){return c[s]}})}:function(o,c,s,i){i===void 0&&(i=s),o[i]=c[s]}),t=e&&e.__exportStar||function(o,c){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&r(c,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.baggageUtils=void 0,t(ec(),e),t(tc(),e),t(Ki(),e),t(Wi(),e),t(fc(),e),t(hc(),e),t(vc(),e),t(ln(),e),e.baggageUtils=zi(),t(Xi(),e),t(mc(),e),t(gc(),e),t(yc(),e),t(Ec(),e),t(Ji(),e),t(eo(),e),t(bc(),e),t(Tc(),e),t(un(),e),t(Zi(),e),t(Qi(),e),t(Yi(),e),t(Sc(),e),t(Ac(),e),t(ln(),e)}),Ic=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExceptionEventName=void 0,e.ExceptionEventName="exception"}),to=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Span=void 0;var r=we(),t=rt(),o=ar(),c=Ic(),s=class{constructor(i,n,a,l,p,u,f=[],h=t.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:r.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=a,this._spanContext=l,this.parentSpanId=u,this.kind=p,this.links=f,this.startTime=t.timeInputToHrTime(h),this.resource=i.resource,this.instrumentationLibrary=i.instrumentationLibrary,this._spanLimits=i.getSpanLimits(),this._spanProcessor=i.getActiveSpanProcessor(),this._spanProcessor.onStart(this,n)}spanContext(){return this._spanContext}setAttribute(i,n){return n==null||this._isSpanEnded()?this:i.length===0?(r.diag.warn(`Invalid attribute key: ${i}`),this):t.isAttributeValue(n)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,i)?this:(this.attributes[i]=n,this):(r.diag.warn(`Invalid attribute value set for key: ${i}`),this)}setAttributes(i){for(let[n,a]of Object.entries(i))this.setAttribute(n,a);return this}addEvent(i,n,a){return this._isSpanEnded()?this:(this.events.length>=this._spanLimits.eventCountLimit&&(r.diag.warn("Dropping extra events."),this.events.shift()),t.isTimeInput(n)&&(typeof a=="undefined"&&(a=n),n=void 0),typeof a=="undefined"&&(a=t.hrTime()),this.events.push({name:i,attributes:n,time:t.timeInputToHrTime(a)}),this)}setStatus(i){return this._isSpanEnded()?this:(this.status=i,this)}updateName(i){return this._isSpanEnded()?this:(this.name=i,this)}end(i=t.hrTime()){if(this._isSpanEnded()){r.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=t.timeInputToHrTime(i),this._duration=t.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&r.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(i,n=t.hrTime()){let a={};typeof i=="string"?a[o.SemanticAttributes.EXCEPTION_MESSAGE]=i:i&&(i.code?a[o.SemanticAttributes.EXCEPTION_TYPE]=i.code.toString():i.name&&(a[o.SemanticAttributes.EXCEPTION_TYPE]=i.name),i.message&&(a[o.SemanticAttributes.EXCEPTION_MESSAGE]=i.message),i.stack&&(a[o.SemanticAttributes.EXCEPTION_STACKTRACE]=i.stack)),a[o.SemanticAttributes.EXCEPTION_TYPE]||a[o.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(c.ExceptionEventName,a,n):r.diag.warn(`Failed to record an exception ${i}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&r.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}};e.Span=s}),ro=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildSamplerFromEnv=e.DEFAULT_CONFIG=void 0;var r=we(),t=rt(),o=t.getEnv(),c=t.TracesSamplerValues.AlwaysOn;e.DEFAULT_CONFIG={sampler:s(o),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:t.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:t.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:t.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}};function s(a=t.getEnv()){switch(a.OTEL_TRACES_SAMPLER){case t.TracesSamplerValues.AlwaysOn:return new t.AlwaysOnSampler;case t.TracesSamplerValues.AlwaysOff:return new t.AlwaysOffSampler;case t.TracesSamplerValues.ParentBasedAlwaysOn:return new t.ParentBasedSampler({root:new t.AlwaysOnSampler});case t.TracesSamplerValues.ParentBasedAlwaysOff:return new t.ParentBasedSampler({root:new t.AlwaysOffSampler});case t.TracesSamplerValues.TraceIdRatio:return new t.TraceIdRatioBasedSampler(n(a));case t.TracesSamplerValues.ParentBasedTraceIdRatio:return new t.ParentBasedSampler({root:new t.TraceIdRatioBasedSampler(n(a))});default:return r.diag.error(`OTEL_TRACES_SAMPLER value "${a.OTEL_TRACES_SAMPLER} invalid, defaulting to ${c}".`),new t.AlwaysOnSampler}}e.buildSamplerFromEnv=s;var i=1;function n(a){if(a.OTEL_TRACES_SAMPLER_ARG===void 0||a.OTEL_TRACES_SAMPLER_ARG==="")return r.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${i}.`),i;let l=Number(a.OTEL_TRACES_SAMPLER_ARG);return isNaN(l)?(r.diag.error(`OTEL_TRACES_SAMPLER_ARG=${a.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${i}.`),i):l<0||l>1?(r.diag.error(`OTEL_TRACES_SAMPLER_ARG=${a.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${i}.`),i):l}}),Cc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeConfig=void 0;var r=ro();function t(o){let c={sampler:r.buildSamplerFromEnv()},s=Object.assign({},r.DEFAULT_CONFIG,c,o);return s.spanLimits=Object.assign({},r.DEFAULT_CONFIG.spanLimits,o.spanLimits||{}),s}e.mergeConfig=t}),wc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tracer=void 0;var r=we(),t=rt(),o=to(),c=Cc(),s=class{constructor(n,a,l){this._tracerProvider=l;let p=c.mergeConfig(a);this._sampler=p.sampler,this._spanLimits=p.spanLimits,this._idGenerator=a.idGenerator||new t.RandomIdGenerator,this.resource=l.resource,this.instrumentationLibrary=n}startSpan(n,a={},l=r.context.active()){var p,u;if(t.isTracingSuppressed(l))return r.diag.debug("Instrumentation suppressed, returning Noop Span"),r.trace.wrapSpanContext(r.INVALID_SPAN_CONTEXT);let f=i(a,l),h=this._idGenerator.generateSpanId(),v,m,g;!f||!r.trace.isSpanContextValid(f)?v=this._idGenerator.generateTraceId():(v=f.traceId,m=f.traceState,g=f.spanId);let y=(p=a.kind)!==null&&p!==void 0?p:r.SpanKind.INTERNAL,b=(u=a.links)!==null&&u!==void 0?u:[],S=t.sanitizeAttributes(a.attributes),T=this._sampler.shouldSample(a.root?r.trace.setSpanContext(l,r.INVALID_SPAN_CONTEXT):l,v,n,y,S,b),O=T.decision===r.SamplingDecision.RECORD_AND_SAMPLED?r.TraceFlags.SAMPLED:r.TraceFlags.NONE,D={traceId:v,spanId:h,traceFlags:O,traceState:m};if(T.decision===r.SamplingDecision.NOT_RECORD)return r.diag.debug("Recording is off, propagating context in a non-recording span"),r.trace.wrapSpanContext(D);let M=new o.Span(this,l,n,D,y,g,b,a.startTime);return M.setAttributes(Object.assign(S,T.attributes)),M}startActiveSpan(n,a,l,p){let u,f,h;if(arguments.length<2)return;arguments.length===2?h=a:arguments.length===3?(u=a,h=l):(u=a,f=l,h=p);let v=f??r.context.active(),m=this.startSpan(n,u,v),g=r.trace.setSpan(v,m);return r.context.with(g,h,void 0,m)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};e.Tracer=s;function i(n,a){if(!n.root)return r.trace.getSpanContext(a)}}),Oc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultServiceName=void 0;function r(){return`unknown_service:${process.argv0}`}e.defaultServiceName=r}),Pc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detectResources=void 0;var r=io(),t=we(),o=require("util"),c=async(i={})=>{let n=Object.assign(i),a=await Promise.all((n.detectors||[]).map(async l=>{try{let p=await l.detect(n);return t.diag.debug(`${l.constructor.name} found resource.`,p),p}catch(p){return t.diag.debug(`${l.constructor.name} failed: ${p.message}`),r.Resource.empty()}}));return s(a),a.reduce((l,p)=>l.merge(p),r.Resource.empty())};e.detectResources=c;var s=i=>{i.forEach(n=>{if(Object.keys(n.attributes).length>0){let a=o.inspect(n.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});t.diag.verbose(a)}})}}),Rc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.envDetector=void 0;var r=we(),t=rt(),o=ar(),c=pn(),s=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(i){let n={},a=t.getEnv(),l=a.OTEL_RESOURCE_ATTRIBUTES,p=a.OTEL_SERVICE_NAME;if(l)try{let u=this._parseResourceAttributes(l);Object.assign(n,u)}catch(u){r.diag.debug(`EnvDetector failed: ${u.message}`)}return p&&(n[o.ResourceAttributes.SERVICE_NAME]=p),new c.Resource(n)}_parseResourceAttributes(i){if(!i)return{};let n={},a=i.split(this._COMMA_SEPARATOR,-1);for(let l of a){let p=l.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(p.length!==2)continue;let[u,f]=p;if(u=u.trim(),f=f.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(u))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(f))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);n[u]=f}return n}_isValid(i){return i.length<=this._MAX_LENGTH&&this._isPrintableString(i)}_isPrintableString(i){for(let n=0;n<i.length;n++){let a=i.charAt(n);if(a<=" "||a>="~")return!1}return!0}_isValidAndNotEmpty(i){return i.length>0&&this._isValid(i)}};e.envDetector=new s}),xc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.processDetector=void 0;var r=we(),t=ar(),o=pn(),c=class{async detect(s){let i={[t.ResourceAttributes.PROCESS_PID]:process.pid,[t.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[t.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[t.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(i,s)}_getResourceAttributes(s,i){return s[t.ResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||s[t.ResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||s[t.ResourceAttributes.PROCESS_COMMAND]===""||s[t.ResourceAttributes.PROCESS_COMMAND_LINE]===""?(r.diag.debug("ProcessDetector failed: Unable to find required process resources. "),o.Resource.empty()):new o.Resource(Object.assign({},s))}};e.processDetector=new c}),Dc=C(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(o,c,s,i){i===void 0&&(i=s),Object.defineProperty(o,i,{enumerable:!0,get:function(){return c[s]}})}:function(o,c,s,i){i===void 0&&(i=s),o[i]=c[s]}),t=e&&e.__exportStar||function(o,c){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&r(c,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),t(Rc(),e),t(xc(),e)}),Nc=C(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(o,c,s,i){i===void 0&&(i=s),Object.defineProperty(o,i,{enumerable:!0,get:function(){return c[s]}})}:function(o,c,s,i){i===void 0&&(i=s),o[i]=c[s]}),t=e&&e.__exportStar||function(o,c){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&r(c,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),t(Oc(),e),t(Pc(),e),t(Dc(),e)}),no=C(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(o,c,s,i){i===void 0&&(i=s),Object.defineProperty(o,i,{enumerable:!0,get:function(){return c[s]}})}:function(o,c,s,i){i===void 0&&(i=s),o[i]=c[s]}),t=e&&e.__exportStar||function(o,c){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&r(c,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),t(Nc(),e)}),io=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Resource=void 0;var r=ar(),t=rt(),o=no(),c=class{constructor(s){this.attributes=s}static empty(){return c.EMPTY}static default(){return new c({[r.ResourceAttributes.SERVICE_NAME]:o.defaultServiceName(),[r.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:t.SDK_INFO[r.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[r.ResourceAttributes.TELEMETRY_SDK_NAME]:t.SDK_INFO[r.ResourceAttributes.TELEMETRY_SDK_NAME],[r.ResourceAttributes.TELEMETRY_SDK_VERSION]:t.SDK_INFO[r.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(s){if(!s||!Object.keys(s.attributes).length)return this;let i=Object.assign({},this.attributes,s.attributes);return new c(i)}};e.Resource=c,c.EMPTY=new c({})}),Mc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),kc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),pn=C(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(o,c,s,i){i===void 0&&(i=s),Object.defineProperty(o,i,{enumerable:!0,get:function(){return c[s]}})}:function(o,c,s,i){i===void 0&&(i=s),o[i]=c[s]}),t=e&&e.__exportStar||function(o,c){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&r(c,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),t(io(),e),t(no(),e),t(Mc(),e),t(kc(),e)}),Lc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiSpanProcessor=void 0;var r=rt(),t=class{constructor(o){this._spanProcessors=o}forceFlush(){let o=[];for(let c of this._spanProcessors)o.push(c.forceFlush());return new Promise(c=>{Promise.all(o).then(()=>{c()}).catch(s=>{r.globalErrorHandler(s||new Error("MultiSpanProcessor: forceFlush failed")),c()})})}onStart(o,c){for(let s of this._spanProcessors)s.onStart(o,c)}onEnd(o){for(let c of this._spanProcessors)c.onEnd(o)}shutdown(){let o=[];for(let c of this._spanProcessors)o.push(c.shutdown());return new Promise((c,s)=>{Promise.all(o).then(()=>{c()},s)})}};e.MultiSpanProcessor=t}),oo=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopSpanProcessor=void 0;var r=class{onStart(t,o){}onEnd(t){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};e.NoopSpanProcessor=r}),jc=C((e,r)=>{var t=200,o="__lodash_hash_undefined__",c=800,s=16,i=9007199254740991,n="[object Arguments]",a="[object Array]",l="[object AsyncFunction]",p="[object Boolean]",u="[object Date]",f="[object Error]",h="[object Function]",v="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",b="[object Object]",S="[object Proxy]",T="[object RegExp]",O="[object Set]",D="[object String]",M="[object Undefined]",N="[object WeakMap]",L="[object ArrayBuffer]",B="[object DataView]",F="[object Float32Array]",z="[object Float64Array]",ie="[object Int8Array]",ee="[object Int16Array]",ge="[object Int32Array]",re="[object Uint8Array]",H="[object Uint8ClampedArray]",G="[object Uint16Array]",V="[object Uint32Array]",W=/[\\^$.*+?()[\]{}|]/g,X=/^\[object .+?Constructor\]$/,ne=/^(?:0|[1-9]\d*)$/,Y={};Y[F]=Y[z]=Y[ie]=Y[ee]=Y[ge]=Y[re]=Y[H]=Y[G]=Y[V]=!0,Y[n]=Y[a]=Y[L]=Y[p]=Y[B]=Y[u]=Y[f]=Y[h]=Y[m]=Y[g]=Y[b]=Y[T]=Y[O]=Y[D]=Y[N]=!1;var he=typeof global=="object"&&global&&global.Object===Object&&global,Se=typeof self=="object"&&self&&self.Object===Object&&self,_e=he||Se||Function("return this")(),ve=typeof e=="object"&&e&&!e.nodeType&&e,ce=ve&&typeof r=="object"&&r&&!r.nodeType&&r,xe=ce&&ce.exports===ve,ke=xe&&he.process,Z=function(){try{var A=ce&&ce.require&&ce.require("util").types;return A||ke&&ke.binding&&ke.binding("util")}catch{}}(),Q=Z&&Z.isTypedArray;function te(A,R,k){switch(k.length){case 0:return A.call(R);case 1:return A.call(R,k[0]);case 2:return A.call(R,k[0],k[1]);case 3:return A.call(R,k[0],k[1],k[2])}return A.apply(R,k)}function fe(A,R){for(var k=-1,K=Array(A);++k<A;)K[k]=R(k);return K}function It(A){return function(R){return A(R)}}function Ct(A,R){return A==null?void 0:A[R]}function j(A,R){return function(k){return A(R(k))}}var wt=Array.prototype,Ot=Function.prototype,$e=Object.prototype,Ae=_e["__core-js_shared__"],ot=Ot.toString,Be=$e.hasOwnProperty,pt=function(){var A=/[^.]+$/.exec(Ae&&Ae.keys&&Ae.keys.IE_PROTO||"");return A?"Symbol(src)_1."+A:""}(),dt=$e.toString,me=ot.call(Object),Pt=RegExp("^"+ot.call(Be).replace(W,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),st=xe?_e.Buffer:void 0,ft=_e.Symbol,ht=_e.Uint8Array,De=st?st.allocUnsafe:void 0,Ue=j(Object.getPrototypeOf,Object),Ve=Object.create,at=$e.propertyIsEnumerable,ze=wt.splice,Le=ft?ft.toStringTag:void 0,je=function(){try{var A=Qr(Object,"defineProperty");return A({},"",{}),A}catch{}}(),ae=st?st.isBuffer:void 0,Ne=Math.max,$=Date.now,vt=Qr(_e,"Map"),tt=Qr(Object,"create"),J=function(){function A(){}return function(R){if(!Gt(R))return{};if(Ve)return Ve(R);A.prototype=R;var k=new A;return A.prototype=void 0,k}}();function We(A){var R=-1,k=A==null?0:A.length;for(this.clear();++R<k;){var K=A[R];this.set(K[0],K[1])}}function Rt(){this.__data__=tt?tt(null):{},this.size=0}function xt(A){var R=this.has(A)&&delete this.__data__[A];return this.size-=R?1:0,R}function Dt(A){var R=this.__data__;if(tt){var k=R[A];return k===o?void 0:k}return Be.call(R,A)?R[A]:void 0}function Nt(A){var R=this.__data__;return tt?R[A]!==void 0:Be.call(R,A)}function Mt(A,R){var k=this.__data__;return this.size+=this.has(A)?0:1,k[A]=tt&&R===void 0?o:R,this}We.prototype.clear=Rt,We.prototype.delete=xt,We.prototype.get=Dt,We.prototype.has=Nt,We.prototype.set=Mt;function Fe(A){var R=-1,k=A==null?0:A.length;for(this.clear();++R<k;){var K=A[R];this.set(K[0],K[1])}}function kt(){this.__data__=[],this.size=0}function Lt(A){var R=this.__data__,k=q(R,A);if(k<0)return!1;var K=R.length-1;return k==K?R.pop():ze.call(R,k,1),--this.size,!0}function He(A){var R=this.__data__,k=q(R,A);return k<0?void 0:R[k][1]}function jt(A){return q(this.__data__,A)>-1}function Ut(A,R){var k=this.__data__,K=q(k,A);return K<0?(++this.size,k.push([A,R])):k[K][1]=R,this}Fe.prototype.clear=kt,Fe.prototype.delete=Lt,Fe.prototype.get=He,Fe.prototype.has=jt,Fe.prototype.set=Ut;function Xe(A){var R=-1,k=A==null?0:A.length;for(this.clear();++R<k;){var K=A[R];this.set(K[0],K[1])}}function qt(){this.size=0,this.__data__={hash:new We,map:new(vt||Fe),string:new We}}function Ht(A){var R=gr(this,A).delete(A);return this.size-=R?1:0,R}function Bt(A){return gr(this,A).get(A)}function Ke(A){return gr(this,A).has(A)}function Ft(A,R){var k=gr(this,A),K=k.size;return k.set(A,R),this.size+=k.size==K?0:1,this}Xe.prototype.clear=qt,Xe.prototype.delete=Ht,Xe.prototype.get=Bt,Xe.prototype.has=Ke,Xe.prototype.set=Ft;function Ze(A){var R=this.__data__=new Fe(A);this.size=R.size}function Vt(){this.__data__=new Fe,this.size=0}function d(A){var R=this.__data__,k=R.delete(A);return this.size=R.size,k}function _(A){return this.__data__.get(A)}function E(A){return this.__data__.has(A)}function I(A,R){var k=this.__data__;if(k instanceof Fe){var K=k.__data__;if(!vt||K.length<t-1)return K.push([A,R]),this.size=++k.size,this;k=this.__data__=new Xe(K)}return k.set(A,R),this.size=k.size,this}Ze.prototype.clear=Vt,Ze.prototype.delete=d,Ze.prototype.get=_,Ze.prototype.has=E,Ze.prototype.set=I;function w(A,R){var k=Jr(A),K=!k&&Zr(A),de=!k&&!K&&Ti(A),Te=!k&&!K&&!de&&Ai(A),Ie=k||K||de||Te,le=Ie?fe(A.length,String):[],Ce=le.length;for(var Je in A)(R||Be.call(A,Je))&&!(Ie&&(Je=="length"||de&&(Je=="offset"||Je=="parent")||Te&&(Je=="buffer"||Je=="byteLength"||Je=="byteOffset")||Ei(Je,Ce)))&&le.push(Je);return le}function P(A,R,k){(k!==void 0&&!yr(A[R],k)||k===void 0&&!(R in A))&&U(A,R,k)}function x(A,R,k){var K=A[R];(!(Be.call(A,R)&&yr(K,k))||k===void 0&&!(R in A))&&U(A,R,k)}function q(A,R){for(var k=A.length;k--;)if(yr(A[k][0],R))return k;return-1}function U(A,R,k){R=="__proto__"&&je?je(A,R,{configurable:!0,enumerable:!0,value:k,writable:!0}):A[R]=k}var pe=Fs();function ue(A){return A==null?A===void 0?M:y:Le&&Le in Object(A)?Vs(A):Ys(A)}function se(A){return tr(A)&&ue(A)==n}function oe(A){if(!Gt(A)||Ws(A))return!1;var R=tn(A)?Pt:X;return R.test(Js(A))}function ye(A){return tr(A)&&Si(A.length)&&!!Y[ue(A)]}function Ds(A){if(!Gt(A))return Ks(A);var R=bi(A),k=[];for(var K in A)K=="constructor"&&(R||!Be.call(A,K))||k.push(K);return k}function yi(A,R,k,K,de){A!==R&&pe(R,function(Te,Ie){if(de||(de=new Ze),Gt(Te))Ns(A,R,Ie,k,yi,K,de);else{var le=K?K(Xr(A,Ie),Te,Ie+"",A,R,de):void 0;le===void 0&&(le=Te),P(A,Ie,le)}},Ii)}function Ns(A,R,k,K,de,Te,Ie){var le=Xr(A,k),Ce=Xr(R,k),Je=Ie.get(Ce);if(Je){P(A,k,Je);return}var Ye=Te?Te(le,Ce,k+"",A,R,Ie):void 0,rr=Ye===void 0;if(rr){var rn=Jr(Ce),nn=!rn&&Ti(Ce),wi=!rn&&!nn&&Ai(Ce);Ye=Ce,rn||nn||wi?Jr(le)?Ye=le:ea(le)?Ye=qs(le):nn?(rr=!1,Ye=Ls(Ce,!0)):wi?(rr=!1,Ye=Us(Ce,!0)):Ye=[]:ta(Ce)||Zr(Ce)?(Ye=le,Zr(le)?Ye=ra(le):(!Gt(le)||tn(le))&&(Ye=Gs(Ce))):rr=!1}rr&&(Ie.set(Ce,Ye),de(Ye,Ce,K,Te,Ie),Ie.delete(Ce)),P(A,k,Ye)}function Ms(A,R){return Xs(Qs(A,R,Ci),A+"")}var ks=je?function(A,R){return je(A,"toString",{configurable:!0,enumerable:!1,value:ia(R),writable:!0})}:Ci;function Ls(A,R){if(R)return A.slice();var k=A.length,K=De?De(k):new A.constructor(k);return A.copy(K),K}function js(A){var R=new A.constructor(A.byteLength);return new ht(R).set(new ht(A)),R}function Us(A,R){var k=R?js(A.buffer):A.buffer;return new A.constructor(k,A.byteOffset,A.length)}function qs(A,R){var k=-1,K=A.length;for(R||(R=Array(K));++k<K;)R[k]=A[k];return R}function Hs(A,R,k,K){var de=!k;k||(k={});for(var Te=-1,Ie=R.length;++Te<Ie;){var le=R[Te],Ce=K?K(k[le],A[le],le,k,A):void 0;Ce===void 0&&(Ce=A[le]),de?U(k,le,Ce):x(k,le,Ce)}return k}function Bs(A){return Ms(function(R,k){var K=-1,de=k.length,Te=de>1?k[de-1]:void 0,Ie=de>2?k[2]:void 0;for(Te=A.length>3&&typeof Te=="function"?(de--,Te):void 0,Ie&&$s(k[0],k[1],Ie)&&(Te=de<3?void 0:Te,de=1),R=Object(R);++K<de;){var le=k[K];le&&A(R,le,K,Te)}return R})}function Fs(A){return function(R,k,K){for(var de=-1,Te=Object(R),Ie=K(R),le=Ie.length;le--;){var Ce=Ie[A?le:++de];if(k(Te[Ce],Ce,Te)===!1)break}return R}}function gr(A,R){var k=A.__data__;return zs(R)?k[typeof R=="string"?"string":"hash"]:k.map}function Qr(A,R){var k=Ct(A,R);return oe(k)?k:void 0}function Vs(A){var R=Be.call(A,Le),k=A[Le];try{A[Le]=void 0;var K=!0}catch{}var de=dt.call(A);return K&&(R?A[Le]=k:delete A[Le]),de}function Gs(A){return typeof A.constructor=="function"&&!bi(A)?J(Ue(A)):{}}function Ei(A,R){var k=typeof A;return R=R??i,!!R&&(k=="number"||k!="symbol"&&ne.test(A))&&A>-1&&A%1==0&&A<R}function $s(A,R,k){if(!Gt(k))return!1;var K=typeof R;return(K=="number"?en(k)&&Ei(R,k.length):K=="string"&&R in k)?yr(k[R],A):!1}function zs(A){var R=typeof A;return R=="string"||R=="number"||R=="symbol"||R=="boolean"?A!=="__proto__":A===null}function Ws(A){return!!pt&&pt in A}function bi(A){var R=A&&A.constructor,k=typeof R=="function"&&R.prototype||$e;return A===k}function Ks(A){var R=[];if(A!=null)for(var k in Object(A))R.push(k);return R}function Ys(A){return dt.call(A)}function Qs(A,R,k){return R=Ne(R===void 0?A.length-1:R,0),function(){for(var K=arguments,de=-1,Te=Ne(K.length-R,0),Ie=Array(Te);++de<Te;)Ie[de]=K[R+de];de=-1;for(var le=Array(R+1);++de<R;)le[de]=K[de];return le[R]=k(Ie),te(A,this,le)}}function Xr(A,R){if(!(R==="constructor"&&typeof A[R]=="function")&&R!="__proto__")return A[R]}var Xs=Zs(ks);function Zs(A){var R=0,k=0;return function(){var K=$(),de=s-(K-k);if(k=K,de>0){if(++R>=c)return arguments[0]}else R=0;return A.apply(void 0,arguments)}}function Js(A){if(A!=null){try{return ot.call(A)}catch{}try{return A+""}catch{}}return""}function yr(A,R){return A===R||A!==A&&R!==R}var Zr=se(function(){return arguments}())?se:function(A){return tr(A)&&Be.call(A,"callee")&&!at.call(A,"callee")},Jr=Array.isArray;function en(A){return A!=null&&Si(A.length)&&!tn(A)}function ea(A){return tr(A)&&en(A)}var Ti=ae||oa;function tn(A){if(!Gt(A))return!1;var R=ue(A);return R==h||R==v||R==l||R==S}function Si(A){return typeof A=="number"&&A>-1&&A%1==0&&A<=i}function Gt(A){var R=typeof A;return A!=null&&(R=="object"||R=="function")}function tr(A){return A!=null&&typeof A=="object"}function ta(A){if(!tr(A)||ue(A)!=b)return!1;var R=Ue(A);if(R===null)return!0;var k=Be.call(R,"constructor")&&R.constructor;return typeof k=="function"&&k instanceof k&&ot.call(k)==me}var Ai=Q?It(Q):ye;function ra(A){return Hs(A,Ii(A))}function Ii(A){return en(A)?w(A,!0):Ds(A)}var na=Bs(function(A,R,k){yi(A,R,k)});function ia(A){return function(){return A}}function Ci(A){return A}function oa(){return!1}r.exports=na}),Uc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessorBase=void 0;var r=we(),t=rt(),o=class{constructor(c,s){this._exporter=c,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let i=t.getEnv();this._maxExportBatchSize=typeof(s==null?void 0:s.maxExportBatchSize)=="number"?s.maxExportBatchSize:i.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(s==null?void 0:s.maxQueueSize)=="number"?s.maxQueueSize:i.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(s==null?void 0:s.scheduledDelayMillis)=="number"?s.scheduledDelayMillis:i.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(s==null?void 0:s.exportTimeoutMillis)=="number"?s.exportTimeoutMillis:i.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(c){}onEnd(c){this._isShutdown||this._addToBuffer(c)}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((c,s)=>{Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(c).catch(i=>{s(i)})}),this._shuttingDownPromise)}_addToBuffer(c){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(c),this._maybeStartTimer())}_flushAll(){return new Promise((c,s)=>{let i=[],n=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let a=0,l=n;a<l;a++)i.push(this._flushOneBatch());Promise.all(i).then(()=>{c()}).catch(s)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((c,s)=>{let i=setTimeout(()=>{s(new Error("Timeout"))},this._exportTimeoutMillis);r.context.with(t.suppressTracing(r.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),n=>{var a;clearTimeout(i),n.code===t.ExportResultCode.SUCCESS?c():s((a=n.error)!==null&&a!==void 0?a:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(c=>{t.globalErrorHandler(c)})},this._scheduledDelayMillis),t.unrefTimer(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};e.BatchSpanProcessorBase=o}),qc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessor=void 0;var r=Uc(),t=class extends r.BatchSpanProcessorBase{onShutdown(){}};e.BatchSpanProcessor=t}),Hc=C(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(o,c,s,i){i===void 0&&(i=s),Object.defineProperty(o,i,{enumerable:!0,get:function(){return c[s]}})}:function(o,c,s,i){i===void 0&&(i=s),o[i]=c[s]}),t=e&&e.__exportStar||function(o,c){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&r(c,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),t(qc(),e)}),so=C(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(o,c,s,i){i===void 0&&(i=s),Object.defineProperty(o,i,{enumerable:!0,get:function(){return c[s]}})}:function(o,c,s,i){i===void 0&&(i=s),o[i]=c[s]}),t=e&&e.__exportStar||function(o,c){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&r(c,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),t(Hc(),e)}),Bc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BasicTracerProvider=e.ForceFlushState=void 0;var r=we(),t=rt(),o=pn(),c=ao(),s=ro(),i=Lc(),n=oo(),a=jc(),l=so(),p;(function(f){f[f.resolved=0]="resolved",f[f.timeout=1]="timeout",f[f.error=2]="error",f[f.unresolved=3]="unresolved"})(p=e.ForceFlushState||(e.ForceFlushState={}));var u=class{constructor(f={}){var h;this._registeredSpanProcessors=[],this._tracers=new Map;let v=a({},s.DEFAULT_CONFIG,f);this.resource=(h=v.resource)!==null&&h!==void 0?h:o.Resource.empty(),this.resource=o.Resource.default().merge(this.resource),this._config=Object.assign({},v,{resource:this.resource});let m=this._buildExporterFromEnv();if(m!==void 0){let g=new l.BatchSpanProcessor(m);this.activeSpanProcessor=g}else this.activeSpanProcessor=new n.NoopSpanProcessor}getTracer(f,h){let v=`${f}@${h||""}`;return this._tracers.has(v)||this._tracers.set(v,new c.Tracer({name:f,version:h},this._config,this)),this._tracers.get(v)}addSpanProcessor(f){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(h=>r.diag.error("Error while trying to shutdown current span processor",h)),this._registeredSpanProcessors.push(f),this.activeSpanProcessor=new i.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(f={}){r.trace.setGlobalTracerProvider(this),f.propagator===void 0&&(f.propagator=this._buildPropagatorFromEnv()),f.contextManager&&r.context.setGlobalContextManager(f.contextManager),f.propagator&&r.propagation.setGlobalPropagator(f.propagator)}forceFlush(){let f=this._config.forceFlushTimeoutMillis,h=this._registeredSpanProcessors.map(v=>new Promise(m=>{let g,y=setTimeout(()=>{m(new Error(`Span processor did not completed within timeout period of ${f} ms`)),g=p.timeout},f);v.forceFlush().then(()=>{clearTimeout(y),g!==p.timeout&&(g=p.resolved,m(g))}).catch(b=>{clearTimeout(y),g=p.error,m(b)})}));return new Promise((v,m)=>{Promise.all(h).then(g=>{let y=g.filter(b=>b!==p.resolved);y.length>0?m(y):v()}).catch(g=>m([g]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(f){var h;return(h=u._registeredPropagators.get(f))===null||h===void 0?void 0:h()}_getSpanExporter(f){var h;return(h=u._registeredExporters.get(f))===null||h===void 0?void 0:h()}_buildPropagatorFromEnv(){let f=Array.from(new Set(t.getEnv().OTEL_PROPAGATORS)),h=f.map(v=>{let m=this._getPropagator(v);return m||r.diag.warn(`Propagator "${v}" requested through environment variable is unavailable.`),m}).reduce((v,m)=>(m&&v.push(m),v),[]);if(h.length!==0)return f.length===1?h[0]:new t.CompositePropagator({propagators:h})}_buildExporterFromEnv(){let f=t.getEnv().OTEL_TRACES_EXPORTER;if(f==="none")return;let h=this._getSpanExporter(f);return h||r.diag.error(`Exporter "${f}" requested through environment variable is unavailable.`),h}};e.BasicTracerProvider=u,u._registeredPropagators=new Map([["tracecontext",()=>new t.HttpTraceContextPropagator],["baggage",()=>new t.HttpBaggagePropagator]]),u._registeredExporters=new Map}),Fc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConsoleSpanExporter=void 0;var r=rt(),t=class{export(o,c){return this._sendSpans(o,c)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(o){return{traceId:o.spanContext().traceId,parentId:o.parentSpanId,name:o.name,id:o.spanContext().spanId,kind:o.kind,timestamp:r.hrTimeToMicroseconds(o.startTime),duration:r.hrTimeToMicroseconds(o.duration),attributes:o.attributes,status:o.status,events:o.events}}_sendSpans(o,c){for(let s of o)console.log(this._exportInfo(s));if(c)return c({code:r.ExportResultCode.SUCCESS})}};e.ConsoleSpanExporter=t}),Vc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemorySpanExporter=void 0;var r=rt(),t=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(o,c){if(this._stopped)return c({code:r.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...o),setTimeout(()=>c({code:r.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};e.InMemorySpanExporter=t}),Gc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),$c=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleSpanProcessor=void 0;var r=we(),t=rt(),o=class{constructor(c){this._exporter=c,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(c){}onEnd(c){this._isShutdown||r.context.with(t.suppressTracing(r.context.active()),()=>{this._exporter.export([c],s=>{var i;s.code!==t.ExportResultCode.SUCCESS&&t.globalErrorHandler((i=s.error)!==null&&i!==void 0?i:new Error(`SimpleSpanProcessor: span export failed (status ${s})`))})})}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((c,s)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(c).catch(i=>{s(i)})}),this._shuttingDownPromise)}};e.SimpleSpanProcessor=o}),zc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Wc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Kc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Yc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),ao=C(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(o,c,s,i){i===void 0&&(i=s),Object.defineProperty(o,i,{enumerable:!0,get:function(){return c[s]}})}:function(o,c,s,i){i===void 0&&(i=s),o[i]=c[s]}),t=e&&e.__exportStar||function(o,c){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&r(c,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),t(wc(),e),t(Bc(),e),t(so(),e),t(Fc(),e),t(Vc(),e),t(Gc(),e),t($c(),e),t(zc(),e),t(oo(),e),t(to(),e),t(Wc(),e),t(Kc(),e),t(Yc(),e)}),Qc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.azureCoreTracing=e.AzureMonitorSymbol=void 0;var r=Me();e.AzureMonitorSymbol="Azure_Monitor_Tracer";var t=!1,o=function(s){if(t)return s;try{var i=ao(),n=we(),a=new i.BasicTracerProvider,l=a.getTracer("applicationinsights tracer"),p=s.setTracer;s.setTracer=function(u){var f=u.startSpan;u.startSpan=function(h,v,m){var g=f.call(this,h,v,m),y=g.end;return g.end=function(){var b=y.apply(this,arguments);return r.channel.publish("azure-coretracing",g),b},g},u[e.AzureMonitorSymbol]=!0,p.call(this,u)},n.trace.getSpan(n.context.active()),s.setTracer(l),t=!0}catch{}return s};e.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:o};function c(){r.channel.registerMonkeyPatch("@azure/core-tracing",e.azureCoreTracing)}e.enable=c}),Xc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.bunyan=void 0;var r=Me(),t=function(c){var s=c.prototype._emit;return c.prototype._emit=function(i,n){var a=s.apply(this,arguments);if(!n){var l=a;l||(l=s.call(this,i,!0)),r.channel.publish("bunyan",{level:i.level,result:l})}return a},c};e.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:t};function o(){r.channel.registerMonkeyPatch("bunyan",e.bunyan)}e.enable=o}),Zc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.console=void 0;var r=Me(),t=require("stream"),o=function(s){var i=new t.Writable,n=new t.Writable;i.write=function(v){if(!v)return!0;var m=v.toString();return r.channel.publish("console",{message:m}),!0},n.write=function(v){if(!v)return!0;var m=v.toString();return r.channel.publish("console",{message:m,stderr:!0}),!0};for(var a=new s.Console(i,n),l=["log","info","warn","error","dir","time","timeEnd","trace","assert"],p=function(v){var m=s[v];m&&(s[v]=function(){if(a[v])try{a[v].apply(a,arguments)}catch{}return m.apply(s,arguments)})},u=0,f=l;u<f.length;u++){var h=f[u];p(h)}return s};e.console={versionSpecifier:">= 4.0.0",patch:o};function c(){r.channel.registerMonkeyPatch("console",e.console),require("console")}e.enable=c}),Jc=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongoCore=void 0;var r=Me(),t=function(c){var s=c.Server.prototype.connect;return c.Server.prototype.connect=function(){var i=s.apply(this,arguments),n=this.s.pool.write;this.s.pool.write=function(){var l=typeof arguments[1]=="function"?1:2;return typeof arguments[l]=="function"&&(arguments[l]=r.channel.bindToContext(arguments[l])),n.apply(this,arguments)};var a=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=r.channel.bindToContext(arguments[1])),a.apply(this,arguments)},i},c};e.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:t};function o(){r.channel.registerMonkeyPatch("mongodb-core",e.mongoCore)}e.enable=o}),eu=C(e=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(a){for(var l,p=1,u=arguments.length;p<u;p++){l=arguments[p];for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(a[f]=l[f])}return a},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongo330=e.mongo3=e.mongo2=void 0;var t=Me(),o=function(a){var l=a.instrument({operationIdGenerator:{next:function(){return t.channel.bindToContext(function(u){return u()})}}}),p={};return l.on("started",function(u){p[u.requestId]||(p[u.requestId]=r(r({},u),{time:new Date}))}),l.on("succeeded",function(u){var f=p[u.requestId];f&&delete p[u.requestId],typeof u.operationId=="function"?u.operationId(function(){return t.channel.publish("mongodb",{startedData:f,event:u,succeeded:!0})}):t.channel.publish("mongodb",{startedData:f,event:u,succeeded:!0})}),l.on("failed",function(u){var f=p[u.requestId];f&&delete p[u.requestId],typeof u.operationId=="function"?u.operationId(function(){return t.channel.publish("mongodb",{startedData:f,event:u,succeeded:!1})}):t.channel.publish("mongodb",{startedData:f,event:u,succeeded:!1})}),a},c=function(a){var l=a.instrument(),p={},u={};return l.on("started",function(f){p[f.requestId]||(u[f.requestId]=t.channel.bindToContext(function(h){return h()}),p[f.requestId]=r(r({},f),{time:new Date}))}),l.on("succeeded",function(f){var h=p[f.requestId];h&&delete p[f.requestId],typeof f=="object"&&typeof u[f.requestId]=="function"&&(u[f.requestId](function(){return t.channel.publish("mongodb",{startedData:h,event:f,succeeded:!0})}),delete u[f.requestId])}),l.on("failed",function(f){var h=p[f.requestId];h&&delete p[f.requestId],typeof f=="object"&&typeof u[f.requestId]=="function"&&(u[f.requestId](function(){return t.channel.publish("mongodb",{startedData:h,event:f,succeeded:!1})}),delete u[f.requestId])}),a},s=function(a){var l=a.Server.prototype.connect;return a.Server.prototype.connect=function(){var p=l.apply(this,arguments),u=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var h=typeof arguments[1]=="function"?1:2;return typeof arguments[h]=="function"&&(arguments[h]=t.channel.bindToContext(arguments[h])),u.apply(this,arguments)};var f=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=t.channel.bindToContext(arguments[1])),f.apply(this,arguments)},p},a},i=function(a){s(a);var l=a.instrument(),p={},u={};return l.on("started",function(f){p[f.requestId]||(u[f.requestId]=t.channel.bindToContext(function(h){return h()}),p[f.requestId]=f)}),l.on("succeeded",function(f){var h=p[f.requestId];h&&delete p[f.requestId],typeof f=="object"&&typeof u[f.requestId]=="function"&&(u[f.requestId](function(){return t.channel.publish("mongodb",{startedData:h,event:f,succeeded:!0})}),delete u[f.requestId])}),l.on("failed",function(f){var h=p[f.requestId];h&&delete p[f.requestId],typeof f=="object"&&typeof u[f.requestId]=="function"&&(u[f.requestId](function(){return t.channel.publish("mongodb",{startedData:h,event:f,succeeded:!1})}),delete u[f.requestId])}),a};e.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:o},e.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:c},e.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:i};function n(){t.channel.registerMonkeyPatch("mongodb",e.mongo2),t.channel.registerMonkeyPatch("mongodb",e.mongo3),t.channel.registerMonkeyPatch("mongodb",e.mongo330)}e.enable=n}),tu=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mysql=void 0;var r=Me(),t=require("path"),o=function(s,i){var n=function(h,v){return function(m,g){var y=h[m];y&&(h[m]=function(){for(var b=arguments.length-1,S=arguments.length-1;S>=0;--S)if(typeof arguments[S]=="function"){b=S;break}else if(typeof arguments[S]!="undefined")break;var T=arguments[b],O={result:null,startTime:null,startDate:null};typeof T=="function"&&(g?(O.startTime=process.hrtime(),O.startDate=new Date,arguments[b]=r.channel.bindToContext(g(O,T))):arguments[b]=r.channel.bindToContext(T));var D=y.apply(this,arguments);return O.result=D,D})}},a=function(h,v){return n(h.prototype,v+".prototype")},l=["connect","changeUser","ping","statistics","end"],p=require(t.dirname(i)+"/lib/Connection");l.forEach(function(h){return a(p,"Connection")(h)}),n(p,"Connection")("createQuery",function(h,v){return function(m){var g=process.hrtime(h.startTime),y=g[0]*1e3+g[1]/1e6|0;r.channel.publish("mysql",{query:h.result,callbackArgs:arguments,err:m,duration:y,time:h.startDate}),v.apply(this,arguments)}});var u=["_enqueueCallback"],f=require(t.dirname(i)+"/lib/Pool");return u.forEach(function(h){return a(f,"Pool")(h)}),s};e.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:o};function c(){r.channel.registerMonkeyPatch("mysql",e.mysql)}e.enable=c}),ru=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgresPool1=void 0;var r=Me();function t(c){var s=c.prototype.connect;return c.prototype.connect=function(i){return i&&(arguments[0]=r.channel.bindToContext(i)),s.apply(this,arguments)},c}e.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:t};function o(){r.channel.registerMonkeyPatch("pg-pool",e.postgresPool1)}e.enable=o}),nu=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgres7=e.postgres6=void 0;var r=Me(),t=require("events");function o(i,n){var a=i.Client.prototype.query,l="__diagnosticOriginalFunc";return i.Client.prototype.query=function(p,u,f){var h={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},v=process.hrtime(),m;function g(y){y&&y[l]&&(y=y[l]);var b=r.channel.bindToContext(function(S,T){var O=process.hrtime(v);if(h.result=T&&{rowCount:T.rowCount,command:T.command},h.error=S,h.duration=Math.ceil(O[0]*1e3+O[1]/1e6),r.channel.publish("postgres",h),S){if(y)return y.apply(this,arguments);m&&m instanceof t.EventEmitter&&m.emit("error",S)}else y&&y.apply(this,arguments)});try{return Object.defineProperty(b,l,{value:y}),b}catch{return y}}try{typeof p=="string"?u instanceof Array?(h.query.preparable={text:p,args:u},f=g(f)):(h.query.text=p,f?f=g(f):u=g(u)):(typeof p.name=="string"?h.query.plan=p.name:p.values instanceof Array?h.query.preparable={text:p.text,args:p.values}:h.query.text=p.text,f?f=g(f):u?u=g(u):p.callback=g(p.callback))}catch{return a.apply(this,arguments)}return arguments[0]=p,arguments[1]=u,arguments[2]=f,arguments.length=arguments.length>3?arguments.length:3,m=a.apply(this,arguments),m},i}function c(i,n){var a=i.Client.prototype.query,l="__diagnosticOriginalFunc";return i.Client.prototype.query=function(p,u,f){var h=this,v=!!f,m={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},g=process.hrtime(),y;function b(S){S&&S[l]&&(S=S[l]);var T=r.channel.bindToContext(function(O,D){var M=process.hrtime(g);if(m.result=D&&{rowCount:D.rowCount,command:D.command},m.error=O,m.duration=Math.ceil(M[0]*1e3+M[1]/1e6),r.channel.publish("postgres",m),O){if(S)return S.apply(this,arguments);y&&y instanceof t.EventEmitter&&y.emit("error",O)}else S&&S.apply(this,arguments)});try{return Object.defineProperty(T,l,{value:S}),T}catch{return S}}try{typeof p=="string"?u instanceof Array?(m.query.preparable={text:p,args:u},v=typeof f=="function",f=v?b(f):f):(m.query.text=p,f?(v=typeof f=="function",f=v?b(f):f):(v=typeof u=="function",u=v?b(u):u)):(typeof p.name=="string"?m.query.plan=p.name:p.values instanceof Array?m.query.preparable={text:p.text,args:p.values}:m.query.text=p.text,f?(v=typeof f=="function",f=b(f)):u?(v=typeof u=="function",u=v?b(u):u):(v=typeof p.callback=="function",p.callback=v?b(p.callback):p.callback))}catch{return a.apply(this,arguments)}return arguments[0]=p,arguments[1]=u,arguments[2]=f,arguments.length=arguments.length>3?arguments.length:3,y=a.apply(this,arguments),v?y:y.then(function(S){return b()(void 0,S),new h._Promise(function(T,O){T(S)})}).catch(function(S){return b()(S,void 0),new h._Promise(function(T,O){O(S)})})},i}e.postgres6={versionSpecifier:"6.*",patch:o},e.postgres7={versionSpecifier:">=7.* <=8.*",patch:c};function s(){r.channel.registerMonkeyPatch("pg",e.postgres6),r.channel.registerMonkeyPatch("pg",e.postgres7)}e.enable=s}),iu=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.redis=void 0;var r=Me(),t=function(c){var s=c.RedisClient.prototype.internal_send_command;return c.RedisClient.prototype.internal_send_command=function(i){if(i){var n=i.callback;if(!n||!n.pubsubBound){var a=this.address,l=process.hrtime(),p=new Date;i.callback=r.channel.bindToContext(function(u,f){var h=process.hrtime(l),v=h[0]*1e3+h[1]/1e6|0;r.channel.publish("redis",{duration:v,address:a,commandObj:i,err:u,result:f,time:p}),typeof n=="function"&&n.apply(this,arguments)}),i.callback.pubsubBound=!0}}return s.call(this,i)},c};e.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:t};function o(){r.channel.registerMonkeyPatch("redis",e.redis)}e.enable=o}),ou=C(e=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(s){for(var i,n=1,a=arguments.length;n<a;n++){i=arguments[n];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(s[l]=i[l])}return s},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=void 0;var t=Me(),o=function(s){var i=s.Connection.prototype.makeRequest;return s.Connection.prototype.makeRequest=function(){function n(l){var p=process.hrtime(),u={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return t.channel.bindToContext(function(f,h,v){var m=process.hrtime(p);u=r(r({},u),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!f&&{rowCount:h,rows:v},query:{text:this.parametersByName.statement.value},error:f,duration:Math.ceil(m[0]*1e3+m[1]/1e6)}),t.channel.publish("tedious",u),l.call(this,f,h,v)})}var a=arguments[0];arguments[0].callback=n(a.callback),i.apply(this,arguments)},s};e.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:o};function c(){t.channel.registerMonkeyPatch("tedious",e.tedious)}e.enable=c}),su=C(e=>{"use strict";var r=e&&e.__extends||function(){var n=function(a,l){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,u){p.__proto__=u}||function(p,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(p[f]=u[f])},n(a,l)};return function(a,l){n(a,l);function p(){this.constructor=a}a.prototype=l===null?Object.create(l):(p.prototype=l.prototype,new p)}}(),t=e&&e.__rest||function(n,a){var l={};for(var p in n)Object.prototype.hasOwnProperty.call(n,p)&&a.indexOf(p)<0&&(l[p]=n[p]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,p=Object.getOwnPropertySymbols(n);u<p.length;u++)a.indexOf(p[u])<0&&Object.prototype.propertyIsEnumerable.call(n,p[u])&&(l[p[u]]=n[p[u]]);return l};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.winston2=e.winston3=void 0;var o=Me(),c=function(n){var a=n.Logger.prototype.log,l,p=function(u,f,h){var v;return l===n.config.npm.levels?v="npm":l===n.config.syslog.levels?v="syslog":v="unknown",o.channel.publish("winston",{level:u,message:f,meta:h,levelKind:v}),f};return n.Logger.prototype.log=function(){return l=this.levels,!this.filters||this.filters.length===0?this.filters=[p]:this.filters[this.filters.length-1]!==p&&(this.filters=this.filters.filter(function(u){return u!==p}),this.filters.push(p)),a.apply(this,arguments)},n},s=function(n){var a=function(h,v){var m;return h.config.npm.levels[v]!=null?m="npm":h.config.syslog.levels[v]!=null?m="syslog":m="unknown",m},l=function(h){r(v,h);function v(m,g){var y=h.call(this,g)||this;return y.winston=m,y}return v.prototype.log=function(m,g){var y=m.message,b=m.level,S=m.meta,T=t(m,["message","level","meta"]);b=typeof Symbol.for=="function"?m[Symbol.for("level")]:b,y=m instanceof Error?m:y;var O=a(this.winston,b);S=S||{};for(var D in T)T.hasOwnProperty(D)&&(S[D]=T[D]);o.channel.publish("winston",{message:y,level:b,levelKind:O,meta:S}),g()},v}(n.Transport);function p(){var h=arguments[0].levels||n.config.npm.levels,v;for(var m in h)h.hasOwnProperty(m)&&(v=v===void 0||h[m]>h[v]?m:v);this.add(new l(n,{level:v}))}var u=n.createLogger;n.createLogger=function(){var h=arguments[0].levels||n.config.npm.levels,v;for(var m in h)h.hasOwnProperty(m)&&(v=v===void 0||h[m]>h[v]?m:v);var g=u.apply(this,arguments);g.add(new l(n,{level:v}));var y=g.configure;return g.configure=function(){y.apply(this,arguments),p.apply(this,arguments)},g};var f=n.configure;return n.configure=function(){f.apply(this,arguments),p.apply(this,arguments)},n.add(new l(n)),n};e.winston3={versionSpecifier:"3.x",patch:s},e.winston2={versionSpecifier:"2.x",patch:c};function i(){o.channel.registerMonkeyPatch("winston",e.winston2),o.channel.registerMonkeyPatch("winston",e.winston3)}e.enable=i}),au=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=e.pgPool=e.pg=e.winston=e.redis=e.mysql=e.mongodb=e.mongodbCore=e.console=e.bunyan=e.azuresdk=void 0;var r=Qc();e.azuresdk=r;var t=Xc();e.bunyan=t;var o=Zc();e.console=o;var c=Jc();e.mongodbCore=c;var s=eu();e.mongodb=s;var i=tu();e.mysql=i;var n=ru();e.pgPool=n;var a=nu();e.pg=a;var l=iu();e.redis=l;var p=ou();e.tedious=p;var u=su();e.winston=u;function f(){t.enable(),o.enable(),c.enable(),s.enable(),i.enable(),a.enable(),n.enable(),l.enable(),u.enable(),r.enable(),p.enable()}e.enable=f}),dn=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerContextPreservation=e.IsInitialized=void 0;var r=Mi(),t=qe();e.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var o="DiagnosticChannel";if(e.IsInitialized){c=au(),s=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",i=s.split(","),n={bunyan:c.bunyan,console:c.console,mongodb:c.mongodb,mongodbCore:c.mongodbCore,mysql:c.mysql,redis:c.redis,pg:c.pg,pgPool:c.pgPool,winston:c.winston,azuresdk:c.azuresdk};for(a in n)i.indexOf(a)===-1&&(n[a].enable(),t.info(o,"Subscribed to "+a+" events"));i.length>0&&t.info(o,"Some modules will not be patched",i)}else t.info(o,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var c,s,i,n,a;function l(p){if(e.IsInitialized){var u=Me();u.channel.addContextPreservation(p),u.channel.spanContextPropagator=r.AsyncScopeManager}}e.registerContextPreservation=l}),cr=C((e,r)=>{"use strict";r.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}}),et=C((e,r)=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(p){for(var u,f=1,h=arguments.length;f<h;f++){u=arguments[f];for(var v in u)Object.prototype.hasOwnProperty.call(u,v)&&(p[v]=u[v])}return p},t.apply(this,arguments)},o=require("http"),c=require("https"),s=require("url"),i=require("constants"),n=qe(),a=cr(),l=function(){function p(){}return p.getCookie=function(u,f){var h="";if(u&&u.length&&typeof f=="string")for(var v=u+"=",m=f.split(";"),g=0;g<m.length;g++){var f=m[g];if(f=p.trim(f),f&&f.indexOf(v)===0){h=f.substring(v.length,m[g].length);break}}return h},p.trim=function(u){return typeof u=="string"?u.replace(/^\s+|\s+$/g,""):""},p.int32ArrayToBase64=function(u){var f=function(y,b){return String.fromCharCode(y>>b&255)},h=function(y){return f(y,24)+f(y,16)+f(y,8)+f(y,0)},v=u.map(h).join(""),m=Buffer.from?Buffer.from(v,"binary"):new Buffer(v,"binary"),g=m.toString("base64");return g.substr(0,g.indexOf("="))},p.random32=function(){return 4294967296*Math.random()|0},p.randomu32=function(){return p.random32()+2147483648},p.w3cTraceId=function(){for(var u=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],f="",h,v=0;v<4;v++)h=p.random32(),f+=u[h&15]+u[h>>4&15]+u[h>>8&15]+u[h>>12&15]+u[h>>16&15]+u[h>>20&15]+u[h>>24&15]+u[h>>28&15];var m=u[8+Math.random()*4|0];return f.substr(0,8)+f.substr(9,4)+"4"+f.substr(13,3)+m+f.substr(16,3)+f.substr(19,12)},p.w3cSpanId=function(){return p.w3cTraceId().substring(16)},p.isValidW3CId=function(u){return u.length===32&&u!=="00000000000000000000000000000000"},p.isArray=function(u){return Object.prototype.toString.call(u)==="[object Array]"},p.isError=function(u){return u instanceof Error},p.isPrimitive=function(u){var f=typeof u;return f==="string"||f==="number"||f==="boolean"},p.isDate=function(u){return Object.prototype.toString.call(u)==="[object Date]"},p.msToTimeSpan=function(u){(isNaN(u)||u<0)&&(u=0);var f=(u/1e3%60).toFixed(7).replace(/0{0,4}$/,""),h=""+Math.floor(u/(1e3*60))%60,v=""+Math.floor(u/(1e3*60*60))%24,m=Math.floor(u/(1e3*60*60*24));f=f.indexOf(".")<2?"0"+f:f,h=h.length<2?"0"+h:h,v=v.length<2?"0"+v:v;var g=m>0?m+".":"";return g+v+":"+h+":"+f},p.extractError=function(u){var f=u;return{message:u.message,code:f.code||f.id||""}},p.extractObject=function(u){return u instanceof Error?p.extractError(u):typeof u.toJSON=="function"?u.toJSON():u},p.validateStringMap=function(u){if(typeof u!="object"){n.info("Invalid properties dropped from payload");return}var f={};for(var h in u){var v="",m=u[h],g=typeof m;if(p.isPrimitive(m))v=m.toString();else if(m===null||g==="undefined")v="";else if(g==="function"){n.info("key: "+h+" was function; will not serialize");continue}else{var y=p.isArray(m)?m:p.extractObject(m);try{p.isPrimitive(y)?v=y:v=JSON.stringify(y)}catch(b){v=m.constructor.name.toString()+" (Error: "+b.message+")",n.info("key: "+h+", could not be serialized")}}f[h]=v.substring(0,p.MAX_PROPERTY_LENGTH)}return f},p.canIncludeCorrelationHeader=function(u,f){var h=u&&u.config&&u.config.correlationHeaderExcludedDomains;if(!h||h.length==0||!f)return!0;for(var v=0;v<h.length;v++){var m=new RegExp(h[v].replace(/\./g,".").replace(/\*/g,".*"));if(m.test(s.parse(f).hostname))return!1}return!0},p.getCorrelationContextTarget=function(u,f){var h=u.headers&&u.headers[a.requestContextHeader];if(h)for(var v=h.split(","),m=0;m<v.length;++m){var g=v[m].split("=");if(g.length==2&&g[0]==f)return g[1]}},p.makeRequest=function(u,f,h,v){f&&f.indexOf("//")===0&&(f="https:"+f);var m=s.parse(f),g=t(t({},h),{host:m.hostname,port:m.port,path:m.pathname}),y=void 0;if(m.protocol==="https:"&&(y=u.proxyHttpsUrl||void 0),m.protocol==="http:"&&(y=u.proxyHttpUrl||void 0),y){y.indexOf("//")===0&&(y="http:"+y);var b=s.parse(y);b.protocol==="https:"?(n.info("Proxies that use HTTPS are not supported"),y=void 0):g=t(t({},g),{host:b.hostname,port:b.port||"80",path:f,headers:t(t({},g.headers),{Host:m.hostname})})}var S=m.protocol==="https:"&&!y;return S&&u.httpsAgent!==void 0?g.agent=u.httpsAgent:!S&&u.httpAgent!==void 0?g.agent=u.httpAgent:S&&(g.agent=p.tlsRestrictedAgent),S?c.request(g,v):o.request(g,v)},p.safeIncludeCorrelationHeader=function(u,f,h){var v;if(typeof h=="string")v=h;else if(h instanceof Array)v=h.join(",");else if(h&&typeof h.toString=="function")try{v=h.toString()}catch(m){n.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",m,h)}v?p.addCorrelationIdHeaderFromString(u,f,v):f.setHeader(a.requestContextHeader,a.requestContextSourceKey+"="+u.config.correlationId)},p.dumpObj=function(u){var f=Object.prototype.toString.call(u),h="";return f==="[object Error]"?h="{ stack: '"+u.stack+"', message: '"+u.message+"', name: '"+u.name+"'":h=JSON.stringify(u),f+h},p.addCorrelationIdHeaderFromString=function(u,f,h){var v=h.split(","),m=a.requestContextSourceKey+"=",g=v.some(function(y){return y.substring(0,m.length)===m});g||f.setHeader(a.requestContextHeader,h+","+a.requestContextSourceKey+"="+u.config.correlationId)},p.MAX_PROPERTY_LENGTH=8192,p.tlsRestrictedAgent=new c.Agent({keepAlive:!0,maxSockets:25,secureOptions:i.SSL_OP_NO_SSLv2|i.SSL_OP_NO_SSLv3|i.SSL_OP_NO_TLSv1|i.SSL_OP_NO_TLSv1_1}),p}();r.exports=l}),Kt=C((e,r)=>{"use strict";var t=et(),o=qe(),c=function(){function s(){}return s.queryCorrelationId=function(i,n){var a=i.profileQueryEndpoint+"/api/profiles/"+i.instrumentationKey+"/appId";if(s.completedLookups.hasOwnProperty(a)){n(s.completedLookups[a]);return}else if(s.pendingLookups[a]){s.pendingLookups[a].push(n);return}s.pendingLookups[a]=[n];var l=function(){if(s.pendingLookups[a]){var p={method:"GET",disableAppInsightsAutoCollection:!0};o.info(s.TAG,p);var u=t.makeRequest(i,a,p,function(f){if(f.statusCode===200){var h="";f.setEncoding("utf-8"),f.on("data",function(v){h+=v}),f.on("end",function(){o.info(s.TAG,h);var v=s.correlationIdPrefix+h;s.completedLookups[a]=v,s.pendingLookups[a]&&s.pendingLookups[a].forEach(function(m){return m(v)}),delete s.pendingLookups[a]})}else f.statusCode>=400&&f.statusCode<500?(s.completedLookups[a]=void 0,delete s.pendingLookups[a]):setTimeout(l,i.correlationIdRetryIntervalMs)});u&&(u.on("error",function(f){o.warn(s.TAG,f)}),u.end())}};setTimeout(l,0)},s.cancelCorrelationIdQuery=function(i,n){var a=i.profileQueryEndpoint+"/api/profiles/"+i.instrumentationKey+"/appId",l=s.pendingLookups[a];l&&(s.pendingLookups[a]=l.filter(function(p){return p!=n}),s.pendingLookups[a].length==0&&delete s.pendingLookups[a])},s.generateRequestId=function(i){if(i){i=i[0]=="|"?i:"|"+i,i[i.length-1]!=="."&&(i+=".");var n=(s.currentRootId++).toString(16);return s.appendSuffix(i,n,"_")}else return s.generateRootId()},s.getRootId=function(i){var n=i.indexOf(".");n<0&&(n=i.length);var a=i[0]==="|"?1:0;return i.substring(a,n)},s.generateRootId=function(){return"|"+t.w3cTraceId()+"."},s.appendSuffix=function(i,n,a){if(i.length+n.length<s.requestIdMaxLength)return i+n+a;var l=s.requestIdMaxLength-9;if(i.length>l)for(;l>1;--l){var p=i[l-1];if(p==="."||p==="_")break}if(l<=1)return s.generateRootId();for(n=t.randomu32().toString(16);n.length<8;)n="0"+n;return i.substring(0,l)+n+"#"},s.TAG="CorrelationIdManager",s.correlationIdPrefix="cid-v1:",s.w3cEnabled=!0,s.pendingLookups={},s.completedLookups={},s.requestIdMaxLength=1024,s.currentRootId=t.randomu32(),s}();r.exports=c}),Tr=C((e,r)=>{"use strict";var t=et(),o=Kt(),c=function(){function s(i,n){if(this.traceFlag=s.DEFAULT_TRACE_FLAG,this.version=s.DEFAULT_VERSION,i&&typeof i=="string")if(i.split(",").length>1)this.traceId=t.w3cTraceId(),this.spanId=t.w3cTraceId().substr(0,16);else{var a=i.trim().split("-"),l=a.length;l>=4?(this.version=a[0],this.traceId=a[1],this.spanId=a[2],this.traceFlag=a[3]):(this.traceId=t.w3cTraceId(),this.spanId=t.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=s.DEFAULT_VERSION,this.traceId=t.w3cTraceId()),this.version==="00"&&l!==4&&(this.traceId=t.w3cTraceId(),this.spanId=t.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=s.DEFAULT_VERSION,this.traceId=t.w3cTraceId(),this.spanId=t.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=s.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=s.DEFAULT_TRACE_FLAG,this.traceId=t.w3cTraceId()),s.isValidTraceId(this.traceId)||(this.traceId=t.w3cTraceId()),s.isValidSpanId(this.spanId)||(this.spanId=t.w3cTraceId().substr(0,16),this.traceId=t.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(n){this.parentId=n.slice();var p=o.getRootId(n);s.isValidTraceId(p)||(this.legacyRootId=p,p=t.w3cTraceId()),n.indexOf("|")!==-1&&(n=n.substring(1+n.substring(0,n.length-1).lastIndexOf("."),n.length-1)),this.traceId=p,this.spanId=n}else this.traceId=t.w3cTraceId(),this.spanId=t.w3cTraceId().substr(0,16)}return s.isValidTraceId=function(i){return i.match(/^[0-9a-f]{32}$/)&&i!=="00000000000000000000000000000000"},s.isValidSpanId=function(i){return i.match(/^[0-9a-f]{16}$/)&&i!=="0000000000000000"},s.formatOpenTelemetryTraceFlags=function(i){var n="0"+i.toString(16);return n.substring(n.length-2)},s.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},s.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},s.prototype.updateSpanId=function(){this.spanId=t.w3cTraceId().substr(0,16)},s.DEFAULT_TRACE_FLAG="01",s.DEFAULT_VERSION="00",s}();r.exports=c}),co=C((e,r)=>{"use strict";var t=function(){function o(c){this.fieldmap=[],!!c&&(this.fieldmap=this.parseHeader(c))}return o.prototype.toString=function(){var c=this.fieldmap;return!c||c.length==0?null:c.join(", ")},o.validateKeyChars=function(c){var s=c.split("@");if(s.length==2){var i=s[0].trim(),n=s[1].trim(),a=Boolean(i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),l=Boolean(n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return a&&l}else if(s.length==1)return Boolean(c.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},o.prototype.parseHeader=function(c){var s=[],i={},n=c.split(",");if(n.length>32)return null;for(var a=0,l=n;a<l.length;a++){var p=l[a],u=p.trim();if(u.length!==0){var f=u.split("=");if(f.length!==2||!o.validateKeyChars(f[0])||i[f[0]])return null;i[f[0]]=!0,s.push(u)}}return s},o.strict=!0,o}();r.exports=t}),_t=C((e,r)=>{"use strict";var t=function(){function o(){}return o}();r.exports=t}),cu=C((e,r)=>{"use strict";var t=e&&e.__extends||function(){var s=function(i,n){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(a[p]=l[p])},s(i,n)};return function(i,n){s(i,n);function a(){this.constructor=i}i.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=_t(),c=function(s){t(i,s);function i(){var n=s.call(this)||this;return n.ver=2,n.properties={},n.measurements={},n}return i}(o);r.exports=c}),uo=C((e,r)=>{"use strict";var t=function(){function o(){}return o}();r.exports=t}),uu=C((e,r)=>{"use strict";var t=function(){function o(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return o}();r.exports=t}),lu=C((e,r)=>{"use strict";var t=e&&e.__extends||function(){var s=function(i,n){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(a[p]=l[p])},s(i,n)};return function(i,n){s(i,n);function a(){this.constructor=i}i.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=uo(),c=function(s){t(i,s);function i(){return s.call(this)||this}return i}(o);r.exports=c}),lo=C((e,r)=>{"use strict";var t;(function(o){o[o.Measurement=0]="Measurement",o[o.Aggregation=1]="Aggregation"})(t||(t={})),r.exports=t}),pu=C((e,r)=>{"use strict";var t=lo(),o=function(){function c(){this.kind=t.Measurement}return c}();r.exports=o}),du=C((e,r)=>{"use strict";var t=function(){function o(){this.ver=1,this.sampleRate=100,this.tags={}}return o}();r.exports=t}),po=C((e,r)=>{"use strict";var t=e&&e.__extends||function(){var s=function(i,n){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(a[p]=l[p])},s(i,n)};return function(i,n){s(i,n);function a(){this.constructor=i}i.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=_t(),c=function(s){t(i,s);function i(){var n=s.call(this)||this;return n.ver=2,n.properties={},n.measurements={},n}return i}(o);r.exports=c}),fu=C((e,r)=>{"use strict";var t=e&&e.__extends||function(){var s=function(i,n){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(a[p]=l[p])},s(i,n)};return function(i,n){s(i,n);function a(){this.constructor=i}i.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=_t(),c=function(s){t(i,s);function i(){var n=s.call(this)||this;return n.ver=2,n.exceptions=[],n.properties={},n.measurements={},n}return i}(o);r.exports=c}),hu=C((e,r)=>{"use strict";var t=function(){function o(){this.hasFullStack=!0,this.parsedStack=[]}return o}();r.exports=t}),vu=C((e,r)=>{"use strict";var t=e&&e.__extends||function(){var s=function(i,n){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(a[p]=l[p])},s(i,n)};return function(i,n){s(i,n);function a(){this.constructor=i}i.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=_t(),c=function(s){t(i,s);function i(){var n=s.call(this)||this;return n.ver=2,n.properties={},n}return i}(o);r.exports=c}),mu=C((e,r)=>{"use strict";var t=e&&e.__extends||function(){var s=function(i,n){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(a[p]=l[p])},s(i,n)};return function(i,n){s(i,n);function a(){this.constructor=i}i.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=_t(),c=function(s){t(i,s);function i(){var n=s.call(this)||this;return n.ver=2,n.metrics=[],n.properties={},n}return i}(o);r.exports=c}),_u=C((e,r)=>{"use strict";var t=e&&e.__extends||function(){var s=function(i,n){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(a[p]=l[p])},s(i,n)};return function(i,n){s(i,n);function a(){this.constructor=i}i.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=po(),c=function(s){t(i,s);function i(){var n=s.call(this)||this;return n.ver=2,n.properties={},n.measurements={},n}return i}(o);r.exports=c}),gu=C((e,r)=>{"use strict";var t=e&&e.__extends||function(){var s=function(i,n){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(a[p]=l[p])},s(i,n)};return function(i,n){s(i,n);function a(){this.constructor=i}i.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=_t(),c=function(s){t(i,s);function i(){var n=s.call(this)||this;return n.ver=2,n.success=!0,n.properties={},n.measurements={},n}return i}(o);r.exports=c}),yu=C((e,r)=>{"use strict";var t=e&&e.__extends||function(){var s=function(i,n){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(a[p]=l[p])},s(i,n)};return function(i,n){s(i,n);function a(){this.constructor=i}i.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=_t(),c=function(s){t(i,s);function i(){var n=s.call(this)||this;return n.ver=2,n.properties={},n.measurements={},n}return i}(o);r.exports=c}),Eu=C((e,r)=>{"use strict";var t;(function(o){o[o.Verbose=0]="Verbose",o[o.Information=1]="Information",o[o.Warning=2]="Warning",o[o.Error=3]="Error",o[o.Critical=4]="Critical"})(t||(t={})),r.exports=t}),bu=C((e,r)=>{"use strict";var t=function(){function o(){}return o}();r.exports=t}),fo=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AvailabilityData=cu(),e.Base=uo(),e.ContextTagKeys=uu(),e.Data=lu(),e.DataPoint=pu(),e.DataPointType=lo(),e.Domain=_t(),e.Envelope=du(),e.EventData=po(),e.ExceptionData=fu(),e.ExceptionDetails=hu(),e.MessageData=vu(),e.MetricData=mu(),e.PageViewData=_u(),e.RemoteDependencyData=gu(),e.RequestData=yu(),e.SeverityLevel=Eu(),e.StackFrame=bu()}),Tu=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.domainSupportsProperties=e.RemoteDependencyDataConstants=void 0;var r=fo(),t=function(){function c(){}return c.TYPE_HTTP="Http",c.TYPE_AI="Http (tracked component)",c}();e.RemoteDependencyDataConstants=t;function o(c){return"properties"in c||c instanceof r.EventData||c instanceof r.ExceptionData||c instanceof r.MessageData||c instanceof r.MetricData||c instanceof r.PageViewData||c instanceof r.RemoteDependencyData||c instanceof r.RequestData}e.domainSupportsProperties=o}),Su=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Au=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Iu=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Cu=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),wu=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ou=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Pu=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ru=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),xu=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Du=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Nu=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Mu=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),ku=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryType=e.TelemetryTypeString=e.baseTypeToTelemetryType=e.telemetryTypeToBaseType=void 0;function r(c){switch(c){case o.Event:return"EventData";case o.Exception:return"ExceptionData";case o.Trace:return"MessageData";case o.Metric:return"MetricData";case o.Request:return"RequestData";case o.Dependency:return"RemoteDependencyData";case o.Availability:return"AvailabilityData";case o.PageView:return"PageViewData"}}e.telemetryTypeToBaseType=r;function t(c){switch(c){case"EventData":return o.Event;case"ExceptionData":return o.Exception;case"MessageData":return o.Trace;case"MetricData":return o.Metric;case"RequestData":return o.Request;case"RemoteDependencyData":return o.Dependency;case"AvailabilityData":return o.Availability;case"PageViewData":return o.PageView}}e.baseTypeToTelemetryType=t,e.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var o;(function(c){c[c.Event=0]="Event",c[c.Exception=1]="Exception",c[c.Trace=2]="Trace",c[c.Metric=3]="Metric",c[c.Request=4]="Request",c[c.Dependency=5]="Dependency",c[c.Availability=6]="Availability",c[c.PageView=7]="PageView"})(o=e.TelemetryType||(e.TelemetryType={}))}),Lu=C(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(o,c,s,i){i===void 0&&(i=s),Object.defineProperty(o,i,{enumerable:!0,get:function(){return c[s]}})}:function(o,c,s,i){i===void 0&&(i=s),o[i]=c[s]}),t=e&&e.__exportStar||function(o,c){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&r(c,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),t(Su(),e),t(Au(),e),t(Iu(),e),t(Cu(),e),t(wu(),e),t(Ou(),e),t(Pu(),e),t(Ru(),e),t(xu(),e),t(Du(),e),t(Nu(),e),t(Mu(),e),t(ku(),e)}),ju=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Uu=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),qu=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Hu=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Bu=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Fu=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Vu=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Gu=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),$u=C(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(o,c,s,i){i===void 0&&(i=s),Object.defineProperty(o,i,{enumerable:!0,get:function(){return c[s]}})}:function(o,c,s,i){i===void 0&&(i=s),o[i]=c[s]}),t=e&&e.__exportStar||function(o,c){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&r(c,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),t(ju(),e),t(Uu(),e),t(qu(),e),t(Hu(),e),t(Bu(),e),t(Fu(),e),t(Vu(),e),t(Gu(),e)}),Ge=C(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(o,c,s,i){i===void 0&&(i=s),Object.defineProperty(o,i,{enumerable:!0,get:function(){return c[s]}})}:function(o,c,s,i){i===void 0&&(i=s),o[i]=c[s]}),t=e&&e.__exportStar||function(o,c){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&r(c,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),t(Tu(),e),t(fo(),e),t(Lu(),e),t($u(),e)}),ho=C((e,r)=>{"use strict";var t=function(){function o(){}return o.prototype.getUrl=function(){return this.url},o.prototype.RequestParser=function(){this.startTime=+new Date},o.prototype._setStatus=function(c,s){var i=+new Date;this.duration=i-this.startTime,this.statusCode=c;var n=this.properties||{};if(s){if(typeof s=="string")n.error=s;else if(s instanceof Error)n.error=s.message;else if(typeof s=="object")for(var a in s)n[a]=s[a]&&s[a].toString&&s[a].toString()}this.properties=n},o.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},o}();r.exports=t}),vo=C((e,r)=>{"use strict";var t=e&&e.__extends||function(){var f=function(h,v){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(m[y]=g[y])},f(h,v)};return function(h,v){f(h,v);function m(){this.constructor=h}h.prototype=v===null?Object.create(v):(m.prototype=v.prototype,new m)}}(),o=require("url"),c=Ge(),s=et(),i=cr(),n=ho(),a=Kt(),l=co(),p=Tr(),u=function(f){t(h,f);function h(v,m){var g=f.call(this)||this;return v&&(g.method=v.method,g.url=g._getAbsoluteUrl(v),g.startTime=+new Date,g.socketRemoteAddress=v.socket&&v.socket.remoteAddress,g.parseHeaders(v,m),v.connection&&(g.connectionRemoteAddress=v.connection.remoteAddress,g.legacySocketRemoteAddress=v.connection.socket&&v.connection.socket.remoteAddress)),g}return h.prototype.onError=function(v,m){this._setStatus(void 0,v),m&&(this.duration=m)},h.prototype.onResponse=function(v,m){this._setStatus(v.statusCode,void 0),m&&(this.duration=m)},h.prototype.getRequestTelemetry=function(v){var m={id:this.requestId,name:this.method+" "+o.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(v&&v.time?m.time=v.time:this.startTime&&(m.time=new Date(this.startTime)),v){for(var g in v)m[g]||(m[g]=v[g]);if(v.properties)for(var g in v.properties)m.properties[g]=v.properties[g]}return m},h.prototype.getRequestTags=function(v){var m={};for(var g in v)m[g]=v[g];return m[h.keys.locationIp]=v[h.keys.locationIp]||this._getIp(),m[h.keys.sessionId]=v[h.keys.sessionId]||this._getId("ai_session"),m[h.keys.userId]=v[h.keys.userId]||this._getId("ai_user"),m[h.keys.userAuthUserId]=v[h.keys.userAuthUserId]||this._getId("ai_authUser"),m[h.keys.operationName]=this.getOperationName(v),m[h.keys.operationParentId]=this.getOperationParentId(v),m[h.keys.operationId]=this.getOperationId(v),m},h.prototype.getOperationId=function(v){return v[h.keys.operationId]||this.operationId},h.prototype.getOperationParentId=function(v){return v[h.keys.operationParentId]||this.parentId||this.getOperationId(v)},h.prototype.getOperationName=function(v){return v[h.keys.operationName]||this.method+" "+o.parse(this.url).pathname},h.prototype.getRequestId=function(){return this.requestId},h.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},h.prototype.getTraceparent=function(){return this.traceparent},h.prototype.getTracestate=function(){return this.tracestate},h.prototype.getLegacyRootId=function(){return this.legacyRootId},h.prototype._getAbsoluteUrl=function(v){if(!v.headers)return v.url;var m=v.connection?v.connection.encrypted:null,g=o.parse(v.url),y=g.pathname,b=g.search,S=m||v.headers["x-forwarded-proto"]=="https"?"https":"http",T=o.format({protocol:S,host:v.headers.host,pathname:y,search:b});return T},h.prototype._getIp=function(){var v=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,m=function(y){var b=v.exec(y);if(b)return b[0]},g=m(this.rawHeaders["x-forwarded-for"])||m(this.rawHeaders["x-client-ip"])||m(this.rawHeaders["x-real-ip"])||m(this.connectionRemoteAddress)||m(this.socketRemoteAddress)||m(this.legacySocketRemoteAddress);return!g&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(g="127.0.0.1"),g},h.prototype._getId=function(v){var m=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",g=h.parseId(s.getCookie(v,m));return g},h.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},h.prototype.parseHeaders=function(v,m){if(this.rawHeaders=v.headers||v.rawHeaders,this.userAgent=v.headers&&v.headers["user-agent"],this.sourceCorrelationId=s.getCorrelationContextTarget(v,i.requestContextSourceKey),v.headers){var g=v.headers[i.traceStateHeader]?v.headers[i.traceStateHeader].toString():null,y=v.headers[i.traceparentHeader]?v.headers[i.traceparentHeader].toString():null,b=v.headers[i.requestIdHeader]?v.headers[i.requestIdHeader].toString():null,S=v.headers[i.parentIdHeader]?v.headers[i.parentIdHeader].toString():null,T=v.headers[i.rootIdHeader]?v.headers[i.rootIdHeader].toString():null;this.correlationContextHeader=v.headers[i.correlationContextHeader]?v.headers[i.correlationContextHeader].toString():null,a.w3cEnabled&&(y||g)?(this.traceparent=new p(y?y.toString():null),this.tracestate=y&&g&&new l(g?g.toString():null),this.setBackCompatFromThisTraceContext()):b?a.w3cEnabled?(this.traceparent=new p(null,b),this.setBackCompatFromThisTraceContext()):(this.parentId=b,this.requestId=a.generateRequestId(this.parentId),this.operationId=a.getRootId(this.requestId)):a.w3cEnabled?(this.traceparent=new p,this.traceparent.parentId=S,this.traceparent.legacyRootId=T||S,this.setBackCompatFromThisTraceContext()):(this.parentId=S,this.requestId=a.generateRequestId(T||this.parentId),this.correlationContextHeader=null,this.operationId=a.getRootId(this.requestId)),m&&(this.requestId=m,this.operationId=a.getRootId(this.requestId))}},h.parseId=function(v){var m=v.split("|");return m.length>0?m[0]:""},h.keys=new c.ContextTagKeys,h}(n);r.exports=u}),zu=C((e,r)=>{e=r.exports=j;var t;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?t=function(){var d=Array.prototype.slice.call(arguments,0);d.unshift("SEMVER"),console.log.apply(console,d)}:t=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var o=256,c=Number.MAX_SAFE_INTEGER||9007199254740991,s=16,i=e.re=[],n=e.src=[],a=0,l=a++;n[l]="0|[1-9]\\d*";var p=a++;n[p]="[0-9]+";var u=a++;n[u]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=a++;n[f]="("+n[l]+")\\.("+n[l]+")\\.("+n[l]+")";var h=a++;n[h]="("+n[p]+")\\.("+n[p]+")\\.("+n[p]+")";var v=a++;n[v]="(?:"+n[l]+"|"+n[u]+")";var m=a++;n[m]="(?:"+n[p]+"|"+n[u]+")";var g=a++;n[g]="(?:-("+n[v]+"(?:\\."+n[v]+")*))";var y=a++;n[y]="(?:-?("+n[m]+"(?:\\."+n[m]+")*))";var b=a++;n[b]="[0-9A-Za-z-]+";var S=a++;n[S]="(?:\\+("+n[b]+"(?:\\."+n[b]+")*))";var T=a++,O="v?"+n[f]+n[g]+"?"+n[S]+"?";n[T]="^"+O+"$";var D="[v=\\s]*"+n[h]+n[y]+"?"+n[S]+"?",M=a++;n[M]="^"+D+"$";var N=a++;n[N]="((?:<|>)?=?)";var L=a++;n[L]=n[p]+"|x|X|\\*";var B=a++;n[B]=n[l]+"|x|X|\\*";var F=a++;n[F]="[v=\\s]*("+n[B]+")(?:\\.("+n[B]+")(?:\\.("+n[B]+")(?:"+n[g]+")?"+n[S]+"?)?)?";var z=a++;n[z]="[v=\\s]*("+n[L]+")(?:\\.("+n[L]+")(?:\\.("+n[L]+")(?:"+n[y]+")?"+n[S]+"?)?)?";var ie=a++;n[ie]="^"+n[N]+"\\s*"+n[F]+"$";var ee=a++;n[ee]="^"+n[N]+"\\s*"+n[z]+"$";var ge=a++;n[ge]="(?:^|[^\\d])(\\d{1,"+s+"})(?:\\.(\\d{1,"+s+"}))?(?:\\.(\\d{1,"+s+"}))?(?:$|[^\\d])";var re=a++;n[re]="(?:~>?)";var H=a++;n[H]="(\\s*)"+n[re]+"\\s+",i[H]=new RegExp(n[H],"g");var G="$1~",V=a++;n[V]="^"+n[re]+n[F]+"$";var W=a++;n[W]="^"+n[re]+n[z]+"$";var X=a++;n[X]="(?:\\^)";var ne=a++;n[ne]="(\\s*)"+n[X]+"\\s+",i[ne]=new RegExp(n[ne],"g");var Y="$1^",he=a++;n[he]="^"+n[X]+n[F]+"$";var Se=a++;n[Se]="^"+n[X]+n[z]+"$";var _e=a++;n[_e]="^"+n[N]+"\\s*("+D+")$|^$";var ve=a++;n[ve]="^"+n[N]+"\\s*("+O+")$|^$";var ce=a++;n[ce]="(\\s*)"+n[N]+"\\s*("+D+"|"+n[F]+")",i[ce]=new RegExp(n[ce],"g");var xe="$1$2$3",ke=a++;n[ke]="^\\s*("+n[F]+")\\s+-\\s+("+n[F]+")\\s*$";var Z=a++;n[Z]="^\\s*("+n[z]+")\\s+-\\s+("+n[z]+")\\s*$";var Q=a++;for(n[Q]="(<|>)?=?\\s*\\*",te=0;te<a;te++)t(te,n[te]),i[te]||(i[te]=new RegExp(n[te]));var te;e.parse=fe;function fe(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof j)return d;if(typeof d!="string"||d.length>o)return null;var E=_.loose?i[M]:i[T];if(!E.test(d))return null;try{return new j(d,_)}catch{return null}}e.valid=It;function It(d,_){var E=fe(d,_);return E?E.version:null}e.clean=Ct;function Ct(d,_){var E=fe(d.trim().replace(/^[=v]+/,""),_);return E?E.version:null}e.SemVer=j;function j(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof j){if(d.loose===_.loose)return d;d=d.version}else if(typeof d!="string")throw new TypeError("Invalid Version: "+d);if(d.length>o)throw new TypeError("version is longer than "+o+" characters");if(!(this instanceof j))return new j(d,_);t("SemVer",d,_),this.options=_,this.loose=!!_.loose;var E=d.trim().match(_.loose?i[M]:i[T]);if(!E)throw new TypeError("Invalid Version: "+d);if(this.raw=d,this.major=+E[1],this.minor=+E[2],this.patch=+E[3],this.major>c||this.major<0)throw new TypeError("Invalid major version");if(this.minor>c||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>c||this.patch<0)throw new TypeError("Invalid patch version");E[4]?this.prerelease=E[4].split(".").map(function(I){if(/^[0-9]+$/.test(I)){var w=+I;if(w>=0&&w<c)return w}return I}):this.prerelease=[],this.build=E[5]?E[5].split("."):[],this.format()}j.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},j.prototype.toString=function(){return this.version},j.prototype.compare=function(d){return t("SemVer.compare",this.version,this.options,d),d instanceof j||(d=new j(d,this.options)),this.compareMain(d)||this.comparePre(d)},j.prototype.compareMain=function(d){return d instanceof j||(d=new j(d,this.options)),Ae(this.major,d.major)||Ae(this.minor,d.minor)||Ae(this.patch,d.patch)},j.prototype.comparePre=function(d){if(d instanceof j||(d=new j(d,this.options)),this.prerelease.length&&!d.prerelease.length)return-1;if(!this.prerelease.length&&d.prerelease.length)return 1;if(!this.prerelease.length&&!d.prerelease.length)return 0;var _=0;do{var E=this.prerelease[_],I=d.prerelease[_];if(t("prerelease compare",_,E,I),E===void 0&&I===void 0)return 0;if(I===void 0)return 1;if(E===void 0)return-1;if(E!==I)return Ae(E,I)}while(++_)},j.prototype.inc=function(d,_){switch(d){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",_);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",_);break;case"prepatch":this.prerelease.length=0,this.inc("patch",_),this.inc("pre",_);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",_),this.inc("pre",_);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var E=this.prerelease.length;--E>=0;)typeof this.prerelease[E]=="number"&&(this.prerelease[E]++,E=-2);E===-1&&this.prerelease.push(0)}_&&(this.prerelease[0]===_?isNaN(this.prerelease[1])&&(this.prerelease=[_,0]):this.prerelease=[_,0]);break;default:throw new Error("invalid increment argument: "+d)}return this.format(),this.raw=this.version,this},e.inc=wt;function wt(d,_,E,I){typeof E=="string"&&(I=E,E=void 0);try{return new j(d,E).inc(_,I).version}catch{return null}}e.diff=Ot;function Ot(d,_){if(Ve(d,_))return null;var E=fe(d),I=fe(_),w="";if(E.prerelease.length||I.prerelease.length){w="pre";var P="prerelease"}for(var x in E)if((x==="major"||x==="minor"||x==="patch")&&E[x]!==I[x])return w+x;return P}e.compareIdentifiers=Ae;var $e=/^[0-9]+$/;function Ae(d,_){var E=$e.test(d),I=$e.test(_);return E&&I&&(d=+d,_=+_),d===_?0:E&&!I?-1:I&&!E?1:d<_?-1:1}e.rcompareIdentifiers=ot;function ot(d,_){return Ae(_,d)}e.major=Be;function Be(d,_){return new j(d,_).major}e.minor=pt;function pt(d,_){return new j(d,_).minor}e.patch=dt;function dt(d,_){return new j(d,_).patch}e.compare=me;function me(d,_,E){return new j(d,E).compare(new j(_,E))}e.compareLoose=Pt;function Pt(d,_){return me(d,_,!0)}e.rcompare=st;function st(d,_,E){return me(_,d,E)}e.sort=ft;function ft(d,_){return d.sort(function(E,I){return e.compare(E,I,_)})}e.rsort=ht;function ht(d,_){return d.sort(function(E,I){return e.rcompare(E,I,_)})}e.gt=De;function De(d,_,E){return me(d,_,E)>0}e.lt=Ue;function Ue(d,_,E){return me(d,_,E)<0}e.eq=Ve;function Ve(d,_,E){return me(d,_,E)===0}e.neq=at;function at(d,_,E){return me(d,_,E)!==0}e.gte=ze;function ze(d,_,E){return me(d,_,E)>=0}e.lte=Le;function Le(d,_,E){return me(d,_,E)<=0}e.cmp=je;function je(d,_,E,I){switch(_){case"===":return typeof d=="object"&&(d=d.version),typeof E=="object"&&(E=E.version),d===E;case"!==":return typeof d=="object"&&(d=d.version),typeof E=="object"&&(E=E.version),d!==E;case"":case"=":case"==":return Ve(d,E,I);case"!=":return at(d,E,I);case">":return De(d,E,I);case">=":return ze(d,E,I);case"<":return Ue(d,E,I);case"<=":return Le(d,E,I);default:throw new TypeError("Invalid operator: "+_)}}e.Comparator=ae;function ae(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof ae){if(d.loose===!!_.loose)return d;d=d.value}if(!(this instanceof ae))return new ae(d,_);t("comparator",d,_),this.options=_,this.loose=!!_.loose,this.parse(d),this.semver===Ne?this.value="":this.value=this.operator+this.semver.version,t("comp",this)}var Ne={};ae.prototype.parse=function(d){var _=this.options.loose?i[_e]:i[ve],E=d.match(_);if(!E)throw new TypeError("Invalid comparator: "+d);this.operator=E[1],this.operator==="="&&(this.operator=""),E[2]?this.semver=new j(E[2],this.options.loose):this.semver=Ne},ae.prototype.toString=function(){return this.value},ae.prototype.test=function(d){return t("Comparator.test",d,this.options.loose),this.semver===Ne?!0:(typeof d=="string"&&(d=new j(d,this.options)),je(d,this.operator,this.semver,this.options))},ae.prototype.intersects=function(d,_){if(!(d instanceof ae))throw new TypeError("a Comparator is required");(!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1});var E;if(this.operator==="")return E=new $(d.value,_),He(this.value,E,_);if(d.operator==="")return E=new $(this.value,_),He(d.semver,E,_);var I=(this.operator===">="||this.operator===">")&&(d.operator===">="||d.operator===">"),w=(this.operator==="<="||this.operator==="<")&&(d.operator==="<="||d.operator==="<"),P=this.semver.version===d.semver.version,x=(this.operator===">="||this.operator==="<=")&&(d.operator===">="||d.operator==="<="),q=je(this.semver,"<",d.semver,_)&&(this.operator===">="||this.operator===">")&&(d.operator==="<="||d.operator==="<"),U=je(this.semver,">",d.semver,_)&&(this.operator==="<="||this.operator==="<")&&(d.operator===">="||d.operator===">");return I||w||P&&x||q||U},e.Range=$;function $(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof $)return d.loose===!!_.loose&&d.includePrerelease===!!_.includePrerelease?d:new $(d.raw,_);if(d instanceof ae)return new $(d.value,_);if(!(this instanceof $))return new $(d,_);if(this.options=_,this.loose=!!_.loose,this.includePrerelease=!!_.includePrerelease,this.raw=d,this.set=d.split(/\s*\|\|\s*/).map(function(E){return this.parseRange(E.trim())},this).filter(function(E){return E.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+d);this.format()}$.prototype.format=function(){return this.range=this.set.map(function(d){return d.join(" ").trim()}).join("||").trim(),this.range},$.prototype.toString=function(){return this.range},$.prototype.parseRange=function(d){var _=this.options.loose;d=d.trim();var E=_?i[Z]:i[ke];d=d.replace(E,kt),t("hyphen replace",d),d=d.replace(i[ce],xe),t("comparator trim",d,i[ce]),d=d.replace(i[H],G),d=d.replace(i[ne],Y),d=d.split(/\s+/).join(" ");var I=_?i[_e]:i[ve],w=d.split(" ").map(function(P){return tt(P,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(w=w.filter(function(P){return!!P.match(I)})),w=w.map(function(P){return new ae(P,this.options)},this),w},$.prototype.intersects=function(d,_){if(!(d instanceof $))throw new TypeError("a Range is required");return this.set.some(function(E){return E.every(function(I){return d.set.some(function(w){return w.every(function(P){return I.intersects(P,_)})})})})},e.toComparators=vt;function vt(d,_){return new $(d,_).set.map(function(E){return E.map(function(I){return I.value}).join(" ").trim().split(" ")})}function tt(d,_){return t("comp",d,_),d=xt(d,_),t("caret",d),d=We(d,_),t("tildes",d),d=Nt(d,_),t("xrange",d),d=Fe(d,_),t("stars",d),d}function J(d){return!d||d.toLowerCase()==="x"||d==="*"}function We(d,_){return d.trim().split(/\s+/).map(function(E){return Rt(E,_)}).join(" ")}function Rt(d,_){var E=_.loose?i[W]:i[V];return d.replace(E,function(I,w,P,x,q){t("tilde",d,I,w,P,x,q);var U;return J(w)?U="":J(P)?U=">="+w+".0.0 <"+(+w+1)+".0.0":J(x)?U=">="+w+"."+P+".0 <"+w+"."+(+P+1)+".0":q?(t("replaceTilde pr",q),U=">="+w+"."+P+"."+x+"-"+q+" <"+w+"."+(+P+1)+".0"):U=">="+w+"."+P+"."+x+" <"+w+"."+(+P+1)+".0",t("tilde return",U),U})}function xt(d,_){return d.trim().split(/\s+/).map(function(E){return Dt(E,_)}).join(" ")}function Dt(d,_){t("caret",d,_);var E=_.loose?i[Se]:i[he];return d.replace(E,function(I,w,P,x,q){t("caret",d,I,w,P,x,q);var U;return J(w)?U="":J(P)?U=">="+w+".0.0 <"+(+w+1)+".0.0":J(x)?w==="0"?U=">="+w+"."+P+".0 <"+w+"."+(+P+1)+".0":U=">="+w+"."+P+".0 <"+(+w+1)+".0.0":q?(t("replaceCaret pr",q),w==="0"?P==="0"?U=">="+w+"."+P+"."+x+"-"+q+" <"+w+"."+P+"."+(+x+1):U=">="+w+"."+P+"."+x+"-"+q+" <"+w+"."+(+P+1)+".0":U=">="+w+"."+P+"."+x+"-"+q+" <"+(+w+1)+".0.0"):(t("no pr"),w==="0"?P==="0"?U=">="+w+"."+P+"."+x+" <"+w+"."+P+"."+(+x+1):U=">="+w+"."+P+"."+x+" <"+w+"."+(+P+1)+".0":U=">="+w+"."+P+"."+x+" <"+(+w+1)+".0.0"),t("caret return",U),U})}function Nt(d,_){return t("replaceXRanges",d,_),d.split(/\s+/).map(function(E){return Mt(E,_)}).join(" ")}function Mt(d,_){d=d.trim();var E=_.loose?i[ee]:i[ie];return d.replace(E,function(I,w,P,x,q,U){t("xRange",d,I,w,P,x,q,U);var pe=J(P),ue=pe||J(x),se=ue||J(q),oe=se;return w==="="&&oe&&(w=""),pe?w===">"||w==="<"?I="<0.0.0":I="*":w&&oe?(ue&&(x=0),q=0,w===">"?(w=">=",ue?(P=+P+1,x=0,q=0):(x=+x+1,q=0)):w==="<="&&(w="<",ue?P=+P+1:x=+x+1),I=w+P+"."+x+"."+q):ue?I=">="+P+".0.0 <"+(+P+1)+".0.0":se&&(I=">="+P+"."+x+".0 <"+P+"."+(+x+1)+".0"),t("xRange return",I),I})}function Fe(d,_){return t("replaceStars",d,_),d.trim().replace(i[Q],"")}function kt(d,_,E,I,w,P,x,q,U,pe,ue,se,oe){return J(E)?_="":J(I)?_=">="+E+".0.0":J(w)?_=">="+E+"."+I+".0":_=">="+_,J(U)?q="":J(pe)?q="<"+(+U+1)+".0.0":J(ue)?q="<"+U+"."+(+pe+1)+".0":se?q="<="+U+"."+pe+"."+ue+"-"+se:q="<="+q,(_+" "+q).trim()}$.prototype.test=function(d){if(!d)return!1;typeof d=="string"&&(d=new j(d,this.options));for(var _=0;_<this.set.length;_++)if(Lt(this.set[_],d,this.options))return!0;return!1};function Lt(d,_,E){for(var I=0;I<d.length;I++)if(!d[I].test(_))return!1;if(_.prerelease.length&&!E.includePrerelease){for(I=0;I<d.length;I++)if(t(d[I].semver),d[I].semver!==Ne&&d[I].semver.prerelease.length>0){var w=d[I].semver;if(w.major===_.major&&w.minor===_.minor&&w.patch===_.patch)return!0}return!1}return!0}e.satisfies=He;function He(d,_,E){try{_=new $(_,E)}catch{return!1}return _.test(d)}e.maxSatisfying=jt;function jt(d,_,E){var I=null,w=null;try{var P=new $(_,E)}catch{return null}return d.forEach(function(x){P.test(x)&&(!I||w.compare(x)===-1)&&(I=x,w=new j(I,E))}),I}e.minSatisfying=Ut;function Ut(d,_,E){var I=null,w=null;try{var P=new $(_,E)}catch{return null}return d.forEach(function(x){P.test(x)&&(!I||w.compare(x)===1)&&(I=x,w=new j(I,E))}),I}e.minVersion=Xe;function Xe(d,_){d=new $(d,_);var E=new j("0.0.0");if(d.test(E)||(E=new j("0.0.0-0"),d.test(E)))return E;E=null;for(var I=0;I<d.set.length;++I){var w=d.set[I];w.forEach(function(P){var x=new j(P.semver.version);switch(P.operator){case">":x.prerelease.length===0?x.patch++:x.prerelease.push(0),x.raw=x.format();case"":case">=":(!E||De(E,x))&&(E=x);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+P.operator)}})}return E&&d.test(E)?E:null}e.validRange=qt;function qt(d,_){try{return new $(d,_).range||"*"}catch{return null}}e.ltr=Ht;function Ht(d,_,E){return Ke(d,_,"<",E)}e.gtr=Bt;function Bt(d,_,E){return Ke(d,_,">",E)}e.outside=Ke;function Ke(d,_,E,I){d=new j(d,I),_=new $(_,I);var w,P,x,q,U;switch(E){case">":w=De,P=Le,x=Ue,q=">",U=">=";break;case"<":w=Ue,P=ze,x=De,q="<",U="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(He(d,_,I))return!1;for(var pe=0;pe<_.set.length;++pe){var ue=_.set[pe],se=null,oe=null;if(ue.forEach(function(ye){ye.semver===Ne&&(ye=new ae(">=0.0.0")),se=se||ye,oe=oe||ye,w(ye.semver,se.semver,I)?se=ye:x(ye.semver,oe.semver,I)&&(oe=ye)}),se.operator===q||se.operator===U||(!oe.operator||oe.operator===q)&&P(d,oe.semver)||oe.operator===U&&x(d,oe.semver))return!1}return!0}e.prerelease=Ft;function Ft(d,_){var E=fe(d,_);return E&&E.prerelease.length?E.prerelease:null}e.intersects=Ze;function Ze(d,_,E){return d=new $(d,E),_=new $(_,E),d.intersects(_)}e.coerce=Vt;function Vt(d){if(d instanceof j)return d;if(typeof d!="string")return null;var _=d.match(i[ge]);return _==null?null:fe(_[1]+"."+(_[2]||"0")+"."+(_[3]||"0"))}}),fn=C((e,r)=>{"use strict";function t(p){return typeof p=="function"}var o=console.error.bind(console);function c(p,u,f){var h=!!p[u]&&p.propertyIsEnumerable(u);Object.defineProperty(p,u,{configurable:!0,enumerable:h,writable:!0,value:f})}function s(p){p&&p.logger&&(t(p.logger)?o=p.logger:o("new logger isn't a function, not replacing"))}function i(p,u,f){if(!p||!p[u]){o("no original function "+u+" to wrap");return}if(!f){o("no wrapper function"),o(new Error().stack);return}if(!t(p[u])||!t(f)){o("original object and wrapper must be functions");return}var h=p[u],v=f(h,u);return c(v,"__original",h),c(v,"__unwrap",function(){p[u]===v&&c(p,u,h)}),c(v,"__wrapped",!0),c(p,u,v),v}function n(p,u,f){if(p)Array.isArray(p)||(p=[p]);else{o("must provide one or more modules to patch"),o(new Error().stack);return}if(!(u&&Array.isArray(u))){o("must provide one or more functions to wrap on modules");return}p.forEach(function(h){u.forEach(function(v){i(h,v,f)})})}function a(p,u){if(!p||!p[u]){o("no function to unwrap."),o(new Error().stack);return}if(!p[u].__unwrap)o("no original to unwrap to -- has "+u+" already been unwrapped?");else return p[u].__unwrap()}function l(p,u){if(p)Array.isArray(p)||(p=[p]);else{o("must provide one or more modules to patch"),o(new Error().stack);return}if(!(u&&Array.isArray(u))){o("must provide one or more functions to unwrap on modules");return}p.forEach(function(f){u.forEach(function(h){a(f,h)})})}s.wrap=i,s.massWrap=n,s.unwrap=a,s.massUnwrap=l,r.exports=s}),hn=C((e,r)=>{"use strict";var t=fn(),o=t.wrap,c=t.unwrap,s="wrap@before";function i(u,f,h){var v=!!u[f]&&u.propertyIsEnumerable(f);Object.defineProperty(u,f,{configurable:!0,enumerable:v,writable:!0,value:h})}function n(u,f){for(var h=f.length,v=0;v<h;v++){var m=f[v],g=u[s];if(typeof g=="function")g(m);else if(Array.isArray(g))for(var y=g.length,b=0;b<y;b++)g[b](m)}}function a(u,f){var h;return h=u._events&&u._events[f],Array.isArray(h)||(h?h=[h]:h=[]),h}function l(u,f,h){var v=a(u,f),m=v.filter(function(g){return h.indexOf(g)===-1});m.length>0&&n(u,m)}function p(u,f){if(u){var h=u;if(typeof u=="function")h=f(u);else if(Array.isArray(u)){h=[];for(var v=0;v<u.length;v++)h[v]=f(u[v])}return h}}r.exports=function(u,f,h){if(!u||!u.on||!u.addListener||!u.removeListener||!u.emit)throw new Error("can only wrap real EEs");if(!f)throw new Error("must have function to run on listener addition");if(!h)throw new Error("must have function to wrap listeners when emitting");function v(g){return function(y,b){var S=a(this,y).slice();try{var T=g.call(this,y,b);return l(this,y,S),T}finally{this.on.__wrapped||o(this,"on",v),this.addListener.__wrapped||o(this,"addListener",v)}}}function m(g){return function(y){if(!this._events||!this._events[y])return g.apply(this,arguments);var b=this._events[y];function S(T){return function(){this._events[y]=b;try{return T.apply(this,arguments)}finally{b=this._events[y],this._events[y]=p(b,h)}}}o(this,"removeListener",S);try{return this._events[y]=p(b,h),g.apply(this,arguments)}finally{c(this,"removeListener"),this._events[y]=b}}}u[s]?typeof u[s]=="function"?i(u,s,[u[s],f]):Array.isArray(u[s])&&u[s].push(f):i(u,s,f),u.__wrapped||(o(u,"addListener",v),o(u,"on",v),o(u,"emit",m),i(u,"__unwrap",function(){c(u,"addListener"),c(u,"on"),c(u,"emit"),delete u[s],delete u.__wrapped}),i(u,"__wrapped",!0))}}),Wu=C((e,r)=>{"use strict";var t=require("util"),o=require("assert"),c=hn(),s=require("async_hooks"),i="cls@contexts",n="error@context",a=process.env.DEBUG_CLS_HOOKED,l=-1;r.exports={getNamespace:u,createNamespace:f,destroyNamespace:h,reset:v,ERROR_SYMBOL:n};function p(g){this.name=g,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}p.prototype.set=function(g,y){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[g]=y,a){let b=" ".repeat(this._indent<0?0:this._indent);m(b+"CONTEXT-SET KEY:"+g+"="+y+" in ns:"+this.name+" currentUid:"+l+" active:"+t.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return y},p.prototype.get=function(g){if(!this.active){if(a){let y=s.currentId(),b=s.triggerAsyncId(),S=" ".repeat(this._indent<0?0:this._indent);m(`${S}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${g}=undefined currentUid:${l} asyncHooksCurrentId:${y} triggerId:${b} len:${this._set.length}`)}return}if(a){let y=s.executionAsyncId(),b=s.triggerAsyncId(),S=" ".repeat(this._indent<0?0:this._indent);m(S+"CONTEXT-GETTING KEY:"+g+"="+this.active[g]+" ("+this.name+") currentUid:"+l+" active:"+t.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),m(`${S}CONTEXT-GETTING KEY: (${this.name}) ${g}=${this.active[g]} currentUid:${l} asyncHooksCurrentId:${y} triggerId:${b} len:${this._set.length} active:${t.inspect(this.active)}`)}return this.active[g]},p.prototype.createContext=function(){let g=Object.create(this.active?this.active:Object.prototype);if(g._ns_name=this.name,g.id=l,a){let y=s.executionAsyncId(),b=s.triggerAsyncId(),S=" ".repeat(this._indent<0?0:this._indent);m(`${S}CONTEXT-CREATED Context: (${this.name}) currentUid:${l} asyncHooksCurrentId:${y} triggerId:${b} len:${this._set.length} context:${t.inspect(g,{showHidden:!0,depth:2,colors:!0})}`)}return g},p.prototype.run=function(g){let y=this.createContext();this.enter(y);try{if(a){let b=s.triggerAsyncId(),S=s.executionAsyncId(),T=" ".repeat(this._indent<0?0:this._indent);m(`${T}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${l} triggerId:${b} asyncHooksCurrentId:${S} len:${this._set.length} context:${t.inspect(y)}`)}return g(y),y}catch(b){throw b&&(b[n]=y),b}finally{if(a){let b=s.triggerAsyncId(),S=s.executionAsyncId(),T=" ".repeat(this._indent<0?0:this._indent);m(`${T}CONTEXT-RUN END: (${this.name}) currentUid:${l} triggerId:${b} asyncHooksCurrentId:${S} len:${this._set.length} ${t.inspect(y)}`)}this.exit(y)}},p.prototype.runAndReturn=function(g){let y;return this.run(function(b){y=g(b)}),y},p.prototype.runPromise=function(g){let y=this.createContext();this.enter(y);let b=g(y);if(!b||!b.then||!b.catch)throw new Error("fn must return a promise.");return a&&m("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+t.inspect(y)),b.then(S=>(a&&m("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+t.inspect(y)),this.exit(y),S)).catch(S=>{throw S[n]=y,a&&m("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+t.inspect(y)),this.exit(y),S})},p.prototype.bind=function(g,y){y||(this.active?y=this.active:y=this.createContext());let b=this;return function(){b.enter(y);try{return g.apply(this,arguments)}catch(S){throw S&&(S[n]=y),S}finally{b.exit(y)}}},p.prototype.enter=function(g){if(o.ok(g,"context must be provided for entering"),a){let y=s.executionAsyncId(),b=s.triggerAsyncId(),S=" ".repeat(this._indent<0?0:this._indent);m(`${S}CONTEXT-ENTER: (${this.name}) currentUid:${l} triggerId:${b} asyncHooksCurrentId:${y} len:${this._set.length} ${t.inspect(g)}`)}this._set.push(this.active),this.active=g},p.prototype.exit=function(g){if(o.ok(g,"context must be provided for exiting"),a){let b=s.executionAsyncId(),S=s.triggerAsyncId(),T=" ".repeat(this._indent<0?0:this._indent);m(`${T}CONTEXT-EXIT: (${this.name}) currentUid:${l} triggerId:${S} asyncHooksCurrentId:${b} len:${this._set.length} ${t.inspect(g)}`)}if(this.active===g){o.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let y=this._set.lastIndexOf(g);y<0?(a&&m("??ERROR?? context exiting but not entered - ignoring: "+t.inspect(g)),o.ok(y>=0,`context not currently entered; can't exit. 
`+t.inspect(this)+`
`+t.inspect(g))):(o.ok(y,"can't remove top context"),this._set.splice(y,1))},p.prototype.bindEmitter=function(g){o.ok(g.on&&g.addListener&&g.emit,"can only bind real EEs");let y=this,b="context@"+this.name;function S(O){!O||(O[i]||(O[i]=Object.create(null)),O[i][b]={namespace:y,context:y.active})}function T(O){if(!(O&&O[i]))return O;let D=O,M=O[i];return Object.keys(M).forEach(function(N){let L=M[N];D=L.namespace.bind(D,L.context)}),D}c(g,S,T)},p.prototype.fromException=function(g){return g[n]};function u(g){return process.namespaces[g]}function f(g){o.ok(g,"namespace must be given a name."),a&&m(`NS-CREATING NAMESPACE (${g})`);let y=new p(g);return y.id=l,s.createHook({init(b,S,T,O){if(l=s.executionAsyncId(),y.active){if(y._contexts.set(b,y.active),a){let D=" ".repeat(y._indent<0?0:y._indent);m(`${D}INIT [${S}] (${g}) asyncId:${b} currentUid:${l} triggerId:${T} active:${t.inspect(y.active,{showHidden:!0,depth:2,colors:!0})} resource:${O}`)}}else if(l===0){let D=s.triggerAsyncId(),M=y._contexts.get(D);if(M){if(y._contexts.set(b,M),a){let N=" ".repeat(y._indent<0?0:y._indent);m(`${N}INIT USING CONTEXT FROM TRIGGERID [${S}] (${g}) asyncId:${b} currentUid:${l} triggerId:${D} active:${t.inspect(y.active,{showHidden:!0,depth:2,colors:!0})} resource:${O}`)}}else if(a){let N=" ".repeat(y._indent<0?0:y._indent);m(`${N}INIT MISSING CONTEXT [${S}] (${g}) asyncId:${b} currentUid:${l} triggerId:${D} active:${t.inspect(y.active,{showHidden:!0,depth:2,colors:!0})} resource:${O}`)}}if(a&&S==="PROMISE"){m(t.inspect(O,{showHidden:!0}));let D=O.parentId,M=" ".repeat(y._indent<0?0:y._indent);m(`${M}INIT RESOURCE-PROMISE [${S}] (${g}) parentId:${D} asyncId:${b} currentUid:${l} triggerId:${T} active:${t.inspect(y.active,{showHidden:!0,depth:2,colors:!0})} resource:${O}`)}},before(b){l=s.executionAsyncId();let S;if(S=y._contexts.get(b)||y._contexts.get(l),S){if(a){let T=s.triggerAsyncId(),O=" ".repeat(y._indent<0?0:y._indent);m(`${O}BEFORE (${g}) asyncId:${b} currentUid:${l} triggerId:${T} active:${t.inspect(y.active,{showHidden:!0,depth:2,colors:!0})} context:${t.inspect(S)}`),y._indent+=2}y.enter(S)}else if(a){let T=s.triggerAsyncId(),O=" ".repeat(y._indent<0?0:y._indent);m(`${O}BEFORE MISSING CONTEXT (${g}) asyncId:${b} currentUid:${l} triggerId:${T} active:${t.inspect(y.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${t.inspect(y._contexts,{showHidden:!0,depth:2,colors:!0})}`),y._indent+=2}},after(b){l=s.executionAsyncId();let S;if(S=y._contexts.get(b)||y._contexts.get(l),S){if(a){let T=s.triggerAsyncId();y._indent-=2;let O=" ".repeat(y._indent<0?0:y._indent);m(`${O}AFTER (${g}) asyncId:${b} currentUid:${l} triggerId:${T} active:${t.inspect(y.active,{showHidden:!0,depth:2,colors:!0})} context:${t.inspect(S)}`)}y.exit(S)}else if(a){let T=s.triggerAsyncId();y._indent-=2;let O=" ".repeat(y._indent<0?0:y._indent);m(`${O}AFTER MISSING CONTEXT (${g}) asyncId:${b} currentUid:${l} triggerId:${T} active:${t.inspect(y.active,{showHidden:!0,depth:2,colors:!0})} context:${t.inspect(S)}`)}},destroy(b){if(l=s.executionAsyncId(),a){let S=s.triggerAsyncId(),T=" ".repeat(y._indent<0?0:y._indent);m(`${T}DESTROY (${g}) currentUid:${l} asyncId:${b} triggerId:${S} active:${t.inspect(y.active,{showHidden:!0,depth:2,colors:!0})} context:${t.inspect(y._contexts.get(l))}`)}y._contexts.delete(b)}}).enable(),process.namespaces[g]=y,y}function h(g){let y=u(g);o.ok(y,`can't delete nonexistent namespace! "`+g+'"'),o.ok(y.id,"don't assign to process.namespaces directly! "+t.inspect(y)),process.namespaces[g]=null}function v(){process.namespaces&&Object.keys(process.namespaces).forEach(function(g){h(g)}),process.namespaces=Object.create(null)}process.namespaces={};function m(...g){a&&process._rawDebug(`${t.format(...g)}`)}}),Ku=C((e,r)=>{"use strict";function t(){}r.exports=function(){let o=this._hooks,c=this._state,s=process.nextTick;process.nextTick=function(){if(!c.enabled)return s.apply(process,arguments);let i=new Array(arguments.length);for(let p=0;p<arguments.length;p++)i[p]=arguments[p];let n=i[0];if(typeof n!="function")throw new TypeError("callback is not a function");let a=new t,l=--c.counter;return o.init.call(a,l,0,null,null),i[0]=function(){o.pre.call(a,l);let p=!0;try{n.apply(this,arguments),p=!1}finally{p&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){o.post.call(a,l,!0),o.destroy.call(null,l)})}o.post.call(a,l,!1),o.destroy.call(null,l)},s.apply(process,i)}}}),Yu=C((e,r)=>{"use strict";function t(){}r.exports=function(){let o=this._hooks,c=this._state,s=global.Promise,i=s.prototype.then;s.prototype.then=p;function n(u,f,h,v){return typeof u!="function"?v?a(h):l(h):function(){o.pre.call(f,h);try{return u.apply(this,arguments)}finally{o.post.call(f,h,!1),o.destroy.call(null,h)}}}function a(u){return function(f){return o.destroy.call(null,u),f}}function l(u){return function(f){throw o.destroy.call(null,u),f}}function p(u,f){if(!c.enabled)return i.call(this,u,f);let h=new t,v=--c.counter;return o.init.call(h,v,0,null,null),i.call(this,n(u,h,v,!0),n(f,h,v,!1))}}}),Qu=C((e,r)=>{"use strict";var t=require("timers");function o(){}function c(){}function s(){}var i=new Map,n=new Map,a=new Map,l=null,p=!1;r.exports=function(){u(this._hooks,this._state,"setTimeout","clearTimeout",o,i,!0),u(this._hooks,this._state,"setInterval","clearInterval",c,n,!1),u(this._hooks,this._state,"setImmediate","clearImmediate",s,a,!0),global.setTimeout=t.setTimeout,global.setInterval=t.setInterval,global.setImmediate=t.setImmediate,global.clearTimeout=t.clearTimeout,global.clearInterval=t.clearInterval,global.clearImmediate=t.clearImmediate};function u(f,h,v,m,g,y,b){let S=t[v],T=t[m];t[v]=function(){if(!h.enabled)return S.apply(t,arguments);let O=new Array(arguments.length);for(let B=0;B<arguments.length;B++)O[B]=arguments[B];let D=O[0];if(typeof D!="function")throw new TypeError('"callback" argument must be a function');let M=new g,N=--h.counter,L;return f.init.call(M,N,0,null,null),O[0]=function(){l=L,f.pre.call(M,N);let B=!0;try{D.apply(this,arguments),B=!1}finally{B&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){f.post.call(M,N,!0),y.delete(L),f.destroy.call(null,N)})}f.post.call(M,N,!1),l=null,(b||p)&&(p=!1,y.delete(L),f.destroy.call(null,N))},L=S.apply(t,O),y.set(L,N),L},t[m]=function(O){if(l===O&&O!==null)p=!0;else if(y.has(O)){let D=y.get(O);y.delete(O),f.destroy.call(null,D)}T.apply(t,arguments)}}}),mo=C((e,r)=>{r.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}}),Xu=C((e,r)=>{"use strict";var t=process.binding("async_wrap"),o=t.Providers.TIMERWRAP,c={nextTick:Ku(),promise:Yu(),timers:Qu()},s=new Set;function i(){this.enabled=!1,this.counter=0}function n(){let p=this.initFns=[],u=this.preFns=[],f=this.postFns=[],h=this.destroyFns=[];this.init=function(v,m,g,y){if(m===o){s.add(v);return}for(let b of p)b(v,this,m,g,y)},this.pre=function(v){if(!s.has(v))for(let m of u)m(v,this)},this.post=function(v,m){if(!s.has(v))for(let g of f)g(v,this,m)},this.destroy=function(v){if(s.has(v)){s.delete(v);return}for(let m of h)m(v)}}n.prototype.add=function(p){p.init&&this.initFns.push(p.init),p.pre&&this.preFns.push(p.pre),p.post&&this.postFns.push(p.post),p.destroy&&this.destroyFns.push(p.destroy)};function a(p,u){let f=p.indexOf(u);f!==-1&&p.splice(f,1)}n.prototype.remove=function(p){p.init&&a(this.initFns,p.init),p.pre&&a(this.preFns,p.pre),p.post&&a(this.postFns,p.post),p.destroy&&a(this.destroyFns,p.destroy)};function l(){this._state=new i,this._hooks=new n,this.version=mo().version,this.providers=t.Providers;for(let p of Object.keys(c))c[p].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),t.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}r.exports=l,l.prototype.addHooks=function(p){this._hooks.add(p)},l.prototype.removeHooks=function(p){this._hooks.remove(p)},l.prototype.enable=function(){this._state.enabled=!0,t.enable()},l.prototype.disable=function(){this._state.enabled=!1,t.disable()}}),_o=C((e,r)=>{r.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}}),Zu=C((e,r)=>{function t(o){try{return Error.prototype.toString.call(o)}catch(c){try{return"<error: "+c+">"}catch{return"<error>"}}}r.exports=function(o,c){var s=[];s.push(t(o));for(var i=0;i<c.length;i++){var n=c[i],a;try{a=n.toString()}catch(l){try{a="<error: "+l+">"}catch{a="<error>"}}s.push("    at "+a)}return s.join(`
`)}}),Ju=C((e,r)=>{var t=Zu();function o(){this.extend=new i,this.filter=new i,this.format=new n,this.version=_o().version}var c=!1;o.prototype.callSite=function u(f){f||(f={}),c=!0;var h={};Error.captureStackTrace(h,u);var v=h.stack;return c=!1,v=v.slice(f.slice||0),f.extend&&(v=this.extend._modify(h,v)),f.filter&&(v=this.filter._modify(h,v)),v};var s=new o;function i(){this._modifiers=[]}i.prototype._modify=function(u,f){for(var h=0,v=this._modifiers.length;h<v;h++)f=this._modifiers[h](u,f);return f},i.prototype.attach=function(u){this._modifiers.push(u)},i.prototype.deattach=function(u){var f=this._modifiers.indexOf(u);return f===-1?!1:(this._modifiers.splice(f,1),!0)};function n(){this._formater=t,this._previous=void 0}n.prototype.replace=function(u){u?this._formater=u:this.restore()},n.prototype.restore=function(){this._formater=t,this._previous=void 0},n.prototype._backup=function(){this._previous=this._formater},n.prototype._roolback=function(){this._previous===t?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&s.format.replace(Error.prepareStackTrace);var a=!1;function l(u,f){if(c)return f;if(a)return t(u,f);var h=f.concat();h=s.extend._modify(u,h),h=s.filter._modify(u,h),h=h.slice(0,Error.stackTraceLimit),Object.isExtensible(u)&&Object.getOwnPropertyDescriptor(u,"callSite")===void 0&&(u.callSite={original:f,mutated:h}),a=!0;var v=s.format._formater(u,h);return a=!1,v}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return l},set:function(u){u===l?s.format._roolback():(s.format._backup(),s.format.replace(u))}});function p(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:p,set:function(u){Object.defineProperty(this,"callSite",{value:u,writable:!0,configurable:!0})},configurable:!0}),r.exports=s}),go=C((e,r)=>{if(global._stackChain)if(global._stackChain.version===_o().version)r.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else r.exports=global._stackChain=Ju()}),el=C((e,r)=>{"use strict";var t=Xu();if(global._asyncHook)if(global._asyncHook.version===mo().version)r.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else go().filter.attach(function(o,c){return c.filter(function(s){let i=s.getFileName();return!(i&&i.slice(0,__dirname.length)===__dirname)})}),r.exports=global._asyncHook=new t}),tl=C((e,r)=>{"use strict";var t=require("util"),o=require("assert"),c=hn(),s=el(),i="cls@contexts",n="error@context",a=[];for(let T in s.providers)a[s.providers[T]]=T;var l=process.env.DEBUG_CLS_HOOKED,p=-1;r.exports={getNamespace:f,createNamespace:h,destroyNamespace:v,reset:m,ERROR_SYMBOL:n};function u(T){this.name=T,this.active=null,this._set=[],this.id=null,this._contexts=new Map}u.prototype.set=function(T,O){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return l&&g("    SETTING KEY:"+T+"="+O+" in ns:"+this.name+" uid:"+p+" active:"+t.inspect(this.active,!0)),this.active[T]=O,O},u.prototype.get=function(T){if(!this.active){l&&g("    GETTING KEY:"+T+"=undefined "+this.name+" uid:"+p+" active:"+t.inspect(this.active,!0));return}return l&&g("    GETTING KEY:"+T+"="+this.active[T]+" "+this.name+" uid:"+p+" active:"+t.inspect(this.active,!0)),this.active[T]},u.prototype.createContext=function(){l&&g("   CREATING Context: "+this.name+" uid:"+p+" len:"+this._set.length+"  active:"+t.inspect(this.active,!0,2,!0));let T=Object.create(this.active?this.active:Object.prototype);return T._ns_name=this.name,T.id=p,l&&g("   CREATED Context: "+this.name+" uid:"+p+" len:"+this._set.length+"  context:"+t.inspect(T,!0,2,!0)),T},u.prototype.run=function(T){let O=this.createContext();this.enter(O);try{return l&&g(" BEFORE RUN: "+this.name+" uid:"+p+" len:"+this._set.length+" "+t.inspect(O)),T(O),O}catch(D){throw D&&(D[n]=O),D}finally{l&&g(" AFTER RUN: "+this.name+" uid:"+p+" len:"+this._set.length+" "+t.inspect(O)),this.exit(O)}},u.prototype.runAndReturn=function(T){var O;return this.run(function(D){O=T(D)}),O},u.prototype.runPromise=function(T){let O=this.createContext();this.enter(O);let D=T(O);if(!D||!D.then||!D.catch)throw new Error("fn must return a promise.");return l&&g(" BEFORE runPromise: "+this.name+" uid:"+p+" len:"+this._set.length+" "+t.inspect(O)),D.then(M=>(l&&g(" AFTER runPromise: "+this.name+" uid:"+p+" len:"+this._set.length+" "+t.inspect(O)),this.exit(O),M)).catch(M=>{throw M[n]=O,l&&g(" AFTER runPromise: "+this.name+" uid:"+p+" len:"+this._set.length+" "+t.inspect(O)),this.exit(O),M})},u.prototype.bind=function(T,O){O||(this.active?O=this.active:O=this.createContext());let D=this;return function(){D.enter(O);try{return T.apply(this,arguments)}catch(M){throw M&&(M[n]=O),M}finally{D.exit(O)}}},u.prototype.enter=function(T){o.ok(T,"context must be provided for entering"),l&&g("  ENTER "+this.name+" uid:"+p+" len:"+this._set.length+" context: "+t.inspect(T)),this._set.push(this.active),this.active=T},u.prototype.exit=function(T){if(o.ok(T,"context must be provided for exiting"),l&&g("  EXIT "+this.name+" uid:"+p+" len:"+this._set.length+" context: "+t.inspect(T)),this.active===T){o.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let O=this._set.lastIndexOf(T);O<0?(l&&g("??ERROR?? context exiting but not entered - ignoring: "+t.inspect(T)),o.ok(O>=0,`context not currently entered; can't exit. 
`+t.inspect(this)+`
`+t.inspect(T))):(o.ok(O,"can't remove top context"),this._set.splice(O,1))},u.prototype.bindEmitter=function(T){o.ok(T.on&&T.addListener&&T.emit,"can only bind real EEs");let O=this,D="context@"+this.name;function M(L){!L||(L[i]||(L[i]=Object.create(null)),L[i][D]={namespace:O,context:O.active})}function N(L){if(!(L&&L[i]))return L;let B=L,F=L[i];return Object.keys(F).forEach(function(z){let ie=F[z];B=ie.namespace.bind(B,ie.context)}),B}c(T,M,N)},u.prototype.fromException=function(T){return T[n]};function f(T){return process.namespaces[T]}function h(T){o.ok(T,"namespace must be given a name."),l&&g("CREATING NAMESPACE "+T);let O=new u(T);return O.id=p,s.addHooks({init(D,M,N,L,B){p=D,L?(O._contexts.set(D,O._contexts.get(L)),l&&g("PARENTID: "+T+" uid:"+D+" parent:"+L+" provider:"+N)):O._contexts.set(p,O.active),l&&g("INIT "+T+" uid:"+D+" parent:"+L+" provider:"+a[N]+" active:"+t.inspect(O.active,!0))},pre(D,M){p=D;let N=O._contexts.get(D);N?(l&&g(" PRE "+T+" uid:"+D+" handle:"+y(M)+" context:"+t.inspect(N)),O.enter(N)):l&&g(" PRE MISSING CONTEXT "+T+" uid:"+D+" handle:"+y(M))},post(D,M){p=D;let N=O._contexts.get(D);N?(l&&g(" POST "+T+" uid:"+D+" handle:"+y(M)+" context:"+t.inspect(N)),O.exit(N)):l&&g(" POST MISSING CONTEXT "+T+" uid:"+D+" handle:"+y(M))},destroy(D){p=D,l&&g("DESTROY "+T+" uid:"+D+" context:"+t.inspect(O._contexts.get(p))+" active:"+t.inspect(O.active,!0)),O._contexts.delete(D)}}),process.namespaces[T]=O,O}function v(T){let O=f(T);o.ok(O,`can't delete nonexistent namespace! "`+T+'"'),o.ok(O.id,"don't assign to process.namespaces directly! "+t.inspect(O)),process.namespaces[T]=null}function m(){process.namespaces&&Object.keys(process.namespaces).forEach(function(T){v(T)}),process.namespaces=Object.create(null)}process.namespaces={},s._state&&!s._state.enabled&&s.enable();function g(T){process.env.DEBUG&&process._rawDebug(T)}function y(T){if(!T)return T;if(typeof T=="function")return T.name?T.name:(T.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(T.constructor&&T.constructor.name)return T.constructor.name}if(l){b=go();for(S in b.filter._modifiers)b.filter.deattach(S)}var b,S}),rl=C((e,r)=>{"use strict";var t=zu();process&&t.gte(process.versions.node,"8.0.0")?r.exports=Wu():r.exports=tl()}),nl=C((e,r)=>{e=r.exports=j;var t;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?t=function(){var d=Array.prototype.slice.call(arguments,0);d.unshift("SEMVER"),console.log.apply(console,d)}:t=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var o=256,c=Number.MAX_SAFE_INTEGER||9007199254740991,s=16,i=e.re=[],n=e.src=[],a=0,l=a++;n[l]="0|[1-9]\\d*";var p=a++;n[p]="[0-9]+";var u=a++;n[u]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=a++;n[f]="("+n[l]+")\\.("+n[l]+")\\.("+n[l]+")";var h=a++;n[h]="("+n[p]+")\\.("+n[p]+")\\.("+n[p]+")";var v=a++;n[v]="(?:"+n[l]+"|"+n[u]+")";var m=a++;n[m]="(?:"+n[p]+"|"+n[u]+")";var g=a++;n[g]="(?:-("+n[v]+"(?:\\."+n[v]+")*))";var y=a++;n[y]="(?:-?("+n[m]+"(?:\\."+n[m]+")*))";var b=a++;n[b]="[0-9A-Za-z-]+";var S=a++;n[S]="(?:\\+("+n[b]+"(?:\\."+n[b]+")*))";var T=a++,O="v?"+n[f]+n[g]+"?"+n[S]+"?";n[T]="^"+O+"$";var D="[v=\\s]*"+n[h]+n[y]+"?"+n[S]+"?",M=a++;n[M]="^"+D+"$";var N=a++;n[N]="((?:<|>)?=?)";var L=a++;n[L]=n[p]+"|x|X|\\*";var B=a++;n[B]=n[l]+"|x|X|\\*";var F=a++;n[F]="[v=\\s]*("+n[B]+")(?:\\.("+n[B]+")(?:\\.("+n[B]+")(?:"+n[g]+")?"+n[S]+"?)?)?";var z=a++;n[z]="[v=\\s]*("+n[L]+")(?:\\.("+n[L]+")(?:\\.("+n[L]+")(?:"+n[y]+")?"+n[S]+"?)?)?";var ie=a++;n[ie]="^"+n[N]+"\\s*"+n[F]+"$";var ee=a++;n[ee]="^"+n[N]+"\\s*"+n[z]+"$";var ge=a++;n[ge]="(?:^|[^\\d])(\\d{1,"+s+"})(?:\\.(\\d{1,"+s+"}))?(?:\\.(\\d{1,"+s+"}))?(?:$|[^\\d])";var re=a++;n[re]="(?:~>?)";var H=a++;n[H]="(\\s*)"+n[re]+"\\s+",i[H]=new RegExp(n[H],"g");var G="$1~",V=a++;n[V]="^"+n[re]+n[F]+"$";var W=a++;n[W]="^"+n[re]+n[z]+"$";var X=a++;n[X]="(?:\\^)";var ne=a++;n[ne]="(\\s*)"+n[X]+"\\s+",i[ne]=new RegExp(n[ne],"g");var Y="$1^",he=a++;n[he]="^"+n[X]+n[F]+"$";var Se=a++;n[Se]="^"+n[X]+n[z]+"$";var _e=a++;n[_e]="^"+n[N]+"\\s*("+D+")$|^$";var ve=a++;n[ve]="^"+n[N]+"\\s*("+O+")$|^$";var ce=a++;n[ce]="(\\s*)"+n[N]+"\\s*("+D+"|"+n[F]+")",i[ce]=new RegExp(n[ce],"g");var xe="$1$2$3",ke=a++;n[ke]="^\\s*("+n[F]+")\\s+-\\s+("+n[F]+")\\s*$";var Z=a++;n[Z]="^\\s*("+n[z]+")\\s+-\\s+("+n[z]+")\\s*$";var Q=a++;for(n[Q]="(<|>)?=?\\s*\\*",te=0;te<a;te++)t(te,n[te]),i[te]||(i[te]=new RegExp(n[te]));var te;e.parse=fe;function fe(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof j)return d;if(typeof d!="string"||d.length>o)return null;var E=_.loose?i[M]:i[T];if(!E.test(d))return null;try{return new j(d,_)}catch{return null}}e.valid=It;function It(d,_){var E=fe(d,_);return E?E.version:null}e.clean=Ct;function Ct(d,_){var E=fe(d.trim().replace(/^[=v]+/,""),_);return E?E.version:null}e.SemVer=j;function j(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof j){if(d.loose===_.loose)return d;d=d.version}else if(typeof d!="string")throw new TypeError("Invalid Version: "+d);if(d.length>o)throw new TypeError("version is longer than "+o+" characters");if(!(this instanceof j))return new j(d,_);t("SemVer",d,_),this.options=_,this.loose=!!_.loose;var E=d.trim().match(_.loose?i[M]:i[T]);if(!E)throw new TypeError("Invalid Version: "+d);if(this.raw=d,this.major=+E[1],this.minor=+E[2],this.patch=+E[3],this.major>c||this.major<0)throw new TypeError("Invalid major version");if(this.minor>c||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>c||this.patch<0)throw new TypeError("Invalid patch version");E[4]?this.prerelease=E[4].split(".").map(function(I){if(/^[0-9]+$/.test(I)){var w=+I;if(w>=0&&w<c)return w}return I}):this.prerelease=[],this.build=E[5]?E[5].split("."):[],this.format()}j.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},j.prototype.toString=function(){return this.version},j.prototype.compare=function(d){return t("SemVer.compare",this.version,this.options,d),d instanceof j||(d=new j(d,this.options)),this.compareMain(d)||this.comparePre(d)},j.prototype.compareMain=function(d){return d instanceof j||(d=new j(d,this.options)),Ae(this.major,d.major)||Ae(this.minor,d.minor)||Ae(this.patch,d.patch)},j.prototype.comparePre=function(d){if(d instanceof j||(d=new j(d,this.options)),this.prerelease.length&&!d.prerelease.length)return-1;if(!this.prerelease.length&&d.prerelease.length)return 1;if(!this.prerelease.length&&!d.prerelease.length)return 0;var _=0;do{var E=this.prerelease[_],I=d.prerelease[_];if(t("prerelease compare",_,E,I),E===void 0&&I===void 0)return 0;if(I===void 0)return 1;if(E===void 0)return-1;if(E!==I)return Ae(E,I)}while(++_)},j.prototype.inc=function(d,_){switch(d){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",_);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",_);break;case"prepatch":this.prerelease.length=0,this.inc("patch",_),this.inc("pre",_);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",_),this.inc("pre",_);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var E=this.prerelease.length;--E>=0;)typeof this.prerelease[E]=="number"&&(this.prerelease[E]++,E=-2);E===-1&&this.prerelease.push(0)}_&&(this.prerelease[0]===_?isNaN(this.prerelease[1])&&(this.prerelease=[_,0]):this.prerelease=[_,0]);break;default:throw new Error("invalid increment argument: "+d)}return this.format(),this.raw=this.version,this},e.inc=wt;function wt(d,_,E,I){typeof E=="string"&&(I=E,E=void 0);try{return new j(d,E).inc(_,I).version}catch{return null}}e.diff=Ot;function Ot(d,_){if(Ve(d,_))return null;var E=fe(d),I=fe(_),w="";if(E.prerelease.length||I.prerelease.length){w="pre";var P="prerelease"}for(var x in E)if((x==="major"||x==="minor"||x==="patch")&&E[x]!==I[x])return w+x;return P}e.compareIdentifiers=Ae;var $e=/^[0-9]+$/;function Ae(d,_){var E=$e.test(d),I=$e.test(_);return E&&I&&(d=+d,_=+_),d===_?0:E&&!I?-1:I&&!E?1:d<_?-1:1}e.rcompareIdentifiers=ot;function ot(d,_){return Ae(_,d)}e.major=Be;function Be(d,_){return new j(d,_).major}e.minor=pt;function pt(d,_){return new j(d,_).minor}e.patch=dt;function dt(d,_){return new j(d,_).patch}e.compare=me;function me(d,_,E){return new j(d,E).compare(new j(_,E))}e.compareLoose=Pt;function Pt(d,_){return me(d,_,!0)}e.rcompare=st;function st(d,_,E){return me(_,d,E)}e.sort=ft;function ft(d,_){return d.sort(function(E,I){return e.compare(E,I,_)})}e.rsort=ht;function ht(d,_){return d.sort(function(E,I){return e.rcompare(E,I,_)})}e.gt=De;function De(d,_,E){return me(d,_,E)>0}e.lt=Ue;function Ue(d,_,E){return me(d,_,E)<0}e.eq=Ve;function Ve(d,_,E){return me(d,_,E)===0}e.neq=at;function at(d,_,E){return me(d,_,E)!==0}e.gte=ze;function ze(d,_,E){return me(d,_,E)>=0}e.lte=Le;function Le(d,_,E){return me(d,_,E)<=0}e.cmp=je;function je(d,_,E,I){switch(_){case"===":return typeof d=="object"&&(d=d.version),typeof E=="object"&&(E=E.version),d===E;case"!==":return typeof d=="object"&&(d=d.version),typeof E=="object"&&(E=E.version),d!==E;case"":case"=":case"==":return Ve(d,E,I);case"!=":return at(d,E,I);case">":return De(d,E,I);case">=":return ze(d,E,I);case"<":return Ue(d,E,I);case"<=":return Le(d,E,I);default:throw new TypeError("Invalid operator: "+_)}}e.Comparator=ae;function ae(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof ae){if(d.loose===!!_.loose)return d;d=d.value}if(!(this instanceof ae))return new ae(d,_);t("comparator",d,_),this.options=_,this.loose=!!_.loose,this.parse(d),this.semver===Ne?this.value="":this.value=this.operator+this.semver.version,t("comp",this)}var Ne={};ae.prototype.parse=function(d){var _=this.options.loose?i[_e]:i[ve],E=d.match(_);if(!E)throw new TypeError("Invalid comparator: "+d);this.operator=E[1],this.operator==="="&&(this.operator=""),E[2]?this.semver=new j(E[2],this.options.loose):this.semver=Ne},ae.prototype.toString=function(){return this.value},ae.prototype.test=function(d){return t("Comparator.test",d,this.options.loose),this.semver===Ne?!0:(typeof d=="string"&&(d=new j(d,this.options)),je(d,this.operator,this.semver,this.options))},ae.prototype.intersects=function(d,_){if(!(d instanceof ae))throw new TypeError("a Comparator is required");(!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1});var E;if(this.operator==="")return E=new $(d.value,_),He(this.value,E,_);if(d.operator==="")return E=new $(this.value,_),He(d.semver,E,_);var I=(this.operator===">="||this.operator===">")&&(d.operator===">="||d.operator===">"),w=(this.operator==="<="||this.operator==="<")&&(d.operator==="<="||d.operator==="<"),P=this.semver.version===d.semver.version,x=(this.operator===">="||this.operator==="<=")&&(d.operator===">="||d.operator==="<="),q=je(this.semver,"<",d.semver,_)&&(this.operator===">="||this.operator===">")&&(d.operator==="<="||d.operator==="<"),U=je(this.semver,">",d.semver,_)&&(this.operator==="<="||this.operator==="<")&&(d.operator===">="||d.operator===">");return I||w||P&&x||q||U},e.Range=$;function $(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof $)return d.loose===!!_.loose&&d.includePrerelease===!!_.includePrerelease?d:new $(d.raw,_);if(d instanceof ae)return new $(d.value,_);if(!(this instanceof $))return new $(d,_);if(this.options=_,this.loose=!!_.loose,this.includePrerelease=!!_.includePrerelease,this.raw=d,this.set=d.split(/\s*\|\|\s*/).map(function(E){return this.parseRange(E.trim())},this).filter(function(E){return E.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+d);this.format()}$.prototype.format=function(){return this.range=this.set.map(function(d){return d.join(" ").trim()}).join("||").trim(),this.range},$.prototype.toString=function(){return this.range},$.prototype.parseRange=function(d){var _=this.options.loose;d=d.trim();var E=_?i[Z]:i[ke];d=d.replace(E,kt),t("hyphen replace",d),d=d.replace(i[ce],xe),t("comparator trim",d,i[ce]),d=d.replace(i[H],G),d=d.replace(i[ne],Y),d=d.split(/\s+/).join(" ");var I=_?i[_e]:i[ve],w=d.split(" ").map(function(P){return tt(P,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(w=w.filter(function(P){return!!P.match(I)})),w=w.map(function(P){return new ae(P,this.options)},this),w},$.prototype.intersects=function(d,_){if(!(d instanceof $))throw new TypeError("a Range is required");return this.set.some(function(E){return E.every(function(I){return d.set.some(function(w){return w.every(function(P){return I.intersects(P,_)})})})})},e.toComparators=vt;function vt(d,_){return new $(d,_).set.map(function(E){return E.map(function(I){return I.value}).join(" ").trim().split(" ")})}function tt(d,_){return t("comp",d,_),d=xt(d,_),t("caret",d),d=We(d,_),t("tildes",d),d=Nt(d,_),t("xrange",d),d=Fe(d,_),t("stars",d),d}function J(d){return!d||d.toLowerCase()==="x"||d==="*"}function We(d,_){return d.trim().split(/\s+/).map(function(E){return Rt(E,_)}).join(" ")}function Rt(d,_){var E=_.loose?i[W]:i[V];return d.replace(E,function(I,w,P,x,q){t("tilde",d,I,w,P,x,q);var U;return J(w)?U="":J(P)?U=">="+w+".0.0 <"+(+w+1)+".0.0":J(x)?U=">="+w+"."+P+".0 <"+w+"."+(+P+1)+".0":q?(t("replaceTilde pr",q),U=">="+w+"."+P+"."+x+"-"+q+" <"+w+"."+(+P+1)+".0"):U=">="+w+"."+P+"."+x+" <"+w+"."+(+P+1)+".0",t("tilde return",U),U})}function xt(d,_){return d.trim().split(/\s+/).map(function(E){return Dt(E,_)}).join(" ")}function Dt(d,_){t("caret",d,_);var E=_.loose?i[Se]:i[he];return d.replace(E,function(I,w,P,x,q){t("caret",d,I,w,P,x,q);var U;return J(w)?U="":J(P)?U=">="+w+".0.0 <"+(+w+1)+".0.0":J(x)?w==="0"?U=">="+w+"."+P+".0 <"+w+"."+(+P+1)+".0":U=">="+w+"."+P+".0 <"+(+w+1)+".0.0":q?(t("replaceCaret pr",q),w==="0"?P==="0"?U=">="+w+"."+P+"."+x+"-"+q+" <"+w+"."+P+"."+(+x+1):U=">="+w+"."+P+"."+x+"-"+q+" <"+w+"."+(+P+1)+".0":U=">="+w+"."+P+"."+x+"-"+q+" <"+(+w+1)+".0.0"):(t("no pr"),w==="0"?P==="0"?U=">="+w+"."+P+"."+x+" <"+w+"."+P+"."+(+x+1):U=">="+w+"."+P+"."+x+" <"+w+"."+(+P+1)+".0":U=">="+w+"."+P+"."+x+" <"+(+w+1)+".0.0"),t("caret return",U),U})}function Nt(d,_){return t("replaceXRanges",d,_),d.split(/\s+/).map(function(E){return Mt(E,_)}).join(" ")}function Mt(d,_){d=d.trim();var E=_.loose?i[ee]:i[ie];return d.replace(E,function(I,w,P,x,q,U){t("xRange",d,I,w,P,x,q,U);var pe=J(P),ue=pe||J(x),se=ue||J(q),oe=se;return w==="="&&oe&&(w=""),pe?w===">"||w==="<"?I="<0.0.0":I="*":w&&oe?(ue&&(x=0),q=0,w===">"?(w=">=",ue?(P=+P+1,x=0,q=0):(x=+x+1,q=0)):w==="<="&&(w="<",ue?P=+P+1:x=+x+1),I=w+P+"."+x+"."+q):ue?I=">="+P+".0.0 <"+(+P+1)+".0.0":se&&(I=">="+P+"."+x+".0 <"+P+"."+(+x+1)+".0"),t("xRange return",I),I})}function Fe(d,_){return t("replaceStars",d,_),d.trim().replace(i[Q],"")}function kt(d,_,E,I,w,P,x,q,U,pe,ue,se,oe){return J(E)?_="":J(I)?_=">="+E+".0.0":J(w)?_=">="+E+"."+I+".0":_=">="+_,J(U)?q="":J(pe)?q="<"+(+U+1)+".0.0":J(ue)?q="<"+U+"."+(+pe+1)+".0":se?q="<="+U+"."+pe+"."+ue+"-"+se:q="<="+q,(_+" "+q).trim()}$.prototype.test=function(d){if(!d)return!1;typeof d=="string"&&(d=new j(d,this.options));for(var _=0;_<this.set.length;_++)if(Lt(this.set[_],d,this.options))return!0;return!1};function Lt(d,_,E){for(var I=0;I<d.length;I++)if(!d[I].test(_))return!1;if(_.prerelease.length&&!E.includePrerelease){for(I=0;I<d.length;I++)if(t(d[I].semver),d[I].semver!==Ne&&d[I].semver.prerelease.length>0){var w=d[I].semver;if(w.major===_.major&&w.minor===_.minor&&w.patch===_.patch)return!0}return!1}return!0}e.satisfies=He;function He(d,_,E){try{_=new $(_,E)}catch{return!1}return _.test(d)}e.maxSatisfying=jt;function jt(d,_,E){var I=null,w=null;try{var P=new $(_,E)}catch{return null}return d.forEach(function(x){P.test(x)&&(!I||w.compare(x)===-1)&&(I=x,w=new j(I,E))}),I}e.minSatisfying=Ut;function Ut(d,_,E){var I=null,w=null;try{var P=new $(_,E)}catch{return null}return d.forEach(function(x){P.test(x)&&(!I||w.compare(x)===1)&&(I=x,w=new j(I,E))}),I}e.minVersion=Xe;function Xe(d,_){d=new $(d,_);var E=new j("0.0.0");if(d.test(E)||(E=new j("0.0.0-0"),d.test(E)))return E;E=null;for(var I=0;I<d.set.length;++I){var w=d.set[I];w.forEach(function(P){var x=new j(P.semver.version);switch(P.operator){case">":x.prerelease.length===0?x.patch++:x.prerelease.push(0),x.raw=x.format();case"":case">=":(!E||De(E,x))&&(E=x);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+P.operator)}})}return E&&d.test(E)?E:null}e.validRange=qt;function qt(d,_){try{return new $(d,_).range||"*"}catch{return null}}e.ltr=Ht;function Ht(d,_,E){return Ke(d,_,"<",E)}e.gtr=Bt;function Bt(d,_,E){return Ke(d,_,">",E)}e.outside=Ke;function Ke(d,_,E,I){d=new j(d,I),_=new $(_,I);var w,P,x,q,U;switch(E){case">":w=De,P=Le,x=Ue,q=">",U=">=";break;case"<":w=Ue,P=ze,x=De,q="<",U="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(He(d,_,I))return!1;for(var pe=0;pe<_.set.length;++pe){var ue=_.set[pe],se=null,oe=null;if(ue.forEach(function(ye){ye.semver===Ne&&(ye=new ae(">=0.0.0")),se=se||ye,oe=oe||ye,w(ye.semver,se.semver,I)?se=ye:x(ye.semver,oe.semver,I)&&(oe=ye)}),se.operator===q||se.operator===U||(!oe.operator||oe.operator===q)&&P(d,oe.semver)||oe.operator===U&&x(d,oe.semver))return!1}return!0}e.prerelease=Ft;function Ft(d,_){var E=fe(d,_);return E&&E.prerelease.length?E.prerelease:null}e.intersects=Ze;function Ze(d,_,E){return d=new $(d,E),_=new $(_,E),d.intersects(_)}e.coerce=Vt;function Vt(d){if(d instanceof j)return d;if(typeof d!="string")return null;var _=d.match(i[ge]);return _==null?null:fe(_[1]+"."+(_[2]||"0")+"."+(_[3]||"0"))}}),il=C((e,r)=>{var t=fn().wrap,o=1<<0,c=1<<1,s=1<<2,i=1<<3,n=[],a=0,l=!1,p=[],u,f;function h(M,N){var L=M.length,B=N.length,F=[];if(L===0&&B===0)return F;for(var z=0;z<L;z++)F[z]=M[z];if(B===0)return F;for(var ie=0;ie<B;ie++){var ee=!0;for(z=0;z<L;z++)if(M[z].uid===N[ie].uid){ee=!1;break}ee&&F.push(N[ie])}return F}process._fatalException?(v=!1,u=function(M){var N=n.length;if(v||N===0)return!1;var L=!1;v=!0;for(var B=0;B<N;++B){var F=n[B];if((F.flags&i)!=0){var z=m&&m[F.uid];L=F.error(z,M)||L}}return v=!1,p.length>0&&(n=p.pop()),m=void 0,L&&!l},f=function(M,N,L){var B=[];l=!0;for(var F=0;F<L;++F){var z=N[F];if(B[z.uid]=z.data,(z.flags&o)!=0){var ie=z.create(z.data);ie!==void 0&&(B[z.uid]=ie)}}return l=!1,function(){m=B,p.push(n),n=h(N,n),l=!0;for(var ee=0;ee<L;++ee)(N[ee].flags&c)>0&&N[ee].before(this,B[N[ee].uid]);l=!1;var ge=M.apply(this,arguments);for(l=!0,ee=0;ee<L;++ee)(N[ee].flags&s)>0&&N[ee].after(this,B[N[ee].uid]);return l=!1,n=p.pop(),m=void 0,ge}},t(process,"_fatalException",function(M){return function(N){return u(N)||M(N)}})):(g=!1,u=function(M){if(g)throw M;for(var N=!1,L=n.length,B=0;B<L;++B){var F=n[B];(F.flags&i)!=0&&(N=F.error(null,M)||N)}if(!N&&l)throw M},f=function(M,N,L){var B=[];l=!0;for(var F=0;F<L;++F){var z=N[F];if(B[z.uid]=z.data,(z.flags&o)!=0){var ie=z.create(z.data);ie!==void 0&&(B[z.uid]=ie)}}return l=!1,function(){var ee=!1,ge=!1;p.push(n),n=h(N,n),l=!0;for(var re=0;re<L;++re)(N[re].flags&c)>0&&N[re].before(this,B[N[re].uid]);l=!1;var H;try{H=M.apply(this,arguments)}catch(G){ee=!0;for(var re=0;re<L;++re)if((n[re].flags&i)!=0)try{ge=n[re].error(B[N[re].uid],G)||ge}catch(W){throw g=!0,W}if(!ge)throw process.removeListener("uncaughtException",u),process._originalNextTick(function(){process.addListener("uncaughtException",u)}),G}finally{if(!ee||ge){for(l=!0,re=0;re<L;++re)(N[re].flags&s)>0&&N[re].after(this,B[N[re].uid]);l=!1}n=p.pop()}return H}},process.addListener("uncaughtException",u));var v,m,g;function y(M,N,L){l=!0;for(var B=0;B<L;++B){var F=N[B];F.create&&F.create(F.data)}return l=!1,function(){p.push(n),n=h(N,n);var z=M.apply(this,arguments);return n=p.pop(),z}}function b(M){var N=n.length;if(N===0)return M;for(var L=n.slice(),B=0;B<N;++B)if(L[B].flags>0)return f(M,L,N);return y(M,L,N)}function S(M,N){typeof M.create=="function"&&(this.create=M.create,this.flags|=o),typeof M.before=="function"&&(this.before=M.before,this.flags|=c),typeof M.after=="function"&&(this.after=M.after,this.flags|=s),typeof M.error=="function"&&(this.error=M.error,this.flags|=i),this.uid=++a,this.data=N===void 0?null:N}S.prototype.create=void 0,S.prototype.before=void 0,S.prototype.after=void 0,S.prototype.error=void 0,S.prototype.data=void 0,S.prototype.uid=0,S.prototype.flags=0;function T(M,N){if(typeof M!="object"||!M)throw new TypeError("callbacks argument must be an object");return M instanceof S?M:new S(M,N)}function O(M,N){var L;M instanceof S?L=M:L=T(M,N);for(var B=!1,F=0;F<n.length;F++)if(L===n[F]){B=!0;break}return B||n.push(L),L}function D(M){for(var N=0;N<n.length;N++)if(M===n[N]){n.splice(N,1);break}}process.createAsyncListener=T,process.addAsyncListener=O,process.removeAsyncListener=D,r.exports=b}),ol=C((e,r)=>{"use strict";r.exports=(t,o)=>class extends t{constructor(c){var s,i;super(a);var n=this;try{c.apply(s,i)}catch(l){i[1](l)}return n;function a(l,p){s=this,i=[u,f];function u(h){return o(n,!1),l(h)}function f(h){return o(n,!1),p(h)}}}}}),sl=C(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var e=fn(),r=nl(),t=e.wrap,o=e.massWrap,c=il(),s=require("util"),i=r.gte(process.version,"6.0.0"),n=r.gte(process.version,"7.0.0"),a=r.gte(process.version,"8.0.0"),l=r.gte(process.version,"11.0.0"),p=require("net");n&&!p._normalizeArgs?p._normalizeArgs=function(H){if(H.length===0)return[{},null];var G=H[0],V={};typeof G=="object"&&G!==null?V=G:re(G)?V.path=G:(V.port=G,H.length>1&&typeof H[1]=="string"&&(V.host=H[1]));var W=H[H.length-1];return typeof W!="function"?[V,null]:[V,W]}:!n&&!p._normalizeConnectArgs&&(p._normalizeConnectArgs=function(H){var G={};function V(X){return(X=Number(X))>=0?X:!1}typeof H[0]=="object"&&H[0]!==null?G=H[0]:typeof H[0]=="string"&&V(H[0])===!1?G.path=H[0]:(G.port=H[0],typeof H[1]=="string"&&(G.host=H[1]));var W=H[H.length-1];return typeof W=="function"?[G,W]:[G]}),"_setUpListenHandle"in p.Server.prototype?t(p.Server.prototype,"_setUpListenHandle",u):t(p.Server.prototype,"_listen2",u);function u(H){return function(){this.on("connection",function(G){G._handle&&(G._handle.onread=c(G._handle.onread))});try{return H.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=c(this._handle.onconnection))}}}function f(H){if(H&&H._handle){var G=H._handle;G._originalOnread||(G._originalOnread=G.onread),G.onread=c(G._originalOnread)}}t(p.Socket.prototype,"connect",function(H){return function(){var G;a&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?G=arguments[0]:G=n?p._normalizeArgs(arguments):p._normalizeConnectArgs(arguments),G[1]&&(G[1]=c(G[1]));var V=H.apply(this,G);return f(this),V}});var h=require("http");t(h.Agent.prototype,"addRequest",function(H){return function(G){var V=G.onSocket;return G.onSocket=c(function(W){return f(W),V.apply(this,arguments)}),H.apply(this,arguments)}});var v=require("child_process");function m(H){Array.isArray(H.stdio)&&H.stdio.forEach(function(G){G&&G._handle&&(G._handle.onread=c(G._handle.onread),t(G._handle,"close",ee))}),H._handle&&(H._handle.onexit=c(H._handle.onexit))}v.ChildProcess?t(v.ChildProcess.prototype,"spawn",function(H){return function(){var G=H.apply(this,arguments);return m(this),G}}):o(v,["execFile","fork","spawn"],function(H){return function(){var G=H.apply(this,arguments);return m(G),G}}),process._fatalException||(process._originalNextTick=process.nextTick);var g=[];process._nextDomainTick&&g.push("_nextDomainTick"),process._tickDomainCallback&&g.push("_tickDomainCallback"),o(process,g,ie),t(process,"nextTick",ee);var y=["setTimeout","setInterval"];global.setImmediate&&y.push("setImmediate");var b=require("timers"),S=global.setTimeout===b.setTimeout;o(b,y,ee),S&&o(global,y,ee);var T=require("dns");o(T,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],ie),T.resolveNaptr&&t(T,"resolveNaptr",ie);var O=require("fs");o(O,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],ie),O.lchown&&t(O,"lchown",ie),O.lchmod&&t(O,"lchmod",ie),O.ftruncate&&t(O,"ftruncate",ie);var D;try{D=require("zlib")}catch{}D&&D.Deflate&&D.Deflate.prototype&&(M=Object.getPrototypeOf(D.Deflate.prototype),M._transform?t(M,"_transform",ie):M.write&&M.flush&&M.end&&o(M,["write","flush","end"],ie));var M,N;try{N=require("crypto")}catch{}N&&(L=["pbkdf2","randomBytes"],l||L.push("pseudoRandomBytes"),o(N,L,ie));var L,B=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";B&&(F=process.addAsyncListener({create:function(){B=!1}}),global.Promise.resolve(!0).then(function(){B=!1}),process.removeAsyncListener(F));var F;B&&z();function z(){var H=global.Promise;function G(Y){if(!(this instanceof G))return H(Y);if(typeof Y!="function")return new H(Y);var he,Se,_e=new H(ve);_e.__proto__=G.prototype;try{Y.apply(he,Se)}catch(ce){Se[1](ce)}return _e;function ve(ce,xe){he=this,Se=[ke,Z];function ke(Q){return W(_e,!1),ce(Q)}function Z(Q){return W(_e,!1),xe(Q)}}}if(s.inherits(G,H),t(H.prototype,"then",ne),H.prototype.chain&&t(H.prototype,"chain",ne),i)global.Promise=ol()(H,W);else{var V=["all","race","reject","resolve","accept","defer"];V.forEach(function(Y){typeof H[Y]=="function"&&(G[Y]=H[Y])}),global.Promise=G}function W(Y,he){(!Y.__asl_wrapper||he)&&(Y.__asl_wrapper=c(X))}function X(Y,he,Se,_e){var ve;try{return ve=he.call(Y,Se),{returnVal:ve,error:!1}}catch(ce){return{errorVal:ce,error:!0}}finally{ve instanceof H?_e.__asl_wrapper=function(){var ce=ve.__asl_wrapper||X;return ce.apply(this,arguments)}:W(_e,!0)}}function ne(Y){return function(){var he=this,Se=Y.apply(he,Array.prototype.map.call(arguments,_e));return Se.__asl_wrapper=function(ve,ce,xe,ke){return he.__asl_wrapper?(he.__asl_wrapper(ve,function(){},null,Se),Se.__asl_wrapper(ve,ce,xe,ke)):X(ve,ce,xe,ke)},Se;function _e(ve){return typeof ve!="function"?ve:c(function(ce){var xe=(he.__asl_wrapper||X)(this,ve,ce,Se);if(xe.error)throw xe.errorVal;return xe.returnVal})}}}}function ie(H){var G=function(){var V,W=arguments.length-1;if(typeof arguments[W]=="function"){V=Array(arguments.length);for(var X=0;X<arguments.length-1;X++)V[X]=arguments[X];V[W]=c(arguments[W])}return H.apply(this,V||arguments)};switch(H.length){case 1:return function(V){return arguments.length!==1?G.apply(this,arguments):(typeof V=="function"&&(V=c(V)),H.call(this,V))};case 2:return function(V,W){return arguments.length!==2?G.apply(this,arguments):(typeof W=="function"&&(W=c(W)),H.call(this,V,W))};case 3:return function(V,W,X){return arguments.length!==3?G.apply(this,arguments):(typeof X=="function"&&(X=c(X)),H.call(this,V,W,X))};case 4:return function(V,W,X,ne){return arguments.length!==4?G.apply(this,arguments):(typeof ne=="function"&&(ne=c(ne)),H.call(this,V,W,X,ne))};case 5:return function(V,W,X,ne,Y){return arguments.length!==5?G.apply(this,arguments):(typeof Y=="function"&&(Y=c(Y)),H.call(this,V,W,X,ne,Y))};case 6:return function(V,W,X,ne,Y,he){return arguments.length!==6?G.apply(this,arguments):(typeof he=="function"&&(he=c(he)),H.call(this,V,W,X,ne,Y,he))};default:return G}}function ee(H){var G=function(){var V;if(typeof arguments[0]=="function"){V=Array(arguments.length),V[0]=c(arguments[0]);for(var W=1;W<arguments.length;W++)V[W]=arguments[W]}return H.apply(this,V||arguments)};switch(H.length){case 1:return function(V){return arguments.length!==1?G.apply(this,arguments):(typeof V=="function"&&(V=c(V)),H.call(this,V))};case 2:return function(V,W){return arguments.length!==2?G.apply(this,arguments):(typeof V=="function"&&(V=c(V)),H.call(this,V,W))};case 3:return function(V,W,X){return arguments.length!==3?G.apply(this,arguments):(typeof V=="function"&&(V=c(V)),H.call(this,V,W,X))};case 4:return function(V,W,X,ne){return arguments.length!==4?G.apply(this,arguments):(typeof V=="function"&&(V=c(V)),H.call(this,V,W,X,ne))};case 5:return function(V,W,X,ne,Y){return arguments.length!==5?G.apply(this,arguments):(typeof V=="function"&&(V=c(V)),H.call(this,V,W,X,ne,Y))};case 6:return function(V,W,X,ne,Y,he){return arguments.length!==6?G.apply(this,arguments):(typeof V=="function"&&(V=c(V)),H.call(this,V,W,X,ne,Y,he))};default:return G}}function ge(H){return(H=Number(H))>=0?H:!1}function re(H){return typeof H=="string"&&ge(H)===!1}}),al=C((e,r)=>{"use strict";var t=require("assert"),o=hn(),c="cls@contexts",s="error@context";process.addAsyncListener||sl();function i(u){this.name=u,this.active=null,this._set=[],this.id=null}i.prototype.set=function(u,f){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[u]=f,f},i.prototype.get=function(u){if(this.active)return this.active[u]},i.prototype.createContext=function(){return Object.create(this.active)},i.prototype.run=function(u){var f=this.createContext();this.enter(f);try{return u(f),f}catch(h){throw h&&(h[s]=f),h}finally{this.exit(f)}},i.prototype.runAndReturn=function(u){var f;return this.run(function(h){f=u(h)}),f},i.prototype.bind=function(u,f){f||(this.active?f=this.active:f=this.createContext());var h=this;return function(){h.enter(f);try{return u.apply(this,arguments)}catch(v){throw v&&(v[s]=f),v}finally{h.exit(f)}}},i.prototype.enter=function(u){t.ok(u,"context must be provided for entering"),this._set.push(this.active),this.active=u},i.prototype.exit=function(u){if(t.ok(u,"context must be provided for exiting"),this.active===u){t.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var f=this._set.lastIndexOf(u);t.ok(f>=0,"context not currently entered; can't exit"),t.ok(f,"can't remove top context"),this._set.splice(f,1)},i.prototype.bindEmitter=function(u){t.ok(u.on&&u.addListener&&u.emit,"can only bind real EEs");var f=this,h="context@"+this.name;function v(g){!g||(g[c]||(g[c]=Object.create(null)),g[c][h]={namespace:f,context:f.active})}function m(g){if(!(g&&g[c]))return g;var y=g,b=g[c];return Object.keys(b).forEach(function(S){var T=b[S];y=T.namespace.bind(y,T.context)}),y}o(u,v,m)},i.prototype.fromException=function(u){return u[s]};function n(u){return process.namespaces[u]}function a(u){t.ok(u,"namespace must be given a name!");var f=new i(u);return f.id=process.addAsyncListener({create:function(){return f.active},before:function(h,v){v&&f.enter(v)},after:function(h,v){v&&f.exit(v)},error:function(h){h&&f.exit(h)}}),process.namespaces[u]=f,f}function l(u){var f=n(u);t.ok(f,"can't delete nonexistent namespace!"),t.ok(f.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(f.id),process.namespaces[u]=null}function p(){process.namespaces&&Object.keys(process.namespaces).forEach(function(u){l(u)}),process.namespaces=Object.create(null)}process.namespaces||p(),r.exports={getNamespace:n,createNamespace:a,destroyNamespace:l,reset:p}}),Yt=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CorrelationContextManager=void 0;var r=qe(),t=dn(),o=Tr(),c=co(),s=vo(),i=function(){function a(){}return a.getCurrentContext=function(){if(!a.enabled)return null;var l=a.session.get(a.CONTEXT_NAME);return l===void 0?null:l},a.generateContextObject=function(l,p,u,f,h,v){return p=p||l,this.enabled?{operation:{name:u,id:l,parentId:p,traceparent:h,tracestate:v},customProperties:new n(f)}:null},a.spanToContextObject=function(l,p,u){var f=new o;return f.traceId=l.traceId,f.spanId=l.spanId,f.traceFlag=o.formatOpenTelemetryTraceFlags(l.traceFlags)||o.DEFAULT_TRACE_FLAG,f.parentId=p,a.generateContextObject(f.traceId,f.parentId,u,null,f)},a.runWithContext=function(l,p){var u;return a.enabled?a.session.bind(p,(u={},u[a.CONTEXT_NAME]=l,u))():p()},a.wrapEmitter=function(l){a.enabled&&a.session.bindEmitter(l)},a.wrapCallback=function(l,p){var u;return a.enabled?a.session.bind(l,p?(u={},u[a.CONTEXT_NAME]=p,u):void 0):l},a.enable=function(l){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}a.hasEverEnabled||(this.forceClsHooked=l,this.hasEverEnabled=!0,typeof this.cls=="undefined"&&(a.forceClsHooked===!0||a.forceClsHooked===void 0&&a.shouldUseClsHooked()?this.cls=rl():this.cls=al()),a.session=this.cls.createNamespace("AI-CLS-Session"),t.registerContextPreservation(function(p){return a.session.bind(p)})),this.enabled=!0}},a.startOperation=function(l,p){var u=l&&l.traceContext||null,f=l&&l.traceId?l:null,h=l&&l.headers;if(f){var v=new o("00-"+f.traceId+"-"+f.spanId+"-01"),m=new c(f.traceState?f.traceState.serialize():null),g=a.generateContextObject(f.traceId,"|"+f.traceId+"."+f.spanId+".",typeof p=="string"?p:"",void 0,v,m);return g}if(u){var v=new o(u.traceparent),m=new c(u.tracestate),y=typeof p=="object"?new s(p):null,g=a.generateContextObject(v.traceId,v.parentId,typeof p=="string"?p:y.getOperationName({}),y&&y.getCorrelationContextHeader()||void 0,v,m);return g}if(h){var v=new o(h.traceparent?h.traceparent.toString():null),m=new c(h.tracestate?h.tracestate.toString():null),y=new s(l),g=a.generateContextObject(v.traceId,v.parentId,y.getOperationName({}),y.getCorrelationContextHeader(),v,m);return g}return r.warn("startOperation was called with invalid arguments",arguments),null},a.disable=function(){this.enabled=!1},a.reset=function(){a.hasEverEnabled&&(a.session=null,a.session=this.cls.createNamespace("AI-CLS-Session"))},a.isNodeVersionCompatible=function(){var l=process.versions.node.split(".");return parseInt(l[0])>3||parseInt(l[0])>2&&parseInt(l[1])>2},a.shouldUseClsHooked=function(){var l=process.versions.node.split(".");return parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=2},a.canUseClsHooked=function(){var l=process.versions.node.split("."),p=parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=0,u=parseInt(l[0])<8||parseInt(l[0])<=8&&parseInt(l[1])<2,f=parseInt(l[0])>4||parseInt(l[0])>=4&&parseInt(l[1])>=7;return!(p&&u)&&f},a.enabled=!1,a.hasEverEnabled=!1,a.forceClsHooked=void 0,a.CONTEXT_NAME="ApplicationInsights-Context",a}();e.CorrelationContextManager=i;var n=function(){function a(l){this.props=[],this.addHeaderData(l)}return a.prototype.addHeaderData=function(l){var p=l?l.split(", "):[];this.props=p.map(function(u){var f=u.split("=");return{key:f[0],value:f[1]}}).concat(this.props)},a.prototype.serializeToHeader=function(){return this.props.map(function(l){return l.key+"="+l.value}).join(", ")},a.prototype.getProperty=function(l){for(var p=0;p<this.props.length;++p){var u=this.props[p];if(u.key===l)return u.value}},a.prototype.setProperty=function(l,p){if(a.bannedCharacters.test(l)||a.bannedCharacters.test(p)){r.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+l+" and value: "+p);return}for(var u=0;u<this.props.length;++u){var f=this.props[u];if(f.key===l){f.value=p;return}}this.props.push({key:l,value:p})},a.bannedCharacters=/[,=]/,a}()}),cl=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var r=Ge(),t=Me(),o=[],c=function(n){var a=n.data.message;o.forEach(function(l){a instanceof Error?l.trackException({exception:a}):(a.lastIndexOf(`
`)==a.length-1&&(a=a.substring(0,a.length-1)),l.trackTrace({message:a,severity:n.data.stderr?r.SeverityLevel.Warning:r.SeverityLevel.Information}))})};function s(n,a){n?(o.length===0&&t.channel.subscribe("console",c),o.push(a)):(o=o.filter(function(l){return l!=a}),o.length===0&&t.channel.unsubscribe("console",c))}e.enable=s;function i(){t.channel.unsubscribe("console",c),o=[]}e.dispose=i}),ul=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var r=Ge(),t=Me(),o=[],c={10:r.SeverityLevel.Verbose,20:r.SeverityLevel.Verbose,30:r.SeverityLevel.Information,40:r.SeverityLevel.Warning,50:r.SeverityLevel.Error,60:r.SeverityLevel.Critical},s=function(a){var l=a.data.result;o.forEach(function(p){var u=c[a.data.level];l instanceof Error?p.trackException({exception:l}):p.trackTrace({message:l,severity:u})})};function i(a,l){a?(o.length===0&&t.channel.subscribe("bunyan",s),o.push(l)):(o=o.filter(function(p){return p!=l}),o.length===0&&t.channel.unsubscribe("bunyan",s))}e.enable=i;function n(){t.channel.unsubscribe("bunyan",s),o=[]}e.dispose=n}),ll=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var r=Ge(),t=Me(),o=[],c={syslog:function(a){var l={emerg:r.SeverityLevel.Critical,alert:r.SeverityLevel.Critical,crit:r.SeverityLevel.Critical,error:r.SeverityLevel.Error,warning:r.SeverityLevel.Warning,notice:r.SeverityLevel.Information,info:r.SeverityLevel.Information,debug:r.SeverityLevel.Verbose};return l[a]===void 0?r.SeverityLevel.Information:l[a]},npm:function(a){var l={error:r.SeverityLevel.Error,warn:r.SeverityLevel.Warning,info:r.SeverityLevel.Information,verbose:r.SeverityLevel.Verbose,debug:r.SeverityLevel.Verbose,silly:r.SeverityLevel.Verbose};return l[a]===void 0?r.SeverityLevel.Information:l[a]},unknown:function(a){return r.SeverityLevel.Information}},s=function(a){var l=a.data.message;o.forEach(function(p){if(l instanceof Error)p.trackException({exception:l,properties:a.data.meta});else{var u=c[a.data.levelKind](a.data.level);p.trackTrace({message:l,severity:u,properties:a.data.meta})}})};function i(a,l){a?(o.length===0&&t.channel.subscribe("winston",s),o.push(l)):(o=o.filter(function(p){return p!=l}),o.length===0&&t.channel.unsubscribe("winston",s))}e.enable=i;function n(){t.channel.unsubscribe("winston",s),o=[]}e.dispose=n}),pl=C((e,r)=>{"use strict";var t=dn(),o=function(){function c(s){if(c.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=s,c.INSTANCE=this}return c.prototype.enable=function(s,i){t.IsInitialized&&(cl().enable(s&&i,this._client),ul().enable(s,this._client),ll().enable(s,this._client))},c.prototype.isInitialized=function(){return this._isInitialized},c.prototype.dispose=function(){c.INSTANCE=null,this.enable(!1,!1)},c._methodNames=["debug","info","log","warn","error"],c}();r.exports=o}),dl=C((e,r)=>{"use strict";var t=function(){function o(c){if(o.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");o.INSTANCE=this,this._client=c;var s=process.versions.node.split(".");o._canUseUncaughtExceptionMonitor=parseInt(s[0])>13||parseInt(s[0])===13&&parseInt(s[1])>=7}return o.prototype.isInitialized=function(){return this._isInitialized},o.prototype.enable=function(c){var s=this;if(c){this._isInitialized=!0;var i=this;if(!this._exceptionListenerHandle){var n=function(a,l,p){p===void 0&&(p=new Error(o._FALLBACK_ERROR_MESSAGE)),s._client.trackException({exception:p}),s._client.flush({isAppCrashing:!0}),a&&l&&process.listeners(l).length===1&&(console.error(p),process.exit(1))};o._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=n.bind(this,!1,void 0),process.on(o.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=n.bind(this,!0,o.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=n.bind(this,!1,void 0),process.on(o.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(o.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(o._canUseUncaughtExceptionMonitor?process.removeListener(o.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(o.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(o.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},o.prototype.dispose=function(){o.INSTANCE=null,this.enable(!1),this._isInitialized=!1},o.INSTANCE=null,o.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",o.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",o.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",o._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",o._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",o._canUseUncaughtExceptionMonitor=!1,o}();r.exports=t}),gt=C(e=>{"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.HeartBeatMetricName=e.DependencyTypeName=e.SpanAttribute=e.TelemetryTypeStringToQuickPulseDocumentType=e.TelemetryTypeStringToQuickPulseType=e.QuickPulseType=e.QuickPulseDocumentType=e.PerformanceToQuickPulseCounter=e.MetricId=e.PerformanceCounter=e.QuickPulseCounter=e.DEFAULT_LIVEMETRICS_HOST=e.DEFAULT_LIVEMETRICS_ENDPOINT=e.DEFAULT_BREEZE_ENDPOINT=void 0,e.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var t;(function(s){s.COMMITTED_BYTES="\\Memory\\Committed Bytes",s.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",s.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",s.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",s.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",s.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",s.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",s.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",s.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(t=e.QuickPulseCounter||(e.QuickPulseCounter={}));var o;(function(s){s.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",s.AVAILABLE_BYTES="\\Memory\\Available Bytes",s.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",s.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",s.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",s.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(o=e.PerformanceCounter||(e.PerformanceCounter={}));var c;(function(s){s.REQUESTS_DURATION="requests/duration",s.DEPENDENCIES_DURATION="dependencies/duration",s.EXCEPTIONS_COUNT="exceptions/count",s.TRACES_COUNT="traces/count"})(c=e.MetricId||(e.MetricId={})),e.PerformanceToQuickPulseCounter=(r={},r[o.PROCESSOR_TIME]=t.PROCESSOR_TIME,r[o.REQUEST_RATE]=t.REQUEST_RATE,r[o.REQUEST_DURATION]=t.REQUEST_DURATION,r[t.COMMITTED_BYTES]=t.COMMITTED_BYTES,r[t.REQUEST_FAILURE_RATE]=t.REQUEST_FAILURE_RATE,r[t.DEPENDENCY_RATE]=t.DEPENDENCY_RATE,r[t.DEPENDENCY_FAILURE_RATE]=t.DEPENDENCY_FAILURE_RATE,r[t.DEPENDENCY_DURATION]=t.DEPENDENCY_DURATION,r[t.EXCEPTION_RATE]=t.EXCEPTION_RATE,r),e.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},e.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},e.TelemetryTypeStringToQuickPulseType={EventData:e.QuickPulseType.Event,ExceptionData:e.QuickPulseType.Exception,MessageData:e.QuickPulseType.Trace,MetricData:e.QuickPulseType.Metric,RequestData:e.QuickPulseType.Request,RemoteDependencyData:e.QuickPulseType.Dependency,AvailabilityData:e.QuickPulseType.Availability,PageViewData:e.QuickPulseType.PageView},e.TelemetryTypeStringToQuickPulseDocumentType={EventData:e.QuickPulseDocumentType.Event,ExceptionData:e.QuickPulseDocumentType.Exception,MessageData:e.QuickPulseDocumentType.Trace,MetricData:e.QuickPulseDocumentType.Metric,RequestData:e.QuickPulseDocumentType.Request,RemoteDependencyData:e.QuickPulseDocumentType.Dependency,AvailabilityData:e.QuickPulseDocumentType.Availability,PageViewData:e.QuickPulseDocumentType.PageView},e.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},e.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},e.HeartBeatMetricName="HeartBeat"}),vn=C((e,r)=>{"use strict";var t=require("os"),o=gt(),c=function(){function s(i,n,a){n===void 0&&(n=6e4),a===void 0&&(a=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,s.INSTANCE||(s.INSTANCE=this),this._isInitialized=!1,this._client=i,this._collectionInterval=n,this._enableLiveMetricsCounters=a}return s.prototype.enable=function(i,n){var a=this;this._isEnabled=i,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),i?this._handle||(this._lastCpus=t.cpus(),this._lastRequests={totalRequestCount:s._totalRequestCount,totalFailedRequestCount:s._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:s._totalDependencyCount,totalFailedDependencyCount:s._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:s._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=n||this._collectionInterval,this._handle=setInterval(function(){return a.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},s.countRequest=function(i,n){var a;if(s.isEnabled()){if(typeof i=="string")a=+new Date("1970-01-01T"+i+"Z");else if(typeof i=="number")a=i;else return;s._intervalRequestExecutionTime+=a,n===!1&&s._totalFailedRequestCount++,s._totalRequestCount++}},s.countException=function(){s._totalExceptionCount++},s.countDependency=function(i,n){var a;if(s.isEnabled()){if(typeof i=="string")a=+new Date("1970-01-01T"+i+"Z");else if(typeof i=="number")a=i;else return;s._intervalDependencyExecutionTime+=a,n===!1&&s._totalFailedDependencyCount++,s._totalDependencyCount++}},s.prototype.isInitialized=function(){return this._isInitialized},s.isEnabled=function(){return s.INSTANCE&&s.INSTANCE._isEnabled},s.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},s.prototype._trackCpu=function(){var i=t.cpus();if(i&&i.length&&this._lastCpus&&i.length===this._lastCpus.length){for(var n=0,a=0,l=0,p=0,u=0,f=0;!!i&&f<i.length;f++){var h=i[f],v=this._lastCpus[f],m="% cpu("+f+") ",g=h.model,y=h.speed,b=h.times,S=v.times,T=b.user-S.user||0;n+=T;var O=b.sys-S.sys||0;a+=O;var D=b.nice-S.nice||0;l+=D;var M=b.idle-S.idle||0;p+=M;var N=b.irq-S.irq||0;u+=N}var L=void 0;if(typeof process.cpuUsage=="function"){var B=process.cpuUsage(),F=process.hrtime(),z=B.user-this._lastAppCpuUsage.user+(B.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime!="undefined"&&this._lastHrtime.length===2){var ie=(F[0]-this._lastHrtime[0])*1e6+(F[1]-this._lastHrtime[1])/1e3||0;L=100*z/(ie*i.length)}this._lastAppCpuUsage=B,this._lastHrtime=F}var ee=n+a+l+p+u||1;this._client.trackMetric({name:o.PerformanceCounter.PROCESSOR_TIME,value:(ee-p)/ee*100}),this._client.trackMetric({name:o.PerformanceCounter.PROCESS_TIME,value:L||n/ee*100})}this._lastCpus=i},s.prototype._trackMemory=function(){var i=t.freemem(),n=process.memoryUsage().rss,a=t.totalmem()-i;this._client.trackMetric({name:o.PerformanceCounter.PRIVATE_BYTES,value:n}),this._client.trackMetric({name:o.PerformanceCounter.AVAILABLE_BYTES,value:i}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:o.QuickPulseCounter.COMMITTED_BYTES,value:a})},s.prototype._trackNetwork=function(){var i=this._lastRequests,n={totalRequestCount:s._totalRequestCount,totalFailedRequestCount:s._totalFailedRequestCount,time:+new Date},a=n.totalRequestCount-i.totalRequestCount||0,l=n.totalFailedRequestCount-i.totalFailedRequestCount||0,p=n.time-i.time,u=p/1e3,f=(s._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/a||0;if(this._lastIntervalRequestExecutionTime=s._intervalRequestExecutionTime,p>0){var h=a/u,v=l/u;this._client.trackMetric({name:o.PerformanceCounter.REQUEST_RATE,value:h}),(!this._enableLiveMetricsCounters||a>0)&&this._client.trackMetric({name:o.PerformanceCounter.REQUEST_DURATION,value:f}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:o.QuickPulseCounter.REQUEST_FAILURE_RATE,value:v})}this._lastRequests=n},s.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var i=this._lastDependencies,n={totalDependencyCount:s._totalDependencyCount,totalFailedDependencyCount:s._totalFailedDependencyCount,time:+new Date},a=n.totalDependencyCount-i.totalDependencyCount||0,l=n.totalFailedDependencyCount-i.totalFailedDependencyCount||0,p=n.time-i.time,u=p/1e3,f=(s._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/a||0;if(this._lastIntervalDependencyExecutionTime=s._intervalDependencyExecutionTime,p>0){var h=a/u,v=l/u;this._client.trackMetric({name:o.QuickPulseCounter.DEPENDENCY_RATE,value:h}),this._client.trackMetric({name:o.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:v}),(!this._enableLiveMetricsCounters||a>0)&&this._client.trackMetric({name:o.QuickPulseCounter.DEPENDENCY_DURATION,value:f})}this._lastDependencies=n}},s.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var i=this._lastExceptions,n={totalExceptionCount:s._totalExceptionCount,time:+new Date},a=n.totalExceptionCount-i.totalExceptionCount||0,l=n.time-i.time,p=l/1e3;if(l>0){var u=a/p;this._client.trackMetric({name:o.QuickPulseCounter.EXCEPTION_RATE,value:u})}this._lastExceptions=n}},s.prototype.dispose=function(){s.INSTANCE=null,this.enable(!1),this._isInitialized=!1},s._totalRequestCount=0,s._totalFailedRequestCount=0,s._totalDependencyCount=0,s._totalFailedDependencyCount=0,s._totalExceptionCount=0,s._intervalDependencyExecutionTime=0,s._intervalRequestExecutionTime=0,s}();r.exports=c}),fl=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AggregatedMetricCounter=void 0;var r=function(){function t(o){this.dimensions=o,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return t}();e.AggregatedMetricCounter=r}),hl=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PreaggregatedMetricPropertyNames=void 0,e.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}}),yo=C((e,r)=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(n){for(var a,l=1,p=arguments.length;l<p;l++){a=arguments[l];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])}return n},t.apply(this,arguments)},o=gt(),c=fl(),s=hl(),i=function(){function n(a,l){l===void 0&&(l=6e4),n.INSTANCE||(n.INSTANCE=this),this._isInitialized=!1,n._dependencyCountersCollection=[],n._requestCountersCollection=[],n._exceptionCountersCollection=[],n._traceCountersCollection=[],this._client=a,this._collectionInterval=l}return n.prototype.enable=function(a,l){var p=this;this._isEnabled=a,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),a?this._handle||(this._collectionInterval=l||this._collectionInterval,this._handle=setInterval(function(){return p.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},n.countException=function(a){if(n.isEnabled()){var l=n._getAggregatedCounter(a,this._exceptionCountersCollection);l.totalCount++}},n.countTrace=function(a){if(n.isEnabled()){var l=n._getAggregatedCounter(a,this._traceCountersCollection);l.totalCount++}},n.countRequest=function(a,l){if(n.isEnabled()){var p,u=n._getAggregatedCounter(l,this._requestCountersCollection);if(typeof a=="string")p=+new Date("1970-01-01T"+a+"Z");else if(typeof a=="number")p=a;else return;u.intervalExecutionTime+=p,u.totalCount++}},n.countDependency=function(a,l){if(n.isEnabled()){var p=n._getAggregatedCounter(l,this._dependencyCountersCollection),u;if(typeof a=="string")u=+new Date("1970-01-01T"+a+"Z");else if(typeof a=="number")u=a;else return;p.intervalExecutionTime+=u,p.totalCount++}},n.prototype.isInitialized=function(){return this._isInitialized},n.isEnabled=function(){return n.INSTANCE&&n.INSTANCE._isEnabled},n.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},n._getAggregatedCounter=function(a,l){for(var p=!1,u=0;u<l.length;u++){if(a===l[u].dimensions)return l[u];if(Object.keys(a).length===Object.keys(l[u].dimensions).length){for(var f in a)if(a[f]!=l[u].dimensions[f]){p=!0;break}if(!p)return l[u];p=!1}}var h=new c.AggregatedMetricCounter(a);return l.push(h),h},n.prototype._trackRequestMetrics=function(){for(var a=0;a<n._requestCountersCollection.length;a++){var l=n._requestCountersCollection[a];l.time=+new Date;var p=l.totalCount-l.lastTotalCount||0,u=l.time-l.lastTime,f=(l.intervalExecutionTime-l.lastIntervalExecutionTime)/p||0;l.lastIntervalExecutionTime=l.intervalExecutionTime,u>0&&p>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:l.dimensions,value:f,count:p,aggregationInterval:u,metricType:o.MetricId.REQUESTS_DURATION}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},n.prototype._trackDependencyMetrics=function(){for(var a=0;a<n._dependencyCountersCollection.length;a++){var l=n._dependencyCountersCollection[a];l.time=+new Date;var p=l.totalCount-l.lastTotalCount||0,u=l.time-l.lastTime,f=(l.intervalExecutionTime-l.lastIntervalExecutionTime)/p||0;l.lastIntervalExecutionTime=l.intervalExecutionTime,u>0&&p>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:l.dimensions,value:f,count:p,aggregationInterval:u,metricType:o.MetricId.DEPENDENCIES_DURATION}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},n.prototype._trackExceptionMetrics=function(){for(var a=0;a<n._exceptionCountersCollection.length;a++){var l=n._exceptionCountersCollection[a],p=l.totalCount-l.lastTotalCount||0,u=l.time-l.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:l.dimensions,value:p,count:p,aggregationInterval:u,metricType:o.MetricId.EXCEPTIONS_COUNT}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},n.prototype._trackTraceMetrics=function(){for(var a=0;a<n._traceCountersCollection.length;a++){var l=n._traceCountersCollection[a],p=l.totalCount-l.lastTotalCount||0,u=l.time-l.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:l.dimensions,value:p,count:p,aggregationInterval:u,metricType:o.MetricId.TRACES_COUNT}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},n.prototype._trackPreAggregatedMetric=function(a){var l={};for(var p in a.dimensions)l[s.PreaggregatedMetricPropertyNames[p]]=a.dimensions[p];l=t(t({},l),{"_MS.MetricId":a.metricType,"_MS.AggregationIntervalMs":String(a.aggregationInterval),"_MS.IsAutocollected":"True"});var u={name:a.name,value:a.value,count:a.count,properties:l,kind:"Aggregation"};this._client.trackMetric(u)},n.prototype.dispose=function(){n.INSTANCE=null,this.enable(!1),this._isInitialized=!1},n}();r.exports=i}),Sr=C((e,r)=>{"use strict";var t=require("os"),o=require("fs"),c=require("path"),s=Ge(),i=qe(),n=function(){function a(l){this.keys=new s.ContextTagKeys,this.tags={},this._loadApplicationContext(l),this._loadDeviceContext(),this._loadInternalContext()}return a.prototype._loadApplicationContext=function(l){if(l=l||c.resolve(__dirname,"../../../../package.json"),!a.appVersion[l]){a.appVersion[l]="unknown";try{var p=JSON.parse(o.readFileSync(l,"utf8"));p&&typeof p.version=="string"&&(a.appVersion[l]=p.version)}catch(u){i.info("unable to read app version: ",u)}}this.tags[this.keys.applicationVersion]=a.appVersion[l]},a.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=t&&t.hostname(),this.tags[this.keys.deviceOSVersion]=t&&t.type()+" "+t.release(),this.tags[this.keys.cloudRole]=a.DefaultRoleName,this.tags["ai.device.osArchitecture"]=t&&t.arch(),this.tags["ai.device.osPlatform"]=t&&t.platform()},a.prototype._loadInternalContext=function(){var l=c.resolve(__dirname,"../../package.json");if(!a.sdkVersion){a.sdkVersion="unknown";try{var p=JSON.parse(o.readFileSync(l,"utf8"));p&&typeof p.version=="string"&&(a.sdkVersion=p.version)}catch(u){i.info("unable to read app version: ",u)}}this.tags[this.keys.internalSdkVersion]="node:"+a.sdkVersion},a.DefaultRoleName="Web",a.appVersion={},a.sdkVersion=null,a}();r.exports=n}),vl=C((e,r)=>{"use strict";var t=e&&e.__extends||function(){var p=function(u,f){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var m in v)Object.prototype.hasOwnProperty.call(v,m)&&(h[m]=v[m])},p(u,f)};return function(u,f){p(u,f);function h(){this.constructor=u}u.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}}(),o=require("url"),c=Ge(),s=et(),i=cr(),n=ho(),a=Kt(),l=function(p){t(u,p);function u(f,h){var v=p.call(this)||this;return h&&h.method&&f&&(v.method=h.method,v.url=u._getUrlFromRequestOptions(f,h),v.startTime=+new Date),v}return u.prototype.onError=function(f){this._setStatus(void 0,f)},u.prototype.onResponse=function(f){this._setStatus(f.statusCode,void 0),this.correlationId=s.getCorrelationContextTarget(f,i.requestContextTargetKey)},u.prototype.getDependencyTelemetry=function(f,h){var v=o.parse(this.url);v.search=void 0,v.hash=void 0;var m=this.method.toUpperCase()+" "+v.pathname,g=c.RemoteDependencyDataConstants.TYPE_HTTP,y=v.hostname;v.port&&(y+=":"+v.port),this.correlationId?(g=c.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==a.correlationIdPrefix&&(y+=" | "+this.correlationId)):g=c.RemoteDependencyDataConstants.TYPE_HTTP;var b={id:h,name:m,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:g,target:y};if(f&&f.time?b.time=f.time:this.startTime&&(b.time=new Date(this.startTime)),f){for(var S in f)b[S]||(b[S]=f[S]);if(f.properties)for(var S in f.properties)b.properties[S]=f.properties[S]}return b},u._getUrlFromRequestOptions=function(f,h){if(typeof f=="string")if(f.indexOf("http://")===0||f.indexOf("https://")===0)f=o.parse(f);else{var v=o.parse(f);v.host==="443"?f=o.parse("https://"+f):f=o.parse("http://"+f)}else{if(f&&typeof o.URL=="function"&&f instanceof o.URL)return o.format(f);var m=f;f={},m&&Object.keys(m).forEach(function(b){f[b]=m[b]})}if(f.path){var g=o.parse(f.path);f.pathname=g.pathname,f.search=g.search}if(f.host&&f.port){var y=o.parse("http://"+f.host);!y.port&&f.port&&(f.hostname=f.host,delete f.host)}return f.protocol=f.protocol||h.agent&&h.agent.protocol||h.protocol||void 0,f.hostname=f.hostname||"localhost",o.format(f)},u}(n);r.exports=l}),ml=C(e=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(i){for(var n,a=1,l=arguments.length;a<l;a++){n=arguments[a];for(var p in n)Object.prototype.hasOwnProperty.call(n,p)&&(i[p]=n[p])}return i},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.spanToTelemetryContract=void 0;var t=we(),o=gt();function c(i){var n=r({},i);return Object.keys(o.SpanAttribute).forEach(function(a){delete n[a]}),n}function s(i){var n="|"+i.spanContext().traceId+"."+i.spanContext().spanId+".",a=Math.round(i._duration[0]*1e3+i._duration[1]/1e6),l=i.attributes["peer.address"]?i.attributes["peer.address"].toString():"",p=i.attributes.component?i.attributes.component.toString():"",u=p.toUpperCase()===o.DependencyTypeName.Http||!!i.attributes[o.SpanAttribute.HttpUrl],f=p.toLowerCase()===o.DependencyTypeName.Grpc;if(u){var h=i.attributes[o.SpanAttribute.HttpMethod]||"GET",v=new URL(i.attributes[o.SpanAttribute.HttpUrl].toString()),m=i.attributes[o.SpanAttribute.HttpHost]||v.host,g=i.attributes[o.SpanAttribute.HttpPort]||v.port||null,y=v.pathname||"/",b=h+" "+y,S=o.DependencyTypeName.Http,T=g?(m+":"+g).toString():m.toString(),O=v.toString(),D=i.attributes[o.SpanAttribute.HttpStatusCode]||i.status.code||0,M=D<400;return{id:n,name:b,dependencyTypeName:S,target:T,data:O,success:M,duration:a,url:O,resultCode:String(D),properties:c(i.attributes)}}else if(f){var h=i.attributes[o.SpanAttribute.GrpcMethod]||"rpc",N=i.attributes[o.SpanAttribute.GrpcService],L=N?h+" "+N:i.name;return{id:n,duration:a,name:L,target:N.toString(),data:N.toString()||L,url:N.toString()||L,dependencyTypeName:o.DependencyTypeName.Grpc,resultCode:String(i.status.code||0),success:i.status.code===0,properties:c(i.attributes)}}else{var B=i.name,F=i.links&&i.links.map(function(z){return{operation_Id:z.context.traceId,id:z.context.spanId}});return{id:n,duration:a,name:B,target:l,data:l||B,url:l||B,dependencyTypeName:i.kind===t.SpanKind.INTERNAL?o.DependencyTypeName.InProc:p||i.name,resultCode:String(i.status.code||0),success:i.status.code===0,properties:r(r({},c(i.attributes)),{"_MS.links":F||void 0})}}}e.spanToTelemetryContract=s}),_l=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var r=we(),t=Me(),o=Tr(),c=ml(),s=Mi(),i=[],n=function(l){var p=l.data,u=c.spanToTelemetryContract(p),f=p.spanContext(),h=new o;h.traceId=f.traceId,h.spanId=f.spanId,h.traceFlag=o.formatOpenTelemetryTraceFlags(f.traceFlags),h.parentId=p.parentSpanId?"|"+f.traceId+"."+p.parentSpanId+".":null,s.AsyncScopeManager.with(p,function(){i.forEach(function(v){p.kind===r.SpanKind.SERVER?v.trackRequest(u):(p.kind===r.SpanKind.CLIENT||p.kind===r.SpanKind.INTERNAL)&&v.trackDependency(u)})})};e.subscriber=n;function a(l,p){l?(i.length===0&&t.channel.subscribe("azure-coretracing",e.subscriber),i.push(p)):(i=i.filter(function(u){return u!=p}),i.length===0&&t.channel.unsubscribe("azure-coretracing",e.subscriber))}e.enable=a}),gl=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var r=Me(),t=[],o=function(s){s.data.event.commandName!=="ismaster"&&t.forEach(function(i){var n=s.data.startedData&&s.data.startedData.databaseName||"Unknown database";i.trackDependency({target:n,data:s.data.event.commandName,name:s.data.event.commandName,duration:s.data.event.duration,success:s.data.succeeded,resultCode:s.data.succeeded?"0":"1",time:s.data.startedData.time,dependencyTypeName:"mongodb"})})};e.subscriber=o;function c(s,i){s?(t.length===0&&r.channel.subscribe("mongodb",e.subscriber),t.push(i)):(t=t.filter(function(n){return n!=i}),t.length===0&&r.channel.unsubscribe("mongodb",e.subscriber))}e.enable=c}),yl=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var r=Me(),t=[],o=function(s){t.forEach(function(i){var n=s.data.query||{},a=n.sql||"Unknown query",l=!s.data.err,p=n._connection||{},u=p.config||{},f=u.socketPath?u.socketPath:(u.host||"localhost")+":"+u.port;i.trackDependency({target:f,data:a,name:a,duration:s.data.duration,success:l,resultCode:l?"0":"1",time:s.data.time,dependencyTypeName:"mysql"})})};e.subscriber=o;function c(s,i){s?(t.length===0&&r.channel.subscribe("mysql",e.subscriber),t.push(i)):(t=t.filter(function(n){return n!=i}),t.length===0&&r.channel.unsubscribe("mysql",e.subscriber))}e.enable=c}),El=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var r=Me(),t=[],o=function(s){t.forEach(function(i){s.data.commandObj.command!=="info"&&i.trackDependency({target:s.data.address,name:s.data.commandObj.command,data:s.data.commandObj.command,duration:s.data.duration,success:!s.data.err,resultCode:s.data.err?"1":"0",time:s.data.time,dependencyTypeName:"redis"})})};e.subscriber=o;function c(s,i){s?(t.length===0&&r.channel.subscribe("redis",e.subscriber),t.push(i)):(t=t.filter(function(n){return n!=i}),t.length===0&&r.channel.unsubscribe("redis",e.subscriber))}e.enable=c}),bl=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var r=Me(),t=[],o=function(s){t.forEach(function(i){var n=s.data.query,a=n.preparable&&n.preparable.text||n.plan||n.text||"unknown query",l=!s.data.error,p=s.data.database.host+":"+s.data.database.port;i.trackDependency({target:p,data:a,name:a,duration:s.data.duration,success:l,resultCode:l?"0":"1",time:s.data.time,dependencyTypeName:"postgres"})})};e.subscriber=o;function c(s,i){s?(t.length===0&&r.channel.subscribe("postgres",e.subscriber),t.push(i)):(t=t.filter(function(n){return n!=i}),t.length===0&&r.channel.unsubscribe("postgres",e.subscriber))}e.enable=c}),ur=C((e,r)=>{"use strict";var t=e&&e.__spreadArrays||function(){for(var v=0,m=0,g=arguments.length;m<g;m++)v+=arguments[m].length;for(var y=Array(v),b=0,m=0;m<g;m++)for(var S=arguments[m],T=0,O=S.length;T<O;T++,b++)y[b]=S[T];return y},o=require("http"),c=require("https"),s=qe(),i=et(),n=cr(),a=vl(),l=Yt(),p=Kt(),u=Tr(),f=dn(),h=function(){function v(m){if(v.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");v.INSTANCE=this,this._client=m}return v.prototype.enable=function(m){this._isEnabled=m,this._isEnabled&&!this._isInitialized&&this._initialize(),f.IsInitialized&&(_l().enable(!0,this._client),gl().enable(m,this._client),yl().enable(m,this._client),El().enable(m,this._client),bl().enable(m,this._client))},v.prototype.isInitialized=function(){return this._isInitialized},v.prototype._initialize=function(){var m=this;this._isInitialized=!0;var g=o.request,y=c.request,b=function(S,T){var O=!T[v.disableCollectionRequestOption]&&!S[v.alreadyAutoCollectedFlag];T.headers&&T.headers["user-agent"]&&T.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(O=!1),S[v.alreadyAutoCollectedFlag]=!0,S&&T&&O&&(l.CorrelationContextManager.wrapEmitter(S),v.trackRequest(m._client,{options:T,request:S}))};o.request=function(S){for(var T=[],O=1;O<arguments.length;O++)T[O-1]=arguments[O];var D=g.call.apply(g,t([o,S],T));return b(D,S),D},c.request=function(S){for(var T=[],O=1;O<arguments.length;O++)T[O-1]=arguments[O];var D=y.call.apply(y,t([c,S],T));return b(D,S),D},o.get=function(S){for(var T,O=[],D=1;D<arguments.length;D++)O[D-1]=arguments[D];var M=(T=o.request).call.apply(T,t([o,S],O));return M.end(),M},c.get=function(S){for(var T,O=[],D=1;D<arguments.length;D++)O[D-1]=arguments[D];var M=(T=c.request).call.apply(T,t([c,S],O));return M.end(),M}},v.trackRequest=function(m,g){if(!g.options||!g.request||!m){s.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!g.options,!g.request,!m);return}var y=new a(g.options,g.request),b=l.CorrelationContextManager.getCurrentContext(),S,T;if(b&&b.operation&&b.operation.traceparent&&u.isValidTraceId(b.operation.traceparent.traceId))b.operation.traceparent.updateSpanId(),S=b.operation.traceparent.getBackCompatRequestId();else if(p.w3cEnabled){var O=new u;T=O.toString(),S=O.getBackCompatRequestId()}else S=b&&b.operation&&b.operation.parentId+v.requestNumber+++".";if(i.canIncludeCorrelationHeader(m,y.getUrl())&&g.request.getHeader&&g.request.setHeader&&m.config&&m.config.correlationId){var D=g.request.getHeader(n.requestContextHeader);try{i.safeIncludeCorrelationHeader(m,g.request,D)}catch(L){s.warn("Request-Context header could not be set. Correlation of requests may be lost",L)}if(b&&b.operation)try{if(g.request.setHeader(n.requestIdHeader,S),m.config.ignoreLegacyHeaders||(g.request.setHeader(n.parentIdHeader,b.operation.id),g.request.setHeader(n.rootIdHeader,S)),T||b.operation.traceparent)g.request.setHeader(n.traceparentHeader,T||b.operation.traceparent.toString());else if(p.w3cEnabled){var O=new u().toString();g.request.setHeader(n.traceparentHeader,O)}if(b.operation.tracestate){var M=b.operation.tracestate.toString();M&&g.request.setHeader(n.traceStateHeader,M)}var N=b.customProperties.serializeToHeader();N&&g.request.setHeader(n.correlationContextHeader,N)}catch(L){s.warn("Correlation headers could not be set. Correlation of requests may be lost.",L)}}g.request.on&&(g.request.on("response",function(L){y.onResponse(L);var B=y.getDependencyTelemetry(g,S);B.contextObjects=B.contextObjects||{},B.contextObjects["http.RequestOptions"]=g.options,B.contextObjects["http.ClientRequest"]=g.request,B.contextObjects["http.ClientResponse"]=L,m.trackDependency(B)}),g.request.on("error",function(L){y.onError(L);var B=y.getDependencyTelemetry(g,S);B.contextObjects=B.contextObjects||{},B.contextObjects["http.RequestOptions"]=g.options,B.contextObjects["http.ClientRequest"]=g.request,B.contextObjects.Error=L,m.trackDependency(B)}),g.request.on("abort",function(){y.onError(new Error);var L=y.getDependencyTelemetry(g,S);L.contextObjects=L.contextObjects||{},L.contextObjects["http.RequestOptions"]=g.options,L.contextObjects["http.ClientRequest"]=g.request,m.trackDependency(L)}))},v.prototype.dispose=function(){v.INSTANCE=null,this.enable(!1),this._isInitialized=!1},v.disableCollectionRequestOption="disableAppInsightsAutoCollection",v.requestNumber=1,v.alreadyAutoCollectedFlag="_appInsightsAutoCollected",v}();r.exports=h}),Tl=C((e,r)=>{"use strict";var t=require("os"),o=gt(),c=et(),s=Sr(),i=ur(),n="http://169.254.169.254/metadata/instance/compute",a="api-version=2017-12-01",l="format=json",p="ENETUNREACH",u=function(){function f(h){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",f.INSTANCE||(f.INSTANCE=this),this._isInitialized=!1,this._client=h}return f.prototype.enable=function(h,v){var m=this;this._isEnabled=h,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),h?this._handle||(this._handle=setInterval(function(){return m.trackHeartBeat(v,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},f.prototype.isInitialized=function(){return this._isInitialized},f.isEnabled=function(){return f.INSTANCE&&f.INSTANCE._isEnabled},f.prototype.trackHeartBeat=function(h,v){var m=this,g=!1,y={},b=s.sdkVersion;y.sdk=b,y.osType=t.type(),process.env.WEBSITE_SITE_NAME?(y.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",y.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",y.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?y.azfunction_appId=process.env.WEBSITE_HOSTNAME:h&&(this._isVM===void 0?(g=!0,this._getAzureComputeMetadata(h,function(){m._isVM&&Object.keys(m._vmData).length>0&&(y.azInst_vmId=m._vmData.vmId||"",y.azInst_subscriptionId=m._vmData.subscriptionId||"",y.azInst_osType=m._vmData.osType||"",m._azInst_vmId=m._vmData.vmId||"",m._azInst_subscriptionId=m._vmData.subscriptionId||"",m._azInst_osType=m._vmData.osType||""),m._client.trackMetric({name:o.HeartBeatMetricName,value:0,properties:y}),v()})):this._isVM&&(y.azInst_vmId=this._azInst_vmId,y.azInst_subscriptionId=this._azInst_subscriptionId,y.azInst_osType=this._azInst_osType)),g||(this._client.trackMetric({name:o.HeartBeatMetricName,value:0,properties:y}),v())},f.prototype.dispose=function(){f.INSTANCE=null,this.enable(!1),this._isInitialized=!1},f.prototype._getAzureComputeMetadata=function(h,v){var m,g=this,y=n+"?"+a+"&"+l,b=(m={method:"GET"},m[i.disableCollectionRequestOption]=!0,m.headers={Metadata:"True"},m),S=c.makeRequest(h,y,b,function(T){if(T.statusCode===200){g._isVM=!0;var O="";T.on("data",function(D){O+=D}),T.on("end",function(){g._vmData=g._isJSON(O)?JSON.parse(O):{},v()})}else v()});S&&(S.on("error",function(T){T&&T.message&&T.message.indexOf(p)>-1&&(g._isVM=!1),v()}),S.end())},f.prototype._isJSON=function(h){try{return JSON.parse(h)&&!!h}catch{return!1}},f}();r.exports=u}),Eo=C((e,r)=>{"use strict";var t=require("http"),o=require("https"),c=qe(),s=et(),i=cr(),n=vo(),a=Yt(),l=vn(),p=function(){function u(f){if(u.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");u.INSTANCE=this,this._client=f}return u.prototype.enable=function(f){this._isEnabled=f,(this._isAutoCorrelating||this._isEnabled||l.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},u.prototype.useAutoCorrelation=function(f,h){f&&!this._isAutoCorrelating?a.CorrelationContextManager.enable(h):!f&&this._isAutoCorrelating&&a.CorrelationContextManager.disable(),this._isAutoCorrelating=f},u.prototype.isInitialized=function(){return this._isInitialized},u.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},u.prototype._generateCorrelationContext=function(f){if(this._isAutoCorrelating)return a.CorrelationContextManager.generateContextObject(f.getOperationId(this._client.context.tags),f.getRequestId(),f.getOperationName(this._client.context.tags),f.getCorrelationContextHeader(),f.getTraceparent(),f.getTracestate())},u.prototype._initialize=function(){var f=this;this._isInitialized=!0;var h=function(y){if(y){if(typeof y!="function")throw new Error("onRequest handler must be a function");return function(b,S){a.CorrelationContextManager.wrapEmitter(b),a.CorrelationContextManager.wrapEmitter(S);var T=b&&!b[u.alreadyAutoCollectedFlag];if(b&&T){var O=new n(b),D=f._generateCorrelationContext(O);a.CorrelationContextManager.runWithContext(D,function(){f._isEnabled&&(b[u.alreadyAutoCollectedFlag]=!0,u.trackRequest(f._client,{request:b,response:S},O)),typeof y=="function"&&y(b,S)})}else typeof y=="function"&&y(b,S)}}},v=function(y){var b=y.addListener.bind(y);y.addListener=function(S,T){switch(S){case"request":case"checkContinue":return b(S,h(T));default:return b(S,T)}},y.on=y.addListener},m=t.createServer;t.createServer=function(y,b){if(b&&typeof b=="function"){var S=m(y,h(b));return v(S),S}else{var S=m(h(y));return v(S),S}};var g=o.createServer;o.createServer=function(y,b){var S=g(y,h(b));return v(S),S}},u.trackRequestSync=function(f,h){if(!h.request||!h.response||!f){c.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!h.request,!h.response,!f);return}u.addResponseCorrelationIdHeader(f,h.response);var v=a.CorrelationContextManager.getCurrentContext(),m=new n(h.request,v&&v.operation.parentId);v&&(v.operation.id=m.getOperationId(f.context.tags)||v.operation.id,v.operation.name=m.getOperationName(f.context.tags)||v.operation.name,v.operation.parentId=m.getRequestId()||v.operation.parentId,v.customProperties.addHeaderData(m.getCorrelationContextHeader())),u.endRequest(f,m,h,h.duration,h.error)},u.trackRequest=function(f,h,v){if(!h.request||!h.response||!f){c.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!h.request,!h.response,!f);return}var m=a.CorrelationContextManager.getCurrentContext(),g=v||new n(h.request,m&&m.operation.parentId);s.canIncludeCorrelationHeader(f,g.getUrl())&&u.addResponseCorrelationIdHeader(f,h.response),m&&!v&&(m.operation.id=g.getOperationId(f.context.tags)||m.operation.id,m.operation.name=g.getOperationName(f.context.tags)||m.operation.name,m.operation.parentId=g.getOperationParentId(f.context.tags)||m.operation.parentId,m.customProperties.addHeaderData(g.getCorrelationContextHeader())),h.response.once&&h.response.once("finish",function(){u.endRequest(f,g,h,null,null)}),h.request.on&&h.request.on("error",function(y){u.endRequest(f,g,h,null,y)}),h.request.on&&h.request.on("aborted",function(){var y="The request has been aborted and the network socket has closed.";u.endRequest(f,g,h,null,y)})},u.addResponseCorrelationIdHeader=function(f,h){if(f.config&&f.config.correlationId&&h.getHeader&&h.setHeader&&!h.headersSent){var v=h.getHeader(i.requestContextHeader);s.safeIncludeCorrelationHeader(f,h,v)}},u.endRequest=function(f,h,v,m,g){g?h.onError(g,m):h.onResponse(v.response,m);var y=h.getRequestTelemetry(v);if(y.tagOverrides=h.getRequestTags(f.context.tags),v.tagOverrides)for(var b in v.tagOverrides)y.tagOverrides[b]=v.tagOverrides[b];var S=h.getLegacyRootId();S&&(y.properties.ai_legacyRootId=S),y.contextObjects=y.contextObjects||{},y.contextObjects["http.ServerRequest"]=v.request,y.contextObjects["http.ServerResponse"]=v.response,f.trackRequest(y)},u.prototype.dispose=function(){u.INSTANCE=null,this.enable(!1),this._isInitialized=!1,a.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},u.alreadyAutoCollectedFlag="_appInsightsAutoCollected",u}();r.exports=p}),Sl=C((e,r)=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(p){for(var u,f=1,h=arguments.length;f<h;f++){u=arguments[f];for(var v in u)Object.prototype.hasOwnProperty.call(u,v)&&(p[v]=u[v])}return p},t.apply(this,arguments)},o=require("os"),c=Ge(),s=gt(),i=et(),n=qe(),a=i.w3cTraceId(),l=function(){function p(){}return p.createQuickPulseEnvelope=function(u,f,h,v){var m=o&&typeof o.hostname=="function"&&o.hostname()||"Unknown",g=v.tags&&v.keys&&v.keys.cloudRoleInstance&&v.tags[v.keys.cloudRoleInstance]||m,y=v.tags&&v.keys&&v.keys.cloudRole&&v.tags[v.keys.cloudRole]||null,b={Documents:f.length>0?f:null,InstrumentationKey:h.instrumentationKey||"",Metrics:u.length>0?u:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:v.tags[v.keys.internalSdkVersion],StreamId:a,MachineName:m,Instance:g,RoleName:y};return b},p.createQuickPulseMetric=function(u){var f;return f={Name:u.name,Value:u.value,Weight:u.count||1},f},p.telemetryEnvelopeToQuickPulseDocument=function(u){switch(u.data.baseType){case c.TelemetryTypeString.Event:return p.createQuickPulseEventDocument(u);case c.TelemetryTypeString.Exception:return p.createQuickPulseExceptionDocument(u);case c.TelemetryTypeString.Trace:return p.createQuickPulseTraceDocument(u);case c.TelemetryTypeString.Dependency:return p.createQuickPulseDependencyDocument(u);case c.TelemetryTypeString.Request:return p.createQuickPulseRequestDocument(u)}return null},p.createQuickPulseEventDocument=function(u){var f=p.createQuickPulseDocument(u),h=u.data.baseData.name,v=t(t({},f),{Name:h});return v},p.createQuickPulseTraceDocument=function(u){var f=p.createQuickPulseDocument(u),h=u.data.baseData.severityLevel||0,v=t(t({},f),{Message:u.data.baseData.message,SeverityLevel:c.SeverityLevel[h]});return v},p.createQuickPulseExceptionDocument=function(u){var f=p.createQuickPulseDocument(u),h=u.data.baseData.exceptions,v="",m="",g="";h&&h.length>0&&(h[0].parsedStack&&h[0].parsedStack.length>0?h[0].parsedStack.forEach(function(b){v+=b.assembly+`
`}):h[0].stack&&h[0].stack.length>0&&(v=h[0].stack),m=h[0].message,g=h[0].typeName);var y=t(t({},f),{Exception:v,ExceptionMessage:m,ExceptionType:g});return y},p.createQuickPulseRequestDocument=function(u){var f=p.createQuickPulseDocument(u),h=u.data.baseData,v=t(t({},f),{Name:h.name,Success:h.success,Duration:h.duration,ResponseCode:h.responseCode,OperationName:h.name});return v},p.createQuickPulseDependencyDocument=function(u){var f=p.createQuickPulseDocument(u),h=u.data.baseData,v=t(t({},f),{Name:h.name,Target:h.target,Success:h.success,Duration:h.duration,ResultCode:h.resultCode,CommandName:h.data,OperationName:f.OperationId,DependencyTypeName:h.type});return v},p.createQuickPulseDocument=function(u){var f,h,v,m;u.data.baseType?(h=s.TelemetryTypeStringToQuickPulseType[u.data.baseType],f=s.TelemetryTypeStringToQuickPulseDocumentType[u.data.baseType]):n.warn("Document type invalid; not sending live metric document",u.data.baseType),v=u.tags[p.keys.operationId],m=p.aggregateProperties(u);var g={DocumentType:f,__type:h,OperationId:v,Version:"1.0",Properties:m};return g},p.aggregateProperties=function(u){var f=[],h=u.data.baseData.measurements||{};for(var v in h)if(h.hasOwnProperty(v)){var m=h[v],g={key:v,value:m};f.push(g)}var y=u.data.baseData.properties||{};for(var v in y)if(y.hasOwnProperty(v)){var m=y[v],g={key:v,value:m};f.push(g)}return f},p.keys=new c.ContextTagKeys,p}();r.exports=l}),Al=C((e,r)=>{"use strict";var t=function(){return(Date.now()+621355968e5)*1e4};r.exports={getTransmissionTime:t}}),Il=C((e,r)=>{"use strict";var t=e&&e.__awaiter||function(u,f,h,v){function m(g){return g instanceof h?g:new h(function(y){y(g)})}return new(h||(h=Promise))(function(g,y){function b(O){try{T(v.next(O))}catch(D){y(D)}}function S(O){try{T(v.throw(O))}catch(D){y(D)}}function T(O){O.done?g(O.value):m(O.value).then(b,S)}T((v=v.apply(u,f||[])).next())})},o=e&&e.__generator||function(u,f){var h={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},v,m,g,y;return y={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function b(T){return function(O){return S([T,O])}}function S(T){if(v)throw new TypeError("Generator is already executing.");for(;h;)try{if(v=1,m&&(g=T[0]&2?m.return:T[0]?m.throw||((g=m.return)&&g.call(m),0):m.next)&&!(g=g.call(m,T[1])).done)return g;switch(m=0,g&&(T=[T[0]&2,g.value]),T[0]){case 0:case 1:g=T;break;case 4:return h.label++,{value:T[1],done:!1};case 5:h.label++,m=T[1],T=[0];continue;case 7:T=h.ops.pop(),h.trys.pop();continue;default:if(g=h.trys,!(g=g.length>0&&g[g.length-1])&&(T[0]===6||T[0]===2)){h=0;continue}if(T[0]===3&&(!g||T[1]>g[0]&&T[1]<g[3])){h.label=T[1];break}if(T[0]===6&&h.label<g[1]){h.label=g[1],g=T;break}if(g&&h.label<g[2]){h.label=g[2],h.ops.push(T);break}g[2]&&h.ops.pop(),h.trys.pop();continue}T=f.call(u,h)}catch(O){T=[6,O],m=0}finally{v=g=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}},c=require("https"),s=ur(),i=qe(),n=Al(),a=et(),l={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},p=function(){function u(f){this._config=f,this._consecutiveErrors=0}return u.prototype.ping=function(f,h,v){var m=[{name:l.streamId,value:f.StreamId},{name:l.machineName,value:f.MachineName},{name:l.roleName,value:f.RoleName},{name:l.instanceName,value:f.Instance},{name:l.invariantVersion,value:f.InvariantVersion.toString()}];this._submitData(f,h,v,"ping",m)},u.prototype.post=function(f,h,v){return t(this,void 0,void 0,function(){return o(this,function(m){switch(m.label){case 0:return[4,this._submitData([f],h,v,"post")];case 1:return m.sent(),[2]}})})},u.prototype._submitData=function(f,h,v,m,g){return t(this,void 0,void 0,function(){var y,b,S,T,O,D=this;return o(this,function(M){return y=JSON.stringify(f),b=(T={},T[s.disableCollectionRequestOption]=!0,T.host=h&&h.length>0?h:this._config.quickPulseHost,T.method=l.method,T.path="/QuickPulseService.svc/"+m+"?ikey="+this._config.instrumentationKey,T.headers=(O={Expect:"100-continue"},O[l.time]=n.getTransmissionTime(),O["Content-Type"]="application/json",O["Content-Length"]=Buffer.byteLength(y),O),T),g&&g.length>0&&g.forEach(function(N){return b.headers[N.name]=N.value}),this._config.httpsAgent?b.agent=this._config.httpsAgent:b.agent=a.tlsRestrictedAgent,S=c.request(b,function(N){if(N.statusCode==200){var L=N.headers[l.subscribed]==="true",B=N.headers[l.endpointRedirect]?N.headers[l.endpointRedirect].toString():null,F=N.headers[l.pollingIntervalHint]?parseInt(N.headers[l.pollingIntervalHint].toString()):null;D._consecutiveErrors=0,v(L,N,B,F)}else D._onError("StatusCode:"+N.statusCode+" StatusMessage:"+N.statusMessage),v()}),S.on("error",function(N){D._onError(N),v()}),S.write(y),S.end(),[2]})})},u.prototype._onError=function(f){this._consecutiveErrors++;var h="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%u.MAX_QPS_FAILURES_BEFORE_WARN==0?(h="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",i.warn(u.TAG,h,f)):i.info(u.TAG,h,f)},u.TAG="QuickPulseSender",u.MAX_QPS_FAILURES_BEFORE_WARN=25,u}();r.exports=p}),Cl=C((e,r)=>{"use strict";var t=e&&e.__awaiter||function(p,u,f,h){function v(m){return m instanceof f?m:new f(function(g){g(m)})}return new(f||(f=Promise))(function(m,g){function y(T){try{S(h.next(T))}catch(O){g(O)}}function b(T){try{S(h.throw(T))}catch(O){g(O)}}function S(T){T.done?m(T.value):v(T.value).then(y,b)}S((h=h.apply(p,u||[])).next())})},o=e&&e.__generator||function(p,u){var f={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},h,v,m,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(S){return function(T){return b([S,T])}}function b(S){if(h)throw new TypeError("Generator is already executing.");for(;f;)try{if(h=1,v&&(m=S[0]&2?v.return:S[0]?v.throw||((m=v.return)&&m.call(v),0):v.next)&&!(m=m.call(v,S[1])).done)return m;switch(v=0,m&&(S=[S[0]&2,m.value]),S[0]){case 0:case 1:m=S;break;case 4:return f.label++,{value:S[1],done:!1};case 5:f.label++,v=S[1],S=[0];continue;case 7:S=f.ops.pop(),f.trys.pop();continue;default:if(m=f.trys,!(m=m.length>0&&m[m.length-1])&&(S[0]===6||S[0]===2)){f=0;continue}if(S[0]===3&&(!m||S[1]>m[0]&&S[1]<m[3])){f.label=S[1];break}if(S[0]===6&&f.label<m[1]){f.label=m[1],m=S;break}if(m&&f.label<m[2]){f.label=m[2],f.ops.push(S);break}m[2]&&f.ops.pop(),f.trys.pop();continue}S=u.call(p,f)}catch(T){S=[6,T],v=0}finally{h=m=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}},c=qe(),s=Sl(),i=Il(),n=gt(),a=Sr(),l=function(){function p(u,f){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=u,this.context=f||new a,this._sender=new i(this.config),this._isEnabled=!1}return p.prototype.addCollector=function(u){this._collectors.push(u)},p.prototype.trackMetric=function(u){this._addMetric(u)},p.prototype.addDocument=function(u){var f=s.telemetryEnvelopeToQuickPulseDocument(u);f&&this._documents.push(f)},p.prototype.enable=function(u){u&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!u&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},p.prototype.enableCollectors=function(u){this._collectors.forEach(function(f){f.enable(u)})},p.prototype._addMetric=function(u){var f=u.value,h=u.count||1,v=n.PerformanceToQuickPulseCounter[u.name];v&&(this._metrics[v]?(this._metrics[v].Value=(this._metrics[v].Value*this._metrics[v].Weight+f*h)/(this._metrics[v].Weight+h),this._metrics[v].Weight+=h):(this._metrics[v]=s.createQuickPulseMetric(u),this._metrics[v].Name=v,this._metrics[v].Weight=1))},p.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},p.prototype._goQuickPulse=function(){return t(this,void 0,void 0,function(){var u,f,h,v,m=this;return o(this,function(g){switch(g.label){case 0:return u=Object.keys(this._metrics).map(function(y){return m._metrics[y]}),f=s.createQuickPulseEnvelope(u,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(f)]:[3,2];case 1:return g.sent(),[3,3];case 2:this._ping(f),g.label=3;case 3:return h=this._pollingIntervalHint>0?this._pollingIntervalHint:p.PING_INTERVAL,v=this._isCollectingData?p.POST_INTERVAL:h,this._isCollectingData&&Date.now()-this._lastSuccessTime>=p.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,v=p.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=p.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(v=p.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),v),this._handle.unref(),[2]}})})},p.prototype._ping=function(u){this._sender.ping(u,this._redirectedHost,this._quickPulseDone.bind(this))},p.prototype._post=function(u){return t(this,void 0,void 0,function(){return o(this,function(f){switch(f.label){case 0:return[4,this._sender.post(u,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return f.sent(),[2]}})})},p.prototype._quickPulseDone=function(u,f,h,v){u!=null?(this._isCollectingData!==u&&(c.info("Live Metrics sending data",u),this.enableCollectors(u)),this._isCollectingData=u,h&&h.length>0&&(this._redirectedHost=h,c.info("Redirecting endpoint to: ",h)),v&&v>0&&(this._pollingIntervalHint=v),f&&f.statusCode<300&&f.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},p.MAX_POST_WAIT_TIME=2e4,p.MAX_PING_WAIT_TIME=6e4,p.FALLBACK_INTERVAL=6e4,p.PING_INTERVAL=5e3,p.POST_INTERVAL=1e3,p}();r.exports=l}),wl=C((e,r)=>{"use strict";var t=gt(),o=function(){function c(){}return c.parse=function(s){if(!s)return{};var i=s.split(c._FIELDS_SEPARATOR),n=i.reduce(function(l,p){var u=p.split(c._FIELD_KEY_VALUE_SEPARATOR);if(u.length===2){var f=u[0].toLowerCase(),h=u[1];l[f]=h}return l},{});if(Object.keys(n).length>0){if(n.endpointsuffix){var a=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+a+"dc."+n.endpointsuffix,n.liveendpoint=n.liveendpoint||"https://"+a+"live."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||t.DEFAULT_BREEZE_ENDPOINT,n.liveendpoint=n.liveendpoint||t.DEFAULT_LIVEMETRICS_ENDPOINT}return n},c._FIELDS_SEPARATOR=";",c._FIELD_KEY_VALUE_SEPARATOR="=",c}();r.exports=o}),bo=C((e,r)=>{"use strict";var t=Kt(),o=wl(),c=qe(),s=gt(),i=require("url"),n=function(){function a(l){var p=this;this.endpointBase=s.DEFAULT_BREEZE_ENDPOINT;var u=process.env[a.ENV_connectionString],f=o.parse(l),h=o.parse(u),v=!f.instrumentationkey&&Object.keys(f).length>0?null:l;this.instrumentationKey=f.instrumentationkey||v||h.instrumentationkey||a._getInstrumentationKey(),a._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(f.ingestionendpoint||h.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(m){return p.correlationId=m},this.proxyHttpUrl=process.env[a.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[a.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=f.ingestionendpoint||h.ingestionendpoint||process.env[a.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=f.liveendpoint||h.liveendpoint||process.env[a.ENV_quickPulseHost]||s.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=i.parse(this._quickPulseHost).host)}return Object.defineProperty(a.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(l){t.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=l,this.correlationId=t.correlationIdPrefix,t.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(l){this._quickPulseHost=l},enumerable:!1,configurable:!0}),a._getInstrumentationKey=function(){var l=process.env[a.ENV_iKey]||process.env[a.ENV_azurePrefix+a.ENV_iKey]||process.env[a.legacy_ENV_iKey]||process.env[a.ENV_azurePrefix+a.legacy_ENV_iKey];if(!l||l=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return l},a._validateInstrumentationKey=function(l){var p="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",u=new RegExp(p);return u.test(l)},a.ENV_azurePrefix="APPSETTING_",a.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",a.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",a.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",a.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",a.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",a.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",a.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",a.ENV_http_proxy="http_proxy",a.ENV_https_proxy="https_proxy",a}();r.exports=n}),Ol=C(e=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(i){for(var n,a=1,l=arguments.length;a<l;a++){n=arguments[a];for(var p in n)Object.prototype.hasOwnProperty.call(n,p)&&(i[p]=n[p])}return i},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoCollectNativePerformance=void 0;var t=bo(),o=Sr(),c=qe(),s=function(){function i(n){this._disabledMetrics={},i.INSTANCE&&i.INSTANCE.dispose(),i.INSTANCE=this,this._client=n}return i.isNodeVersionCompatible=function(){var n=process.versions.node.split(".");return parseInt(n[0])>=6},i.prototype.enable=function(n,a,l){var p=this;if(a===void 0&&(a={}),l===void 0&&(l=6e4),!!i.isNodeVersionCompatible()){if(i._metricsAvailable==null&&n&&!this._isInitialized)try{var u=require("applicationinsights-native-metrics");i._emitter=new u,i._metricsAvailable=!0,c.info("Native metrics module successfully loaded!")}catch{i._metricsAvailable=!1;return}this._isEnabled=n,this._disabledMetrics=a,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&i._emitter?(i._emitter.enable(!0,l),this._handle||(this._handle=setInterval(function(){return p._trackNativeMetrics()},l),this._handle.unref())):i._emitter&&(i._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},i.prototype.dispose=function(){this.enable(!1)},i.parseEnabled=function(n){var a=process.env[t.ENV_nativeMetricsDisableAll],l=process.env[t.ENV_nativeMetricsDisablers];if(a)return{isEnabled:!1,disabledMetrics:{}};if(l){var p=l.split(","),u={};if(p.length>0)for(var f=0,h=p;f<h.length;f++){var v=h[f];u[v]=!0}return typeof n=="object"?{isEnabled:!0,disabledMetrics:r(r({},n),u)}:{isEnabled:n,disabledMetrics:u}}return typeof n=="boolean"?{isEnabled:n,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:n}},i.prototype._trackNativeMetrics=function(){var n=!0;typeof this._isEnabled!="object"&&(n=this._isEnabled),n&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},i.prototype._trackGarbageCollection=function(){var n;if(!this._disabledMetrics.gc){var a=i._emitter.getGCData();for(var l in a){var p=a[l].metrics,u=l+" Garbage Collection Duration",f=Math.sqrt(p.sumSquares/p.count-Math.pow(p.total/p.count,2))||0;this._client.trackMetric({name:u,value:p.total,count:p.count,max:p.max,min:p.min,stdDev:f,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+o.sdkVersion,n)})}}},i.prototype._trackEventLoop=function(){var n;if(!this._disabledMetrics.loop){var a=i._emitter.getLoopData(),l=a.loopUsage;if(l.count!=0){var p="Event Loop CPU Time",u=Math.sqrt(l.sumSquares/l.count-Math.pow(l.total/l.count,2))||0;this._client.trackMetric({name:p,value:l.total,count:l.count,min:l.min,max:l.max,stdDev:u,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+o.sdkVersion,n)})}}},i.prototype._trackHeapUsage=function(){var n,a,l;if(!this._disabledMetrics.heap){var p=process.memoryUsage(),u=p.heapUsed,f=p.heapTotal,h=p.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:u,count:1,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+o.sdkVersion,n)}),this._client.trackMetric({name:"Memory Total (Heap)",value:f,count:1,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+o.sdkVersion,a)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:h-f,count:1,tagOverrides:(l={},l[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+o.sdkVersion,l)})}},i}();e.AutoCollectNativePerformance=s}),Pl=C((e,r)=>{"use strict";var t=qe(),o=function(){function c(s,i,n,a){this._buffer=[],this._lastSend=0,this._isDisabled=s,this._getBatchSize=i,this._getBatchIntervalMs=n,this._sender=a}return c.prototype.setUseDiskRetryCaching=function(s,i,n){this._sender.setDiskRetryMode(s,i,n)},c.prototype.send=function(s){var i=this;if(!this._isDisabled()){if(!s){t.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(s),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){i._timeoutHandle=null,i.triggerSend(!1)},this._getBatchIntervalMs()))}},c.prototype.triggerSend=function(s,i){var n=this._buffer.length<1;n||(s?(this._sender.saveOnCrash(this._buffer),typeof i=="function"&&i("data saved on crash")):this._sender.send(this._buffer,i)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&typeof i=="function"&&i("no data to send")},c}();r.exports=o}),Rl=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.azureRoleEnvironmentTelemetryProcessor=void 0;function r(t,o){process.env.WEBSITE_SITE_NAME&&(t.tags[o.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}e.azureRoleEnvironmentTelemetryProcessor=r}),xl=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSamplingHashCode=e.samplingTelemetryProcessor=void 0;var r=Ge();function t(c,s){var i=c.sampleRate,n=!1;return i==null||i>=100||c.data&&r.TelemetryType.Metric===r.baseTypeToTelemetryType(c.data.baseType)?!0:(s.correlationContext&&s.correlationContext.operation?n=o(s.correlationContext.operation.id)<i:n=Math.random()*100<i,n)}e.samplingTelemetryProcessor=t;function o(c){var s=-2147483648,i=2147483647,n=5381;if(!c)return 0;for(;c.length<8;)c=c+c;for(var a=0;a<c.length;a++)n=((n<<5)+n|0)+c.charCodeAt(a)|0;return n=n<=s?i:Math.abs(n),n/i*100}e.getSamplingHashCode=o}),Dl=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.performanceMetricsTelemetryProcessor=void 0;var r=vn(),t=Ge();function o(c,s){switch(s&&s.addDocument(c),c.data.baseType){case t.TelemetryTypeString.Exception:r.countException();break;case t.TelemetryTypeString.Request:var i=c.data.baseData;r.countRequest(i.duration,i.success);break;case t.TelemetryTypeString.Dependency:var n=c.data.baseData;r.countDependency(n.duration,n.success);break}return!0}e.performanceMetricsTelemetryProcessor=o}),Nl=C(e=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(i){for(var n,a=1,l=arguments.length;a<l;a++){n=arguments[a];for(var p in n)Object.prototype.hasOwnProperty.call(n,p)&&(i[p]=n[p])}return i},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.preAggregatedMetricsTelemetryProcessor=void 0;var t=Ge(),o=yo(),c=Ge();function s(i,n){if(o.isEnabled())switch(i.data.baseType){case c.TelemetryTypeString.Exception:var a=i.data.baseData;a.properties=r(r({},a.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var l={cloudRoleInstance:i.tags[n.keys.cloudRoleInstance],cloudRoleName:i.tags[n.keys.cloudRole]};o.countException(l);break;case c.TelemetryTypeString.Trace:var p=i.data.baseData;p.properties=r(r({},p.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var u={cloudRoleInstance:i.tags[n.keys.cloudRoleInstance],cloudRoleName:i.tags[n.keys.cloudRole],traceSeverityLevel:t.SeverityLevel[p.severity]};o.countTrace(u);break;case c.TelemetryTypeString.Request:var f=i.data.baseData;f.properties=r(r({},f.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var h={cloudRoleInstance:i.tags[n.keys.cloudRoleInstance],cloudRoleName:i.tags[n.keys.cloudRole],operationSynthetic:i.tags[n.keys.operationSyntheticSource],requestSuccess:f.success,requestResultCode:f.responseCode};o.countRequest(f.duration,h);break;case c.TelemetryTypeString.Dependency:var v=i.data.baseData;v.properties=r(r({},v.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var m={cloudRoleInstance:i.tags[n.keys.cloudRoleInstance],cloudRoleName:i.tags[n.keys.cloudRole],operationSynthetic:i.tags[n.keys.operationSyntheticSource],dependencySuccess:v.success,dependencyType:v.type,dependencyTarget:v.target,dependencyResultCode:v.resultCode};o.countDependency(v.duration,m);break}return!0}e.preAggregatedMetricsTelemetryProcessor=s}),Ml=C(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(o,c,s,i){i===void 0&&(i=s),Object.defineProperty(o,i,{enumerable:!0,get:function(){return c[s]}})}:function(o,c,s,i){i===void 0&&(i=s),o[i]=c[s]}),t=e&&e.__exportStar||function(o,c){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&r(c,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),t(Rl(),e),t(xl(),e),t(Dl(),e),t(Nl(),e)}),kl=C((e,r)=>{"use strict";var t=e&&e.__awaiter||function(h,v,m,g){function y(b){return b instanceof m?b:new m(function(S){S(b)})}return new(m||(m=Promise))(function(b,S){function T(M){try{D(g.next(M))}catch(N){S(N)}}function O(M){try{D(g.throw(M))}catch(N){S(N)}}function D(M){M.done?b(M.value):y(M.value).then(T,O)}D((g=g.apply(h,v||[])).next())})},o=e&&e.__generator||function(h,v){var m={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},g,y,b,S;return S={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(S[Symbol.iterator]=function(){return this}),S;function T(D){return function(M){return O([D,M])}}function O(D){if(g)throw new TypeError("Generator is already executing.");for(;m;)try{if(g=1,y&&(b=D[0]&2?y.return:D[0]?y.throw||((b=y.return)&&b.call(y),0):y.next)&&!(b=b.call(y,D[1])).done)return b;switch(y=0,b&&(D=[D[0]&2,b.value]),D[0]){case 0:case 1:b=D;break;case 4:return m.label++,{value:D[1],done:!1};case 5:m.label++,y=D[1],D=[0];continue;case 7:D=m.ops.pop(),m.trys.pop();continue;default:if(b=m.trys,!(b=b.length>0&&b[b.length-1])&&(D[0]===6||D[0]===2)){m=0;continue}if(D[0]===3&&(!b||D[1]>b[0]&&D[1]<b[3])){m.label=D[1];break}if(D[0]===6&&m.label<b[1]){m.label=b[1],b=D;break}if(b&&m.label<b[2]){m.label=b[2],m.ops.push(D);break}b[2]&&m.ops.pop(),m.trys.pop();continue}D=v.call(h,m)}catch(M){D=[6,M],y=0}finally{g=b=0}if(D[0]&5)throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}},c=require("fs"),s=require("os"),i=require("path"),n=require("zlib"),a=require("child_process"),l=qe(),p=ur(),u=et(),f=function(){function h(v,m,g){if(this._redirectedHost=null,this._config=v,this._onSuccess=m,this._onError=g,this._enableDiskRetryMode=!1,this._resendInterval=h.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=h.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=i.join(s.tmpdir(),h.TEMPDIR_PREFIX+this._config.instrumentationKey),!h.OS_PROVIDES_FILE_PROTECTION)if(h.USE_ICACLS){try{h.OS_PROVIDES_FILE_PROTECTION=c.existsSync(h.ICACLS_PATH)}catch{}h.OS_PROVIDES_FILE_PROTECTION||l.warn(h.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else h.OS_PROVIDES_FILE_PROTECTION=!0}return h.prototype.setDiskRetryMode=function(v,m,g){var y=this;this._enableDiskRetryMode=h.OS_PROVIDES_FILE_PROTECTION&&v,typeof m=="number"&&m>=0&&(this._resendInterval=Math.floor(m)),typeof g=="number"&&g>=0&&(this._maxBytesOnDisk=Math.floor(g)),v&&!h.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,l.warn(h.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){y._fileCleanupTask()},h.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},h.prototype.send=function(v,m){return t(this,void 0,void 0,function(){var g,y,b,S,T=this;return o(this,function(O){return v&&(g=this._redirectedHost||this._config.endpointUrl,y={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},b="",v.forEach(function(D){var M=T._stringify(D);typeof M=="string"&&(b+=M+`
`)}),b.length>0&&(b=b.substring(0,b.length-1)),S=Buffer.from?Buffer.from(b):new Buffer(b),n.gzip(S,function(D,M){var N=M;D?(l.warn(D),N=S,y.headers["Content-Length"]=S.length.toString()):(y.headers["Content-Encoding"]="gzip",y.headers["Content-Length"]=M.length.toString()),l.info(h.TAG,y),y[p.disableCollectionRequestOption]=!0;var L=function(F){F.setEncoding("utf-8");var z="";F.on("data",function(ie){z+=ie}),F.on("end",function(){if(T._numConsecutiveFailures=0,T._enableDiskRetryMode){if(F.statusCode===200)T._resendTimer||(T._resendTimer=setTimeout(function(){T._resendTimer=null,T._sendFirstFileOnDisk()},T._resendInterval),T._resendTimer.unref());else if(T._isRetriable(F.statusCode))try{var ie=JSON.parse(z),ee=[];ie.errors.forEach(function(re){T._isRetriable(re.statusCode)&&ee.push(v[re.index])}),ee.length>0&&T._storeToDisk(ee)}catch{T._storeToDisk(v)}}if(F.statusCode===307||F.statusCode===308)if(T._numConsecutiveRedirects++,T._numConsecutiveRedirects<10){var ge=F.headers.location?F.headers.location.toString():null;ge&&(T._redirectedHost=ge,T.send(v,m))}else typeof m=="function"&&m("Error sending telemetry because of circular redirects.");else T._numConsecutiveRedirects=0,typeof m=="function"&&m(z),l.info(h.TAG,z),typeof T._onSuccess=="function"&&T._onSuccess(z)})},B=u.makeRequest(T._config,g,y,L);B.on("error",function(F){if(T._numConsecutiveFailures++,!T._enableDiskRetryMode||T._numConsecutiveFailures>0&&T._numConsecutiveFailures%h.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var z="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";T._enableDiskRetryMode&&(z="Ingestion endpoint could not be reached "+T._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),l.warn(h.TAG,z,u.dumpObj(F))}else{var z="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";l.info(h.TAG,z,u.dumpObj(F))}T._onErrorHelper(F),typeof m=="function"&&(F&&m(u.dumpObj(F)),m("Error sending telemetry")),T._enableDiskRetryMode&&T._storeToDisk(v)}),B.write(N),B.end()})),[2]})})},h.prototype.saveOnCrash=function(v){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(v))},h.prototype._isRetriable=function(v){return v===206||v===408||v===429||v===439||v===500||v===503},h.prototype._runICACLS=function(v,m){var g=a.spawn(h.ICACLS_PATH,v,{windowsHide:!0});g.on("error",function(y){return m(y)}),g.on("close",function(y,b){return m(y===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+y+")"))})},h.prototype._runICACLSSync=function(v){if(a.spawnSync){var m=a.spawnSync(h.ICACLS_PATH,v,{windowsHide:!0});if(m.error)throw m.error;if(m.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+m.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},h.prototype._getACLIdentity=function(v){if(h.ACL_IDENTITY)return v(null,h.ACL_IDENTITY);var m=a.spawn(h.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),g="";m.stdout.on("data",function(y){return g+=y}),m.on("error",function(y){return v(y,null)}),m.on("close",function(y,b){return h.ACL_IDENTITY=g&&g.trim(),v(y===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+y+")"),h.ACL_IDENTITY)})},h.prototype._getACLIdentitySync=function(){if(h.ACL_IDENTITY)return h.ACL_IDENTITY;if(a.spawnSync){var v=a.spawnSync(h.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(v.error)throw v.error;if(v.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+v.status+")");return h.ACL_IDENTITY=v.stdout&&v.stdout.toString().trim(),h.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},h.prototype._getACLArguments=function(v,m){return[v,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",m+":(OI)(CI)F","/inheritance:r"]},h.prototype._applyACLRules=function(v,m){var g=this;if(!h.USE_ICACLS)return m(null);if(h.ACLED_DIRECTORIES[v]===void 0)h.ACLED_DIRECTORIES[v]=!1,this._getACLIdentity(function(y,b){if(y)return h.ACLED_DIRECTORIES[v]=!1,m(y);g._runICACLS(g._getACLArguments(v,b),function(S){return h.ACLED_DIRECTORIES[v]=!S,m(S)})});else return m(h.ACLED_DIRECTORIES[v]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},h.prototype._applyACLRulesSync=function(v){if(h.USE_ICACLS){if(h.ACLED_DIRECTORIES[v]===void 0){this._runICACLSSync(this._getACLArguments(v,this._getACLIdentitySync())),h.ACLED_DIRECTORIES[v]=!0;return}else if(!h.ACLED_DIRECTORIES[v])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},h.prototype._confirmDirExists=function(v,m){var g=this;c.lstat(v,function(y,b){y&&y.code==="ENOENT"?c.mkdir(v,function(S){S&&S.code!=="EEXIST"?m(S):g._applyACLRules(v,m)}):!y&&b.isDirectory()?g._applyACLRules(v,m):m(y||new Error("Path existed but was not a directory"))})},h.prototype._getShallowDirectorySize=function(v,m){c.readdir(v,function(g,y){if(g)return m(g,-1);var b=null,S=0,T=0;if(y.length===0){m(null,0);return}for(var O=0;O<y.length;O++)c.stat(i.join(v,y[O]),function(D,M){T++,D?b=D:M.isFile()&&(S+=M.size),T===y.length&&(b?m(b,-1):m(b,S))})})},h.prototype._getShallowDirectorySizeSync=function(v){for(var m=c.readdirSync(v),g=0,y=0;y<m.length;y++)g+=c.statSync(i.join(v,m[y])).size;return g},h.prototype._storeToDisk=function(v){var m=this;l.info(h.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,function(g){if(g){l.warn(h.TAG,"Error while checking/creating directory: "+(g&&g.message)),m._onErrorHelper(g);return}m._getShallowDirectorySize(m._tempDir,function(y,b){if(y||b<0){l.warn(h.TAG,"Error while checking directory size: "+(y&&y.message)),m._onErrorHelper(y);return}else if(b>m._maxBytesOnDisk){l.warn(h.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+b);return}var S=new Date().getTime()+".ai.json",T=i.join(m._tempDir,S);l.info(h.TAG,"saving data to disk at: "+T),c.writeFile(T,m._stringify(v),{mode:384},function(O){return m._onErrorHelper(O)})})})},h.prototype._storeToDiskSync=function(v){try{l.info(h.TAG,"Checking existence of data storage directory: "+this._tempDir),c.existsSync(this._tempDir)||c.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var m=this._getShallowDirectorySizeSync(this._tempDir);if(m>this._maxBytesOnDisk){l.info(h.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+m);return}var g=new Date().getTime()+".ai.json",y=i.join(this._tempDir,g);l.info(h.TAG,"saving data before crash to disk at: "+y),c.writeFileSync(y,v,{mode:384})}catch(b){l.warn(h.TAG,"Error while saving data to disk: "+(b&&b.message)),this._onErrorHelper(b)}},h.prototype._sendFirstFileOnDisk=function(){var v=this;c.exists(this._tempDir,function(m){m&&c.readdir(v._tempDir,function(g,y){if(g)v._onErrorHelper(g);else if(y=y.filter(function(T){return i.basename(T).indexOf(".ai.json")>-1}),y.length>0){var b=y[0],S=i.join(v._tempDir,b);c.readFile(S,function(T,O){T?v._onErrorHelper(T):c.unlink(S,function(D){if(D)v._onErrorHelper(D);else try{var M=JSON.parse(O.toString());v.send(M)}catch(N){l.warn("Failed to read persisted file",N)}})})}})})},h.prototype._onErrorHelper=function(v){typeof this._onError=="function"&&this._onError(v)},h.prototype._stringify=function(v){try{return JSON.stringify(v)}catch(m){l.warn("Failed to serialize payload",m,v)}},h.prototype._fileCleanupTask=function(){var v=this;c.exists(this._tempDir,function(m){m&&c.readdir(v._tempDir,function(g,y){g?v._onErrorHelper(g):(y=y.filter(function(b){return i.basename(b).indexOf(".ai.json")>-1}),y.length>0&&y.forEach(function(b){var S=new Date(parseInt(b.split(".ai.json")[0])),T=new Date(+new Date-h.FILE_RETEMPTION_PERIOD)>S;if(T){var O=i.join(v._tempDir,b);c.unlink(O,function(D){D&&v._onErrorHelper(D)})}}))})})},h.TAG="Sender",h.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",h.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",h.ACLED_DIRECTORIES={},h.ACL_IDENTITY=null,h.WAIT_BETWEEN_RESEND=60*1e3,h.MAX_BYTES_ON_DISK=50*1024*1024,h.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,h.CLEANUP_TIMEOUT=60*60*1e3,h.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,h.TEMPDIR_PREFIX="appInsights-node",h.OS_PROVIDES_FILE_PROTECTION=!1,h.USE_ICACLS=s.type()==="Windows_NT",h}();r.exports=f}),Ll=C((e,r)=>{"use strict";var t=Ge(),o=et(),c=Yt(),s=function(){function n(){}return n.createEnvelope=function(a,l,p,u,f){var h=null;switch(l){case t.TelemetryType.Trace:h=n.createTraceData(a);break;case t.TelemetryType.Dependency:h=n.createDependencyData(a);break;case t.TelemetryType.Event:h=n.createEventData(a);break;case t.TelemetryType.Exception:h=n.createExceptionData(a);break;case t.TelemetryType.Request:h=n.createRequestData(a);break;case t.TelemetryType.Metric:h=n.createMetricData(a);break;case t.TelemetryType.Availability:h=n.createAvailabilityData(a);break;case t.TelemetryType.PageView:h=n.createPageViewData(a);break}if(p&&t.domainSupportsProperties(h.baseData)){if(h&&h.baseData)if(!h.baseData.properties)h.baseData.properties=p;else for(var v in p)h.baseData.properties[v]||(h.baseData.properties[v]=p[v]);h.baseData.properties=o.validateStringMap(h.baseData.properties)}var m=f&&f.instrumentationKey||"",g=new t.Envelope;return g.data=h,g.iKey=m,g.name="Microsoft.ApplicationInsights."+m.replace(/-/g,"")+"."+h.baseType.substr(0,h.baseType.length-4),g.tags=this.getTags(u,a.tagOverrides),g.time=new Date().toISOString(),g.ver=1,g.sampleRate=f?f.samplingPercentage:100,l===t.TelemetryType.Metric&&(g.sampleRate=100),g},n.createTraceData=function(a){var l=new t.MessageData;l.message=a.message,l.properties=a.properties,isNaN(a.severity)?l.severityLevel=t.SeverityLevel.Information:l.severityLevel=a.severity;var p=new t.Data;return p.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Trace),p.baseData=l,p},n.createDependencyData=function(a){var l=new t.RemoteDependencyData;typeof a.name=="string"&&(l.name=a.name.length>1024?a.name.slice(0,1021)+"...":a.name),l.data=a.data,l.target=a.target,l.duration=o.msToTimeSpan(a.duration),l.success=a.success,l.type=a.dependencyTypeName,l.properties=a.properties,l.resultCode=a.resultCode?a.resultCode+"":"",a.id?l.id=a.id:l.id=o.w3cTraceId();var p=new t.Data;return p.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Dependency),p.baseData=l,p},n.createEventData=function(a){var l=new t.EventData;l.name=a.name,l.properties=a.properties,l.measurements=a.measurements;var p=new t.Data;return p.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Event),p.baseData=l,p},n.createExceptionData=function(a){var l=new t.ExceptionData;l.properties=a.properties,isNaN(a.severity)?l.severityLevel=t.SeverityLevel.Error:l.severityLevel=a.severity,l.measurements=a.measurements,l.exceptions=[];var p=a.exception.stack,u=new t.ExceptionDetails;u.message=a.exception.message,u.typeName=a.exception.name,u.parsedStack=this.parseStack(p),u.hasFullStack=o.isArray(u.parsedStack)&&u.parsedStack.length>0,l.exceptions.push(u);var f=new t.Data;return f.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Exception),f.baseData=l,f},n.createRequestData=function(a){var l=new t.RequestData;a.id?l.id=a.id:l.id=o.w3cTraceId(),l.name=a.name,l.url=a.url,l.source=a.source,l.duration=o.msToTimeSpan(a.duration),l.responseCode=a.resultCode?a.resultCode+"":"",l.success=a.success,l.properties=a.properties;var p=new t.Data;return p.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Request),p.baseData=l,p},n.createMetricData=function(a){var l=new t.MetricData;l.metrics=[];var p=new t.DataPoint;p.count=isNaN(a.count)?1:a.count,p.kind=t.DataPointType.Aggregation,p.max=isNaN(a.max)?a.value:a.max,p.min=isNaN(a.min)?a.value:a.min,p.name=a.name,p.stdDev=isNaN(a.stdDev)?0:a.stdDev,p.value=a.value,l.metrics.push(p),l.properties=a.properties;var u=new t.Data;return u.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Metric),u.baseData=l,u},n.createAvailabilityData=function(a){var l=new t.AvailabilityData;a.id?l.id=a.id:l.id=o.w3cTraceId(),l.name=a.name,l.duration=o.msToTimeSpan(a.duration),l.success=a.success,l.runLocation=a.runLocation,l.message=a.message,l.measurements=a.measurements,l.properties=a.properties;var p=new t.Data;return p.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Availability),p.baseData=l,p},n.createPageViewData=function(a){var l=new t.PageViewData;l.name=a.name,l.duration=o.msToTimeSpan(a.duration),l.url=a.url,l.measurements=a.measurements,l.properties=a.properties;var p=new t.Data;return p.baseType=t.telemetryTypeToBaseType(t.TelemetryType.PageView),p.baseData=l,p},n.getTags=function(a,l){var p=c.CorrelationContextManager.getCurrentContext(),u={};if(a&&a.tags)for(var f in a.tags)u[f]=a.tags[f];if(l)for(var f in l)u[f]=l[f];return p&&(u[a.keys.operationId]=u[a.keys.operationId]||p.operation.id,u[a.keys.operationName]=u[a.keys.operationName]||p.operation.name,u[a.keys.operationParentId]=u[a.keys.operationParentId]||p.operation.parentId),u},n.parseStack=function(a){var l=void 0;if(typeof a=="string"){var p=a.split(`
`);l=[];for(var u=0,f=0,h=0;h<=p.length;h++){var v=p[h];if(i.regex.test(v)){var m=new i(p[h],u++);f+=m.sizeInBytes,l.push(m)}}var g=32*1024;if(f>g)for(var y=0,b=l.length-1,S=0,T=y,O=b;y<b;){var D=l[y].sizeInBytes,M=l[b].sizeInBytes;if(S+=D+M,S>g){var N=O-T+1;l.splice(T,N);break}T=y,O=b,y++,b--}}return l},n}(),i=function(){function n(a,l){this.sizeInBytes=0,this.level=l,this.method="<no_method>",this.assembly=o.trim(a);var p=a.match(n.regex);p&&p.length>=5&&(this.method=o.trim(p[2])||this.method,this.fileName=o.trim(p[4])||"<no_filename>",this.line=parseInt(p[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=n.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return n.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,n.baseSize=58,n}();r.exports=s}),jl=C((e,r)=>{"use strict";var t=require("url"),o=bo(),c=Sr(),s=Ge(),i=Pl(),n=Ml(),a=Yt(),l=kl(),p=et(),u=qe(),f=Ll(),h=function(){function v(m){this._telemetryProcessors=[],this._enableAzureProperties=!1;var g=new o(m);this.config=g,this.context=new c,this.commonProperties={};var y=new l(this.config);this.channel=new i(function(){return g.disableAppInsights},function(){return g.maxBatchSize},function(){return g.maxBatchIntervalMs},y)}return v.prototype.trackAvailability=function(m){this.track(m,s.TelemetryType.Availability)},v.prototype.trackPageView=function(m){this.track(m,s.TelemetryType.PageView)},v.prototype.trackTrace=function(m){this.track(m,s.TelemetryType.Trace)},v.prototype.trackMetric=function(m){this.track(m,s.TelemetryType.Metric)},v.prototype.trackException=function(m){m&&m.exception&&!p.isError(m.exception)&&(m.exception=new Error(m.exception.toString())),this.track(m,s.TelemetryType.Exception)},v.prototype.trackEvent=function(m){this.track(m,s.TelemetryType.Event)},v.prototype.trackRequest=function(m){this.track(m,s.TelemetryType.Request)},v.prototype.trackDependency=function(m){m&&!m.target&&m.data&&(m.target=t.parse(m.data).host),this.track(m,s.TelemetryType.Dependency)},v.prototype.flush=function(m){this.channel.triggerSend(m?!!m.isAppCrashing:!1,m?m.callback:void 0)},v.prototype.track=function(m,g){if(m&&s.telemetryTypeToBaseType(g)){var y=f.createEnvelope(m,g,this.commonProperties,this.context,this.config);m.time&&(y.time=m.time.toISOString()),this._enableAzureProperties&&n.azureRoleEnvironmentTelemetryProcessor(y,this.context);var b=this.runTelemetryProcessors(y,m.contextObjects);b=b&&n.samplingTelemetryProcessor(y,{correlationContext:a.CorrelationContextManager.getCurrentContext()}),n.preAggregatedMetricsTelemetryProcessor(y,this.context),b&&(n.performanceMetricsTelemetryProcessor(y,this.quickPulseClient),this.channel.send(y))}else u.warn("track() requires telemetry object and telemetryType to be specified.")},v.prototype.setAutoPopulateAzureProperties=function(m){this._enableAzureProperties=m},v.prototype.addTelemetryProcessor=function(m){this._telemetryProcessors.push(m)},v.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},v.prototype.runTelemetryProcessors=function(m,g){var y=!0,b=this._telemetryProcessors.length;if(b===0)return y;g=g||{},g.correlationContext=a.CorrelationContextManager.getCurrentContext();for(var S=0;S<b;++S)try{var T=this._telemetryProcessors[S];if(T&&T.apply(null,[m,g])===!1){y=!1;break}}catch(O){y=!0,u.warn("One of telemetry processors failed, telemetry item will be sent.",O,m)}return y&&(m&&m.tags&&(m.tags=p.validateStringMap(m.tags)),m&&m.data&&m.data.baseData&&m.data.baseData.properties&&(m.data.baseData.properties=p.validateStringMap(m.data.baseData.properties))),y},v}();r.exports=h}),Ul=C((e,r)=>{"use strict";var t=e&&e.__extends||function(){var a=function(l,p){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])},a(l,p)};return function(l,p){a(l,p);function u(){this.constructor=l}l.prototype=p===null?Object.create(p):(u.prototype=p.prototype,new u)}}(),o=jl(),c=Eo(),s=ur(),i=qe(),n=function(a){t(l,a);function l(){return a!==null&&a.apply(this,arguments)||this}return l.prototype.trackNodeHttpRequestSync=function(p){p&&p.request&&p.response&&p.duration?c.trackRequestSync(this,p):i.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},l.prototype.trackNodeHttpRequest=function(p){(p.duration||p.error)&&i.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),p&&p.request&&p.response?c.trackRequest(this,p):i.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},l.prototype.trackNodeHttpDependency=function(p){p&&p.request?s.trackRequest(this,p):i.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},l}(o);r.exports=n}),ql=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Hl=C(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.Configuration=e.wrapWithCorrelationContext=e.startOperation=e.getCorrelationContext=e.start=e.setup=e.liveMetricsClient=e.defaultClient=e.DistributedTracingModes=void 0;var r=Yt(),t=pl(),o=dl(),c=vn(),s=yo(),i=Tl(),n=ur(),a=Eo(),l=Kt(),p=qe(),u=Cl(),f=Ol();e.TelemetryClient=Ul(),e.Contracts=Ge(),e.azureFunctionsTypes=ql();var h;(function(Z){Z[Z.AI=0]="AI",Z[Z.AI_AND_W3C=1]="AI_AND_W3C"})(h=e.DistributedTracingModes||(e.DistributedTracingModes={}));var v=!0,m=!1,g=!0,y=!0,b=!0,S=!1,T=!0,O=!0,D=!0,M=!0,N,L=!1,B=!0,F,z=void 0,ie=void 0,ee,ge,re,H,G,V,W,X,ne=!1,Y;function he(Z){return e.defaultClient?p.info("The default client is already setup"):(e.defaultClient=new e.TelemetryClient(Z),ee=new t(e.defaultClient),ge=new o(e.defaultClient),re=new c(e.defaultClient),H=new s(e.defaultClient),G=new i(e.defaultClient),W=new a(e.defaultClient),X=new n(e.defaultClient),V||(V=new f.AutoCollectNativePerformance(e.defaultClient))),e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(D,z,ie),xe}e.setup=he;function Se(){return e.defaultClient?(ne=!0,ee.enable(v,m),ge.enable(g),re.enable(y),H.enable(b),G.enable(S,e.defaultClient.config),V.enable(B,F),W.useAutoCorrelation(M,N),W.enable(T),X.enable(O),e.liveMetricsClient&&L&&e.liveMetricsClient.enable(L)):p.warn("Start cannot be called before setup"),xe}e.start=Se;function _e(){return M?r.CorrelationContextManager.getCurrentContext():null}e.getCorrelationContext=_e;function ve(Z,Q){return r.CorrelationContextManager.startOperation(Z,Q)}e.startOperation=ve;function ce(Z,Q){return r.CorrelationContextManager.wrapCallback(Z,Q)}e.wrapWithCorrelationContext=ce;var xe=function(){function Z(){}return Z.setDistributedTracingMode=function(Q){return l.w3cEnabled=Q===h.AI_AND_W3C,Z},Z.setAutoCollectConsole=function(Q,te){return te===void 0&&(te=!1),v=Q,m=te,ne&&ee.enable(Q,te),Z},Z.setAutoCollectExceptions=function(Q){return g=Q,ne&&ge.enable(Q),Z},Z.setAutoCollectPerformance=function(Q,te){te===void 0&&(te=!0),y=Q;var fe=f.AutoCollectNativePerformance.parseEnabled(te);return B=fe.isEnabled,F=fe.disabledMetrics,ne&&(re.enable(Q),V.enable(fe.isEnabled,fe.disabledMetrics)),Z},Z.setAutoCollectPreAggregatedMetrics=function(Q){return b=Q,ne&&H.enable(Q),Z},Z.setAutoCollectHeartbeat=function(Q){return S=Q,ne&&G.enable(Q,e.defaultClient.config),Z},Z.setAutoCollectRequests=function(Q){return T=Q,ne&&W.enable(Q),Z},Z.setAutoCollectDependencies=function(Q){return O=Q,ne&&X.enable(Q),Z},Z.setAutoDependencyCorrelation=function(Q,te){return M=Q,N=te,ne&&W.useAutoCorrelation(Q,te),Z},Z.setUseDiskRetryCaching=function(Q,te,fe){return D=Q,z=te,ie=fe,e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(Q,te,fe),Z},Z.setInternalLogging=function(Q,te){return Q===void 0&&(Q=!1),te===void 0&&(te=!0),p.enableDebug=Q,p.disableWarnings=!te,Z},Z.setSendLiveMetrics=function(Q){return Q===void 0&&(Q=!1),e.defaultClient?(!e.liveMetricsClient&&Q?(e.liveMetricsClient=new u(e.defaultClient.config,null),Y=new c(e.liveMetricsClient,1e3,!0),e.liveMetricsClient.addCollector(Y),e.defaultClient.quickPulseClient=e.liveMetricsClient):e.liveMetricsClient&&e.liveMetricsClient.enable(Q),L=Q,Z):(p.warn("Live metrics client cannot be setup without the default client"),Z)},Z.start=Se,Z}();e.Configuration=xe;function ke(){l.w3cEnabled=!0,e.defaultClient=null,ne=!1,ee&&ee.dispose(),ge&&ge.dispose(),re&&re.dispose(),H&&H.dispose(),G&&G.dispose(),V&&V.dispose(),W&&W.dispose(),X&&X.dispose(),e.liveMetricsClient&&(e.liveMetricsClient.enable(!1),L=!1,e.liveMetricsClient=void 0)}e.dispose=ke});ga(To,{default:()=>Gl});var mn=ir(require("os")),Qt=ir(require("vscode")),Pe=ir(require("vscode")),_n=ir(require("vscode")),nt;(function(e){e.ON="on",e.OFF="off"})(nt||(nt={}));function Ar(){let e="telemetry",r="enableTelemetry";return _n.env.isTelemetryEnabled!==void 0?_n.env.isTelemetryEnabled?nt.ON:nt.OFF:_n.workspace.getConfiguration(e).get(r)?nt.ON:nt.OFF}var Bl=class{constructor(e,r,t,o,c){this.extensionId=e,this.extensionVersion=r,this.telemetryAppender=t,this.osShim=o,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!c,this.updateUserOptStatus(),Pe.env.onDidChangeTelemetryEnabled!==void 0?(this.disposables.push(Pe.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(Pe.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(Pe.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let e=Ar();this.userOptIn=e===nt.ON,this.errorOptIn=e===nt.ON,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(e){if(!e)return"none";let r="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach(t=>{e.indexOf(`${t}`)===0&&(r=t)}),r}get extension(){return this._extension===void 0&&(this._extension=Pe.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(e,r){if(e===null||typeof e!="object"||typeof r!="function")return e;let t={};for(let o in e)t[o]=r(o,e[o]);return t}shouldSendErrorTelemetry(){return this.errorOptIn===!1?!1:this.firstParty?this.cleanRemoteName(Pe.env.remoteName)!=="other"?!0:!(this.extension===void 0||this.extension.extensionKind===Pe.ExtensionKind.Workspace||Pe.env.uiKind===Pe.UIKind.Web):!0}getCommonProperties(){let e=Object.create(null);if(e["common.os"]=this.osShim.platform,e["common.nodeArch"]=this.osShim.architecture,e["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,Pe&&Pe.env){switch(e["common.vscodemachineid"]=Pe.env.machineId,e["common.vscodesessionid"]=Pe.env.sessionId,e["common.vscodeversion"]=Pe.version,e["common.isnewappinstall"]=Pe.env.isNewAppInstall?Pe.env.isNewAppInstall.toString():"false",e["common.product"]=Pe.env.appHost,Pe.env.uiKind){case Pe.UIKind.Web:e["common.uikind"]="web";break;case Pe.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}e["common.remotename"]=this.cleanRemoteName(Pe.env.remoteName)}return e}anonymizeFilePaths(e,r){let t;if(e==null)return"";let o=[];Pe.env.appRoot!==""&&o.push(new RegExp(Pe.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&o.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let c=e;if(r){let s=[];for(let l of o)for(;(t=l.exec(e))&&t;)s.push([t.index,l.lastIndex]);let i=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,n=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,a=0;for(c="";(t=n.exec(e))&&t;)t[0]&&!i.test(t[0])&&s.every(([l,p])=>t.index<l||t.index>=p)&&(c+=e.substring(a,t.index)+"<REDACTED: user-file-path>",a=n.lastIndex);a<e.length&&(c+=e.substr(a))}for(let s of o)c=c.replace(s,"");return c}removePropertiesWithPossibleUserInfo(e){if(typeof e!="object")return;let r=Object.create(null);for(let t of Object.keys(e)){let o=e[t];if(!o)continue;let c=/@[a-zA-Z0-9-.]+/,s=/(key|token|sig|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/,i=/xox[pbaors]-[a-zA-Z0-9]+-[a-zA-Z0-9-]+?/;s.test(o.toLowerCase())?r[t]="<REDACTED: secret>":c.test(o)?r[t]="<REDACTED: email>":i.test(o)?r[t]="<REDACTED: token>":r[t]=o}return r}sendTelemetryEvent(e,r,t){if(this.userOptIn&&e!==""){r=mt(mt({},r),this.getCommonProperties());let o=this.cloneAndChange(r,(c,s)=>this.anonymizeFilePaths(s,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:this.removePropertiesWithPossibleUserInfo(o),measurements:t})}}sendRawTelemetryEvent(e,r,t){this.userOptIn&&e!==""&&(r=mt(mt({},r),this.getCommonProperties()),this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:r,measurements:t}))}sendTelemetryErrorEvent(e,r,t,o){if(this.errorOptIn&&e!==""){r=mt(mt({},r),this.getCommonProperties());let c=this.cloneAndChange(r,(s,i)=>this.shouldSendErrorTelemetry()?this.anonymizeFilePaths(i,this.firstParty):o===void 0||o.indexOf(s)!==-1?"REDACTED":this.anonymizeFilePaths(i,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:this.removePropertiesWithPossibleUserInfo(c),measurements:t})}}sendTelemetryException(e,r,t){if(this.shouldSendErrorTelemetry()&&this.errorOptIn&&e){r=mt(mt({},r),this.getCommonProperties());let o=this.cloneAndChange(r,(c,s)=>this.anonymizeFilePaths(s,this.firstParty));e.stack&&(e.stack=this.anonymizeFilePaths(e.stack,this.firstParty)),this.telemetryAppender.logException(e,{properties:this.removePropertiesWithPossibleUserInfo(o),measurements:t})}}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(e=>e.dispose()))}},Fl=class{constructor(e,r){this._isInstantiated=!1,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=r,this._key=e,Ar()!==nt.OFF&&this.instantiateAppender()}logEvent(e,r){if(!this._telemetryClient){!this._isInstantiated&&Ar()===nt.ON&&this._eventQueue.push({eventName:e,data:r});return}this._telemetryClient.logEvent(e,r)}logException(e,r){if(!this._telemetryClient){!this._isInstantiated&&Ar()!==nt.OFF&&this._exceptionQueue.push({exception:e,data:r});return}this._telemetryClient.logException(e,r)}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:r})=>this.logEvent(e,r)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:r})=>this.logException(e,r)),this._exceptionQueue=[]}instantiateAppender(){this._isInstantiated||this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._isInstantiated=!0,this._flushQueues()}).catch(e=>{console.error(e)})}},Vl=async e=>{let r;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";let t=await Promise.resolve().then(()=>ir(Hl()));t.defaultClient?(r=new t.TelemetryClient(e),r.channel.setUseDiskRetryCaching(!0)):(t.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setUseDiskRetryCaching(!0).start(),r=t.defaultClient),Qt&&Qt.env&&(r.context.tags[r.context.keys.userId]=Qt.env.machineId,r.context.tags[r.context.keys.sessionId]=Qt.env.sessionId,r.context.tags[r.context.keys.cloudRole]=Qt.env.appName,r.context.tags[r.context.keys.cloudRoleInstance]=Qt.env.appName),e&&e.indexOf("AIF-")===0&&(r.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1")}catch(t){return Promise.reject(t)}return{logEvent:(t,o)=>{r==null||r.trackEvent({name:t,properties:o==null?void 0:o.properties,measurements:o==null?void 0:o.measurements})},logException:(t,o)=>{r==null||r.trackException({exception:t,properties:o==null?void 0:o.properties,measurements:o==null?void 0:o.measurements})},flush:async()=>{r==null||r.flush()}}},Gl=class extends Bl{constructor(e,r,t,o){let c=new Fl(t,Vl);t&&t.indexOf("AIF-")===0&&(o=!0);super(e,r,c,{release:mn.release(),platform:mn.platform(),architecture:mn.arch()},o)}}});var Sn=Ee(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});var No=class{constructor(r,t,o){this.bias=r,this.backoffA=t,this.backoffB=o}next(r){let t=this.backoffA.next(r),o=this.backoffB.next(r);return t&&o&&Mo(this.bias,t,o)}};Tn.CompositeBackoff=No;var Mo=(e,r,t)=>({get duration(){switch(e){case"a":return r.duration;case"b":return t.duration;case"max":return Math.max(t.duration,r.duration);case"min":return Math.min(t.duration,r.duration);default:throw new Error(`Unknown bias "${e}" given to CompositeBackoff`)}},next(o){let c=r.next(o),s=t.next(o);return c&&s&&Mo(e,c,s)}})});var In=Ee(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});var An=class{constructor(r,t){this.interval=r,this.limit=t}next(){return ko(this.interval,this.limit)}};Rr.ConstantBackoff=An;Rr.NeverRetryBackoff=new An(0,0);var ko=(e,r,t=0)=>({duration:e,next(){if(r===void 0)return this;if(!(t>=r-1))return ko(e,r,t+1)}})});var On=Ee(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});var Lo=class{constructor(r){this.fn=r}next(r){return Cn(this.fn).next(r)}};wn.DelegateBackoff=Lo;var Cn=(e,r,t=0)=>({duration:t,next(o){let c=e(o,r);if(c!==void 0)return typeof c=="number"?Cn(e,r,c):Cn(e,c.state,c.delay)}})});var Pn=Ee(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.noJitterGenerator=(e=0,r)=>[Math.min(r.maxDelay,r.initialDelay*2**e),e+1];Et.fullJitterGenerator=(e,r)=>{let[t,o]=Et.noJitterGenerator(e,r);return[Math.floor(Math.random()*t),o]};Et.halfJitterGenerator=(e,r)=>{let[t,o]=Et.noJitterGenerator(e,r);return[Math.floor((t+Math.random()*t)/2),o]};var op=4,sp=1/1.4;Et.decorrelatedJitterGenerator=(e,r)=>{let[t,o]=e||[0,0],c=t+Math.random(),s=Math.pow(r.exponent,c)*Math.tanh(Math.sqrt(op*c)),i=Math.max(0,s-o);return[Math.min(i*sp*r.initialDelay,r.maxDelay),[t+1,s]]}});var Ho=Ee(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});var ap=Pn(),jo={generator:ap.decorrelatedJitterGenerator,maxDelay:3e4,maxAttempts:1/0,exponent:2,initialDelay:128},Uo=class{constructor(r){this.options=r?{...jo,...r}:jo}next(){return qo(this.options).next(void 0)}};Rn.ExponentialBackoff=Uo;var qo=(e,r,t=0,o=-1)=>({duration:t,next(){if(o>=e.maxAttempts-1)return;let[c,s]=e.generator(r,e);return qo(e,s,c,o+1)}})});var Dn=Ee(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});var Bo=class{constructor(r){this.durations=r}next(){return Fo(this.durations,0)}};xn.IterableBackoff=Bo;var Fo=(e,r)=>({duration:e[r],next:()=>r<e.length-1?Fo(e,r+1):void 0})});var Nn=Ee(xr=>{"use strict";function Xt(e){for(var r in e)xr.hasOwnProperty(r)||(xr[r]=e[r])}Object.defineProperty(xr,"__esModule",{value:!0});Xt(Sn());Xt(In());Xt(On());Xt(Ho());Xt(Pn());Xt(Dn())});var Dr=Ee(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});var Vo=class extends Error{constructor(r="Operation cancelled"){super(r);this.message=r,this.isTaskCancelledError=!0}};Mn.TaskCancelledError=Vo});var Tt=Ee(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});var Go=Dr();bt.noopDisposable={dispose:()=>{}};var cp;(function(e){e.once=(r,t)=>{let o=!1,c;return c=r(s=>{t(s),c?c.dispose():o=!0}),o?(c.dispose(),bt.noopDisposable):c},e.toPromise=(r,t)=>t?t.isCancellationRequested?Promise.reject(new Go.TaskCancelledError):new Promise((o,c)=>{let s=e.once(r,n=>{i.dispose(),o(n)}),i=e.once(t.onCancellationRequested,()=>{s.dispose(),c(new Go.TaskCancelledError)})}):new Promise(o=>e.once(r,o))})(cp=bt.Event||(bt.Event={}));var kn=class{constructor(){this.addListener=r=>this.addListenerInner(r)}get size(){return this.listeners?typeof this.listeners=="function"?1:this.listeners.length:0}emit(r){if(this.listeners)if(typeof this.listeners=="function")this.listeners(r);else for(let t of this.listeners)t(r)}addListenerInner(r){return this.listeners?typeof this.listeners=="function"?this.listeners=[this.listeners,r]:this.listeners.push(r):this.listeners=r,{dispose:()=>this.removeListener(r)}}removeListener(r){if(!this.listeners)return;if(typeof this.listeners=="function"){this.listeners===r&&(this.listeners=void 0);return}let t=this.listeners.indexOf(r);t!==-1&&(this.listeners.length===2?this.listeners=t===0?this.listeners[1]:this.listeners[0]:this.listeners=this.listeners.slice(0,t).concat(this.listeners.slice(t+1)))}};bt.EventEmitter=kn;var $o=class extends kn{constructor(){super(...arguments);this.addListener=r=>{let t=this.addListenerInner(r);return this.lastValue&&r(this.lastValue.value),t}}get hasEmitted(){return!!this.lastValue}emit(r){this.lastValue={value:r},super.emit(r)}};bt.MemorizingEventEmitter=$o});var ut=Ee(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});var dr=Tt(),zo=class{constructor(r){this.onCancel=new dr.MemorizingEventEmitter,this.token=new $t(this.onCancel.addListener),r&&(this.parentListener=r.onCancellationRequested(()=>this.cancel()))}cancel(){this.parentListener&&(this.parentListener.dispose(),this.parentListener=void 0),this.onCancel.hasEmitted||this.onCancel.emit()}};Nr.CancellationTokenSource=zo;var $t=class{constructor(r){this.onCancellationRequested=r,this.isRequested=!1,dr.Event.once(r,()=>this.isRequested=!0)}get isCancellationRequested(){return this.isRequested}cancellation(r){return dr.Event.toPromise(this.onCancellationRequested,r)}};Nr.CancellationToken=$t;$t.None=new $t(()=>dr.noopDisposable);$t.Cancelled=new $t(e=>(e(void 0),dr.noopDisposable))});var Zt=Ee(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});var Wo=Tt();kr.returnOrThrow=e=>{if("error"in e)throw e.error;return"success"in e?e.success:e.value};var up=()=>{if(typeof performance!="undefined"){let e=performance.now();return()=>performance.now()-e}else{let e=process.hrtime.bigint();return()=>Number(process.hrtime.bigint()-e)/1e6}},Mr=class{constructor(r=()=>!1,t=()=>!1){this.errorFilter=r,this.resultFilter=t,this.successEmitter=new Wo.EventEmitter,this.failureEmitter=new Wo.EventEmitter,this.onSuccess=this.successEmitter.addListener,this.onFailure=this.failureEmitter.addListener}derive(){let r=new Mr(this.errorFilter,this.resultFilter);return r.onSuccess(t=>this.successEmitter.emit(t)),r.onFailure(t=>this.failureEmitter.emit(t)),r}async invoke(r,...t){let o=this.successEmitter.size||this.failureEmitter.size?up():null;try{let c=await r(...t);return this.resultFilter(c)?(o&&this.failureEmitter.emit({duration:o(),handled:!0,reason:{value:c}}),{value:c}):(o&&this.successEmitter.emit({duration:o()}),{success:c})}catch(c){let s=this.errorFilter(c);if(o&&this.failureEmitter.emit({duration:o(),handled:s,reason:{error:c}}),!s)throw c;return{error:c}}}};kr.ExecuteWrapper=Mr});var jn=Ee(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});var Ko=class extends Error{constructor(r="Execution prevented because the circuit breaker is open"){super(r);this.isBrokenCircuitError=!0}};Ln.BrokenCircuitError=Ko});var qn=Ee(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});var Yo=class extends Error{constructor(r,t){super(`Bulkhead capacity exceeded (0/${r} execution slots, 0/${t} available)`);this.isBulkheadRejectedError=!0}};Un.BulkheadRejectedError=Yo});var Bn=Ee(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});var lp=jn(),Qo=class extends lp.BrokenCircuitError{constructor(){super("Execution prevented because the circuit breaker is open");this.isIsolatedCircuitError=!0}};Hn.IsolatedCircuitError=Qo});var jr=Ee(St=>{"use strict";function Lr(e){for(var r in e)St.hasOwnProperty(r)||(St[r]=e[r])}Object.defineProperty(St,"__esModule",{value:!0});Lr(jn());Lr(qn());Lr(Bn());Lr(Dr());St.isBrokenCircuitError=e=>!!e&&e instanceof Error&&"isBrokenCircuitError"in e;St.isBulkheadRejectedError=e=>!!e&&e instanceof Error&&"isBulkheadRejectedError"in e;St.isIsolatedCircuitError=e=>!!e&&e instanceof Error&&"isBulkheadRejectedError"in e;St.isTaskCancelledError=e=>!!e&&e instanceof Error&&"isBulkheadRejectedError"in e});var qr=Ee(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});var pp=ut(),Ur=Tt(),Xo=Zt(),Zo=jr(),dp=Bn(),Oe;(function(e){e[e.Closed=0]="Closed",e[e.Open=1]="Open",e[e.HalfOpen=2]="HalfOpen",e[e.Isolated=3]="Isolated"})(Oe=fr.CircuitState||(fr.CircuitState={}));var Jo=class{constructor(r,t){this.options=r,this.executor=t,this.breakEmitter=new Ur.EventEmitter,this.resetEmitter=new Ur.EventEmitter,this.halfOpenEmitter=new Ur.EventEmitter,this.stateChangeEmitter=new Ur.EventEmitter,this.innerState={value:Oe.Closed},this.onBreak=this.breakEmitter.addListener,this.onReset=this.resetEmitter.addListener,this.onHalfOpen=this.halfOpenEmitter.addListener,this.onStateChange=this.stateChangeEmitter.addListener,this.onSuccess=this.executor.onSuccess,this.onFailure=this.executor.onFailure}get state(){return this.innerState.value}get lastFailure(){return this.innerLastFailure}isolate(){this.innerState.value!==Oe.Isolated&&(this.innerState={value:Oe.Isolated,counters:0},this.breakEmitter.emit({isolated:!0}),this.stateChangeEmitter.emit(Oe.Isolated)),this.innerState.counters++;let r=!1;return{dispose:()=>{r||(r=!0,this.innerState.value===Oe.Isolated&&!--this.innerState.counters&&(this.innerState={value:Oe.Closed},this.resetEmitter.emit(),this.stateChangeEmitter.emit(Oe.Closed)))}}}async execute(r,t=pp.CancellationToken.None){let o=this.innerState;switch(o.value){case Oe.Closed:let c=await this.executor.invoke(r,{cancellationToken:t});return"success"in c?this.options.breaker.success(o.value):(this.innerLastFailure=c,this.options.breaker.failure(o.value)&&this.open(c)),Xo.returnOrThrow(c);case Oe.HalfOpen:if(await o.test.catch(()=>{}),this.state===Oe.Closed&&t.isCancellationRequested)throw new Zo.TaskCancelledError;return this.execute(r);case Oe.Open:if(Date.now()-o.openedAt<this.options.halfOpenAfter)throw new Zo.BrokenCircuitError;let s=this.halfOpen(r,t);return this.innerState={value:Oe.HalfOpen,test:s},this.stateChangeEmitter.emit(Oe.HalfOpen),s;case Oe.Isolated:throw new dp.IsolatedCircuitError;default:throw new Error(`Unexpected circuit state ${o}`)}}async halfOpen(r,t){this.halfOpenEmitter.emit();try{let o=await this.executor.invoke(r,{cancellationToken:t});return"success"in o?(this.options.breaker.success(Oe.HalfOpen),this.close()):(this.innerLastFailure=o,this.options.breaker.failure(Oe.HalfOpen),this.open(o)),Xo.returnOrThrow(o)}catch(o){throw this.close(),o}}open(r){this.state===Oe.Isolated||this.state===Oe.Open||(this.innerState={value:Oe.Open,openedAt:Date.now()},this.breakEmitter.emit(r),this.stateChangeEmitter.emit(Oe.Open))}close(){this.state===Oe.HalfOpen&&(this.innerState={value:Oe.Closed},this.resetEmitter.emit(),this.stateChangeEmitter.emit(Oe.Closed))}};fr.CircuitBreakerPolicy=Jo});var rs=Ee(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});var es=qr(),ts=class{constructor({threshold:r,duration:t,minimumRps:o}){if(this.windows=[],this.currentWindow=0,this.currentFailures=0,this.currentSuccesses=0,r<=0||r>=1)throw new RangeError(`SamplingBreaker threshold should be between (0, 1), got ${r}`);this.threshold=r;let c=Math.max(5,Math.ceil(t/1e3));for(let s=0;s<c;s++)this.windows.push({startedAt:0,failures:0,successes:0});this.windowSize=Math.round(t/c),this.duration=this.windowSize*c,o?this.minimumRpms=o/1e3:this.minimumRpms=5/(r*1e3)}success(r){r===es.CircuitState.HalfOpen&&this.resetWindows(),this.push(!0)}failure(r){if(this.push(!1),r!==es.CircuitState.Closed)return!0;let t=this.currentSuccesses+this.currentFailures;return t<this.duration*this.minimumRpms?!1:this.currentFailures>this.threshold*t}resetWindows(){this.currentFailures=0,this.currentSuccesses=0;for(let r of this.windows)r.failures=0,r.successes=0,r.startedAt=0}rotateWindow(r){let t=(this.currentWindow+1)%this.windows.length;this.currentFailures-=this.windows[t].failures,this.currentSuccesses-=this.windows[t].successes;let o=this.windows[t]={failures:0,successes:0,startedAt:r};return this.currentWindow=t,o}push(r){let t=Date.now(),o=this.windows[this.currentWindow];t-o.startedAt>=this.windowSize&&(o=this.rotateWindow(t)),r?(o.successes++,this.currentSuccesses++):(o.failures++,this.currentFailures++)}};Fn.SamplingBreaker=ts});var is=Ee(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});var ns=class{constructor(r){this.threshold=r,this.count=0}success(){this.count=0}failure(){return++this.count>=this.threshold}};Vn.ConsecutiveBreaker=ns});var ss=Ee(Hr=>{"use strict";function os(e){for(var r in e)Hr.hasOwnProperty(r)||(Hr[r]=e[r])}Object.defineProperty(Hr,"__esModule",{value:!0});os(rs());os(is())});var as=Ee(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});Gn.defer=()=>{let e,r,t=new Promise((o,c)=>{e=o,r=c});return{resolve:e,reject:r,promise:t}}});var zn=Ee($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});var fp=ut(),hp=as(),vp=Tt(),mp=Zt(),_p=qn(),gp=jr(),cs=class{constructor(r,t){this.capacity=r,this.queueCapacity=t,this.active=0,this.queue=[],this.onRejectEmitter=new vp.EventEmitter,this.executor=new mp.ExecuteWrapper,this.onSuccess=this.executor.onSuccess,this.onFailure=this.executor.onFailure,this.onReject=this.onRejectEmitter.addListener}get executionSlots(){return this.capacity-this.active}get queueSlots(){return this.queueCapacity-this.queue.length}async execute(r,t=fp.CancellationToken.None){if(t.isCancellationRequested)throw new gp.TaskCancelledError;if(this.active<this.capacity){this.active++;try{return await r({cancellationToken:t})}finally{this.active--,this.dequeue()}}if(this.queue.length<this.queueCapacity){let{resolve:o,reject:c,promise:s}=hp.defer();return this.queue.push({ct:t,fn:r,resolve:o,reject:c}),s}throw this.onRejectEmitter.emit(),new _p.BulkheadRejectedError(this.capacity,this.queueCapacity)}dequeue(){let r=this.queue.shift();!r||Promise.resolve().then(()=>this.execute(r.fn,r.ct)).then(r.resolve).catch(r.reject)}};$n.BulkheadPolicy=cs});var Kn=Ee(Wn=>{"use strict";Object.defineProperty(Wn,"__esModule",{value:!0});var yp=ut(),us=class{constructor(r,t){this.executor=r,this.value=t,this.onSuccess=this.executor.onSuccess,this.onFailure=this.executor.onFailure}async execute(r,t=yp.CancellationToken.None){let o=await this.executor.invoke(r,{cancellationToken:t});return"success"in o?o.success:this.value()}};Wn.FallbackPolicy=us});var Qn=Ee(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});var Ep=ut(),ls=Zt(),ps=class{constructor(){this.executor=new ls.ExecuteWrapper,this.onSuccess=this.executor.onSuccess,this.onFailure=this.executor.onFailure}async execute(r,t=Ep.CancellationToken.None){return ls.returnOrThrow(await this.executor.invoke(r,{cancellationToken:t}))}};Yn.NoopPolicy=ps});var Jn=Ee(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});var bp=Nn(),Tp=Sn(),Xn=In(),Sp=On(),Ap=Dn(),Ip=ut(),ds=Tt(),Cp=(e,r)=>new Promise(t=>{let o=setTimeout(t,e);r&&o.unref()}),Br=class{constructor(r,t){this.options=r,this.executor=t,this.onGiveUpEmitter=new ds.EventEmitter,this.onRetryEmitter=new ds.EventEmitter,this.onSuccess=this.executor.onSuccess,this.onFailure=this.executor.onFailure,this.onRetry=this.onRetryEmitter.addListener,this.onGiveUp=this.onGiveUpEmitter.addListener}attempts(r){return this.composeBackoff("a",new Xn.ConstantBackoff(1,r))}delay(r){return this.composeBackoff("b",typeof r=="number"?new Xn.ConstantBackoff(r):new Ap.IterableBackoff(r))}delegate(r){return this.composeBackoff("b",new Sp.DelegateBackoff(r))}exponential(r={}){return this.composeBackoff("b",new bp.ExponentialBackoff(r))}backoff(r){return this.composeBackoff("b",r)}dangerouslyUnref(){return this.derivePolicy({...this.options,unref:!0})}async execute(r,t=Ip.CancellationToken.None){let o=this.options.backoff||new Xn.ConstantBackoff(0,1),c;for(let s=0;;s++){let i=await this.executor.invoke(r,{attempt:s,cancellationToken:t});if("success"in i)return i.success;if(!t.isCancellationRequested){let n={attempt:s+1,cancellationToken:t,result:i};if(s===0?c=o.next(n):c&&(c=c.next(n)),c){let a=c.duration,l=Cp(a,!!this.options.unref);this.onRetryEmitter.emit({...i,delay:a}),await l;continue}}if(this.onGiveUpEmitter.emit(i),"error"in i)throw i.error;return i.value}}composeBackoff(r,t){return this.options.backoff&&(t=new Tp.CompositeBackoff(r,this.options.backoff,t)),this.derivePolicy({...this.options,backoff:t})}derivePolicy(r){let t=new Br(r,this.executor.derive());return t.onRetry(o=>this.onRetryEmitter.emit(o)),t}};Zn.RetryPolicy=Br});var ti=Ee(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});var fs=ut(),wp=Tt(),ei=Zt(),Op=Dr(),hs;(function(e){e.Cooperative="optimistic",e.Aggressive="aggressive"})(hs=hr.TimeoutStrategy||(hr.TimeoutStrategy={}));var Fr=class{constructor(r,t,o=new ei.ExecuteWrapper,c=!1){this.duration=r,this.strategy=t,this.executor=o,this.unref=c,this.timeoutEmitter=new wp.EventEmitter,this.onTimeout=this.timeoutEmitter.addListener,this.onFailure=this.executor.onFailure,this.onSuccess=this.executor.onSuccess}dangerouslyUnref(){return new Fr(this.duration,this.strategy,this.executor,!0)}async execute(r,t=fs.CancellationToken.None){let o=new fs.CancellationTokenSource(t),c=setTimeout(()=>o.cancel(),this.duration);this.unref&&c.unref();let s={cancellation:o.token,cancellationToken:o.token},i=o.token.onCancellationRequested(()=>this.timeoutEmitter.emit());try{return this.strategy===hs.Cooperative?ei.returnOrThrow(await this.executor.invoke(r,s,o.token)):await this.executor.invoke(async()=>Promise.race([Promise.resolve(r(s,o.token)),o.token.cancellation(o.token).then(()=>{throw new Op.TaskCancelledError(`Operation timed out after ${this.duration}ms`)})])).then(ei.returnOrThrow)}finally{i.dispose(),o.cancel(),clearTimeout(c)}}};hr.TimeoutPolicy=Fr});var vs=Ee(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});var Pp=zn(),Rp=ut(),xp=qr(),ri=Zt(),Dp=Kn(),Np=Qn(),Mp=Jn(),kp=ti(),Vr=(e,r)=>r?t=>t instanceof e&&r(t):t=>t instanceof e,Lp=()=>!0,vr=()=>!1,Qe=class{constructor(r){this.options=r}static wrap(...r){return{onFailure:r[0].onFailure,onSuccess:r[0].onSuccess,execute(t,o){let c=(s,i)=>i===r.length?t(s):r[i].execute(n=>c({...s,...n},i+1),s.cancellationToken);return Promise.resolve(c({cancellationToken:o},0))}}}static bulkhead(r,t=0){return new Pp.BulkheadPolicy(r,t)}static handleAll(){return new Qe({errorFilter:Lp,resultFilter:vr})}static handleType(r,t){return new Qe({errorFilter:Vr(r,t),resultFilter:vr})}static handleWhen(r){return new Qe({errorFilter:r,resultFilter:vr})}static handleResultType(r,t){return new Qe({errorFilter:vr,resultFilter:Vr(r,t)})}static handleWhenResult(r){return new Qe({errorFilter:vr,resultFilter:r})}static timeout(r,t){return new kp.TimeoutPolicy(r,t)}static use(r){return(t,o,c)=>{let s=c.value;if(typeof s!="function")throw new Error(`Can only decorate functions with @cockatiel, got ${typeof s}`);c.value=function(...i){let n=i[i.length-1]instanceof Rp.CancellationToken?i.pop():void 0;return r.execute(a=>s.apply(this,[...i,a]),n)}}}orType(r,t){let o=Vr(r,t);return new Qe({...this.options,errorFilter:c=>this.options.errorFilter(c)||o(c)})}orWhen(r){return new Qe({...this.options,errorFilter:t=>this.options.errorFilter(t)||r(t)})}orWhenResult(r){return new Qe({...this.options,resultFilter:t=>this.options.resultFilter(t)||r(t)})}orResultType(r,t){let o=Vr(r,t);return new Qe({...this.options,resultFilter:c=>this.options.resultFilter(c)||o(c)})}retry(){return new Mp.RetryPolicy({},new ri.ExecuteWrapper(this.options.errorFilter,this.options.resultFilter))}circuitBreaker(r,t){return new xp.CircuitBreakerPolicy({breaker:t,halfOpenAfter:r},new ri.ExecuteWrapper(this.options.errorFilter,this.options.resultFilter))}fallback(r){return new Dp.FallbackPolicy(new ri.ExecuteWrapper(this.options.errorFilter,this.options.resultFilter),typeof r=="function"?r:()=>r)}};ni.Policy=Qe;Qe.noop=new Np.NoopPolicy});var ii=Ee(Jt=>{"use strict";function it(e){for(var r in e)Jt.hasOwnProperty(r)||(Jt[r]=e[r])}Object.defineProperty(Jt,"__esModule",{value:!0});it(Nn());it(ss());it(zn());it(ut());it(qr());var ms=Tt();Jt.Event=ms.Event;Jt.EventEmitter=ms.EventEmitter;it(jr());it(Kn());it(Qn());it(vs());it(Jn());it(ti())});var Qp={};pa(Qp,{activate:()=>Kp,deactivate:()=>Yp});var At=ct(require("vscode")),Rs=ct(So());var yt=ct(require("vscode"));var $l=require("vscode");function Ir(e=32){let r="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let o=0;o<e;o++)r+=t.charAt(Math.floor(Math.random()*t.length));return r}var gn=e=>e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(0,e.byteLength),yn=e=>typeof Buffer!="undefined"?Buffer.byteLength(e):new Blob([e]).size,Ao=e=>{let r=0;for(let c of e)r+=c.byteLength;let t=new Uint8Array(r),o=0;for(let c of e)t.set(c,o),o+=c.byteLength;return t};var En=class{constructor(r){this._extensionURI=r}resolveWebviewView(r,t,o){this._view=r,r.webview.options={enableScripts:!0,localResourceRoots:[this._extensionURI]},r.webview.html=this._getWebviewHTML(r.webview),r.webview.onDidReceiveMessage(c=>{c.type==="ready"&&r.show()}),this._view.onDidDispose(()=>this._view=void 0),r.onDidChangeVisibility(()=>{r.visible&&this._lastMessage&&r.webview.postMessage(this._lastMessage)}),this._lastMessage&&r.webview.postMessage(this._lastMessage)}handleEditorMessage(r){this._lastMessage=r,this._view?.webview.postMessage(r)}show(r){r?.autoReveal&&!yt.workspace.getConfiguration("hexeditor.dataInspector").get("autoReveal",!1)||(this._view&&!r?.forceFocus?this._view.show():yt.commands.executeCommand(`${En.viewType}.focus`),this._lastMessage&&this._view?.webview.postMessage(this._lastMessage))}_getWebviewHTML(r){let t=r.asWebviewUri(yt.Uri.joinPath(this._extensionURI,"dist","inspector.js")),o=r.asWebviewUri(yt.Uri.joinPath(this._extensionURI,"dist","inspector.css")),c=yt.workspace.getConfiguration().get("hexeditor.defaultEndianness"),s=Ir();return`<!DOCTYPE html>
            <html lang="en">
            <head>
              <meta charset="UTF-8">
              <!--
                Use a content security policy to only allow loading images from https or from our extension directory,
                and only allow scripts that have a specific nonce.
              -->
              <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${r.cspSource}; script-src 'nonce-${s}';">
              <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <link href="${o}" rel="stylesheet">

              <title>Data Inspector</title>
            </head>
            <body>
              <div id="data-inspector">
                <div class="grid-container">
									<!-- Input elements filled in by dataInspector.ts -->
                  <div class="grid-item endian-select">
                    <label for="endianness">Endianness</label>
                  </div>
                  <div class="grid-item endian-select">
                    <select id="endianness">
                      <option value="little" ${c==="little"?"selected":""}>Little Endian</option>
                      <option value="big" ${c==="big"?"selected":""}>Big Endian</option>
                    </select>
                  </div>
                </div>
              </div>
              <script nonce="${s}" src="${t}"><\/script>
            </body>
            </html>`}},lr=En;lr.viewType="hexEditor.dataInspectorView";var Co=ct(require("vscode"));var bn=class{constructor(r,t){this.messageHandler=r;this.postMessage=t;this.messageIdCounter=0;this.pendingMessages=new Map}sendEvent(r){this.postMessage({body:r,messageId:this.messageIdCounter++})}sendRequest(r){let t=this.messageIdCounter++;return this.postMessage({body:r,messageId:t}),new Promise((o,c)=>{this.pendingMessages.set(t,{resolve:o,reject:c})})}sendReply(r,t){this.postMessage({body:t,messageId:this.messageIdCounter++,inReplyTo:r.messageId})}handleMessage(r){r.inReplyTo!==void 0?(this.pendingMessages.get(r.inReplyTo)?.resolve(r.body),this.pendingMessages.delete(r.inReplyTo)):Promise.resolve(this.messageHandler(r.body)).then(t=>t&&this.sendReply(r,t))}};var zl=/^0x[a-f0-9]+$/i,Wl=/^[0-9]+$/i,wo=e=>{let r=Co.window.createInputBox();r.placeholder="Enter offset to go to",e.sendEvent({type:6});let t,o=!1;r.onDidChangeValue(c=>{if(!c)t=void 0;else if(zl.test(c))t=parseInt(c.slice(2),16);else if(Wl.test(c))t=parseInt(c,10);else{r.validationMessage="Offset must be provided as a decimal (12345) or hex (0x12345) address";return}r.validationMessage="",t!==void 0&&(r.validationMessage="",e.sendEvent({type:7,offset:t}))}),r.onDidAccept(()=>{o=!0,t!==void 0&&e.sendEvent({type:8,offset:t})}),r.onDidHide(()=>{o||e.sendEvent({type:9})}),r.show()};var Kl=typeof atob=="function",Yl=typeof btoa=="function",Cr=typeof Buffer=="function",sd=typeof TextDecoder=="function"?new TextDecoder:void 0,ad=typeof TextEncoder=="function"?new TextEncoder:void 0,Ql="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",pr=Array.prototype.slice.call(Ql),wr=(e=>{let r={};return e.forEach((t,o)=>r[t]=o),r})(pr),Xl=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Or=String.fromCharCode.bind(String),Oo=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):(e,r=t=>t)=>new Uint8Array(Array.prototype.slice.call(e,0).map(r)),Zl=e=>e.replace(/=/g,"").replace(/[+\/]/g,r=>r=="+"?"-":"_"),Po=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),Jl=e=>{let r,t,o,c,s="",i=e.length%3;for(let n=0;n<e.length;){if((t=e.charCodeAt(n++))>255||(o=e.charCodeAt(n++))>255||(c=e.charCodeAt(n++))>255)throw new TypeError("invalid character found");r=t<<16|o<<8|c,s+=pr[r>>18&63]+pr[r>>12&63]+pr[r>>6&63]+pr[r&63]}return i?s.slice(0,i-3)+"===".substring(i):s},ep=Yl?e=>btoa(e):Cr?e=>Buffer.from(e,"binary").toString("base64"):Jl,Ro=Cr?e=>Buffer.from(e).toString("base64"):e=>{let r=4096,t=[];for(let o=0,c=e.length;o<c;o+=r)t.push(Or.apply(null,e.subarray(o,o+r)));return ep(t.join(""))},Pr=(e,r=!1)=>r?Zl(Ro(e)):Ro(e);var tp=e=>{if(e=e.replace(/\s+/g,""),!Xl.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let r,t="",o,c;for(let s=0;s<e.length;)r=wr[e.charAt(s++)]<<18|wr[e.charAt(s++)]<<12|(o=wr[e.charAt(s++)])<<6|(c=wr[e.charAt(s++)]),t+=o===64?Or(r>>16&255):c===64?Or(r>>16&255,r>>8&255):Or(r>>16&255,r>>8&255,r&255);return t},rp=Kl?e=>atob(Po(e)):Cr?e=>Buffer.from(e,"base64").toString("binary"):tp,np=Cr?e=>Oo(Buffer.from(e,"base64")):e=>Oo(rp(e),r=>r.charCodeAt(0)),xo=e=>np(ip(e));var ip=e=>Po(e.replace(/[-_]/g,r=>r=="-"?"+":"/"));var be=ct(require("vscode"));var gs=ct(ii());var _s=e=>(r,t)=>{let o,c=0,s=t.length-1;for(;c<=s;)o=Math.floor((c+s)/2),e(t[o])>=r?s=o-1:c=o+1;return c};var Gr=Symbol("unset"),oi=e=>{let r=Gr,t=()=>(r===Gr&&(r=e()),r);return t.getValue=()=>r===Gr?void 0:r,t.forget=()=>{r=Gr},t};var jp=e=>e.op===0?{...e,op:1,previous:e.value}:e.op===1?{...e,op:0,value:e.previous}:{...e,value:e.previous,previous:e.value};var $r=class{constructor(r){this.saveGuard=gs.Policy.bulkhead(1,1/0);this._unsavedEditIndex=0;this.getSizeInner=oi(()=>this.accessor.getSize());this.getEditTimeline=oi(()=>qp(this._edits));this._edits=r.edits?r.edits.saved.concat(r.edits.unsaved):[],this._unsavedEditIndex=r.edits?.saved.length??0,this.supportsLengthChanges=r.supportsLengthChanges,this.isFiniteSize=r.isFiniteSize,this.accessor=r.accessor}get uri(){return this.accessor.uri}get isReadonly(){return!!this.accessor.isReadonly}async size(){if(!this.isFiniteSize)return;let r=await this.getSizeInner();if(r===void 0)return;let{sizeDelta:t}=this.getEditTimeline();return r+t}get edits(){return this._edits}get unsavedEdits(){return this._edits.slice(this.unsavedEditIndex)}get unsavedEditIndex(){return this._unsavedEditIndex}get isSynced(){return this.unsavedEditIndex===this.edits.length}readInto(r,t){return this.accessor.read(r,t)}readWithEdits(r=0,t=128*1024){return Up(this.accessor,this.getEditTimeline().ranges,r,t)}save(){let r=this._edits.slice(this.unsavedEditIndex);return r.length===0?Promise.resolve():(this._unsavedEditIndex+=r.length,this.saveGuard.execute(async()=>{r.some(t=>t.op!==2||t.previous.length!==t.value.length)?await this.accessor.writeStream(this.readWithEdits()):await this.accessor.writeBulk(r.map(t=>({offset:t.offset,data:t.value}))),this.getSizeInner.forget()}))}revert(){this._unsavedEditIndex=0,this._edits=[],this.accessor.invalidate?.(),this.getEditTimeline.forget(),this.getSizeInner.forget()}makeEdits(r){let t=this._edits.length;return this._edits.push(...r),this.getEditTimeline.forget(),{undo:()=>(this.unsavedEditIndex<=t?this._edits.splice(t,r.length):this._edits.push(...r.map(jp)),this.getEditTimeline.forget(),this._edits),redo:()=>(this._edits.push(...r),this.getEditTimeline.forget(),this._edits)}}dispose(){this.accessor.dispose()}};async function*Up(e,r,t=0,o=1024){let c=new Uint8Array(o);for(let s=0;s<r.length;s++){let i=r[s];if(i.op===1)continue;if(i.op===2){let l=i.offset+i.value.length-t;if(l<=0)continue;let p=l<i.value.length?i.value.subarray(-l):i.value;p.length>0&&(yield p);continue}let n=i.roffset+(s+1<r.length?r[s+1].offset:1/0)-i.offset,a=i.roffset+Math.max(0,t-i.offset);for(;a<n;){let l=await e.read(a,c.subarray(0,Math.min(c.length,n-a)));if(l===0)break;yield c.subarray(0,l),a+=l}}}var qp=e=>{let r=[{op:0,editIndex:-1,roffset:0,offset:0}],t=(i,n,a)=>n.op===0?{before:{op:0,editIndex:i,roffset:n.roffset,offset:n.offset},after:{op:0,editIndex:i,roffset:n.roffset+a,offset:n.offset+a}}:n.op===1?{before:{op:1,editIndex:i,offset:n.offset},after:{op:1,editIndex:i,offset:n.offset+a}}:{before:{op:2,editIndex:i,offset:n.offset,value:n.value.subarray(0,a)},after:{op:2,editIndex:i,offset:n.offset+a,value:n.value.subarray(a)}},o=_s(i=>i.offset),c=0,s=(i,n)=>{for(c+=n;i<r.length;i++)r[i].offset+=n};for(let i=0;i<e.length;i++){let n=e[i],a=o(n.offset,r);(a===r.length||r[a].offset>n.offset)&&a--;let l=r[a];if(n.op===0){let{before:p,after:u}=t(i,l,n.offset-l.offset);r.splice(a,1,p,{op:2,editIndex:i,offset:n.offset,value:n.value},u),s(a+2,n.value.length)}else if(n.op===1||n.op===2){let{before:p}=t(i,l,n.offset-l.offset),u=o(n.offset+n.previous.length,r);(u===r.length||r[u].offset>n.offset)&&u--;let{after:f}=t(i,r[u],n.offset+n.previous.length-r[u].offset);r.splice(a,u-a+1,p,n.op===2?{op:2,editIndex:i,offset:n.offset,value:n.value}:{op:1,editIndex:i,offset:n.offset},f),s(a+2,(n.op===2?n.value.length:0)-n.previous.length)}}return{ranges:r,sizeDelta:c}};var ys=e=>typeof e=="function"?e():e,mr=class{constructor(){this.table=new Map}set(r,t){let o=Bp(r),c=this.table.get(o);if(!c){let i={buf:r,value:ys(t)};return this.table.set(o,[i]),i.value}for(let i of c)if(Hp(i.buf,r))return i.value;let s={buf:r,value:ys(t)};return c.push(s),s.value}*entries(){for(let r of this.table.values())for(let{buf:t,value:o}of r)yield[t,o]}*keys(){for(let r of this.table.values())for(let{buf:t}of r)yield t}*values(){for(let r of this.table.values())for(let{value:t}of r)yield t}};function Hp(e,r){if(e.length!==r.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function Bp(e,r=0){r=Es(149417,r);for(let t=0,o=e.length;t<o;t++)r=Es(e[t],r);return r}function Es(e,r){return(r<<5)-r+e|0}var _r=e=>{let r=0,t=new mr,o=i=>({offset:t.set(i,()=>{let a=r;return r+=i.length,a}),len:i.length}),c=[];for(let i of e)i.op===0?c.push({...i,value:o(i.value)}):i.op===1?c.push({...i,previous:o(i.previous)}):c.push({...i,previous:o(i.previous),value:o(i.value)});let s=new Uint8Array(r);for(let[i,n]of t.entries())s.set(i,n);return{data:s,edits:c}},bs=({edits:e,data:r})=>{let t=({offset:o,len:c})=>r.slice(o,o+c);return e.map(o=>o.op===0?{...o,value:t(o.value)}:o.op===1?{...o,previous:t(o.previous)}:{...o,previous:t(o.previous),value:t(o.value)})};function si(e){for(;e.length;){let r=e.pop();r&&r.dispose()}}var ai=class{constructor(){this._isDisposed=!1;this._disposables=[]}dispose(){this._isDisposed||(this._isDisposed=!0,si(this._disposables))}_register(r){return this._isDisposed?r.dispose():this._disposables.push(r),r}get isDisposed(){return this._isDisposed}};var lt=ct(require("vscode"));var ci=ct(require("vscode")),Vp=new TextEncoder,Gp=new TextDecoder,zr=class{constructor(r){this.uri=r}async write(r){let t=JSON.stringify(r,(o,c)=>c instanceof Uint8Array?{$u8:Pr(c)}:c);await ci.workspace.fs.writeFile(this.uri,Vp.encode(t))}async read(){let r;try{r=Gp.decode(await ci.workspace.fs.readFile(this.uri))}catch{return[]}return JSON.parse(r,(t,o)=>o&&typeof o=="object"&&"$u8"in o?xo(o.$u8):o)}};var Ts=ct(ii()),Re=ct(require("vscode")),ui=async(e,r)=>{if(e.scheme==="untitled")return new Is(e,r??new Uint8Array);if(e.scheme==="vscode-debug-memory"){let{permissions:t=0}=await Re.workspace.fs.stat(e);return new Cs(e,!!(t&Re.FilePermission.Readonly))}if(e.scheme==="file")try{let t=require("fs");if((await t.promises.stat(e.fsPath)).isFile())return new As(e,t)}catch{}return new li(e)},Ss=class{constructor(r,t){this.path=r;this._fs=t;this.borrowQueue=[];this.disposed=!1}borrow(r){return this.disposed?Promise.reject(new Error("FileHandle was disposed")):new Promise((t,o)=>{this.borrowQueue.push(async c=>{if(c instanceof Error)return o(c);try{t(await r(c))}catch(s){o(s)}}),this.borrowQueue.length===1&&this.process()})}dispose(){this.disposed=!0,this.handle=void 0,this.disposeTimeout&&clearTimeout(this.disposeTimeout),this.rejectAll(new Error("FileHandle was disposed"))}async close(){await this.handle?.close(),this.handle=void 0,this.disposeTimeout&&clearTimeout(this.disposeTimeout)}rejectAll(r){for(;this.borrowQueue.length;)this.borrowQueue.pop()(r)}async process(){for(this.disposeTimeout&&clearTimeout(this.disposeTimeout);this.borrowQueue.length;){if(!this.handle)try{this.handle=await this._fs.promises.open(this.path,this._fs.constants.O_RDWR|this._fs.constants.O_CREAT)}catch(r){return this.rejectAll(r)}await this.borrowQueue[0]?.(this.handle),this.borrowQueue.shift()}this.handle&&(this.disposeTimeout=setTimeout(()=>{this.handle?.close(),this.handle=void 0},1e3))}},$p=Ts.Policy.handleWhen(e=>e.code==="ENOENT").retry().attempts(10).delay(50),As=class{constructor(r,t){this.fs=t;this.supportsIncremetalAccess=!0;this.uri=r.toString(),this.handle=new Ss(r.fsPath,t)}watch(r,t){return pi(this.uri,r,t)}async getSize(){return this.handle.borrow(async r=>(await r.stat()).size)}async read(r,t){return this.handle.borrow(async o=>{let{bytesRead:c}=await o.read(t,0,t.byteLength,r);return c})}writeBulk(r){return this.handle.borrow(async t=>{for(let{data:o,offset:c}of r)t.write(o,0,o.byteLength,c)})}async writeStream(r,t){let o=`${this.handle.path}.tmp`,c=await this.fs.promises.open(o,this.fs.constants.O_WRONLY|this.fs.constants.O_CREAT|this.fs.constants.O_TRUNC);try{let s=0;for await(let i of r){if(t?.isCancellationRequested)return;await c.write(i,0,i.byteLength,s),s+=i.byteLength}}finally{await c.close()}return await this.handle.borrow(async()=>{await this.handle.close(),await $p.execute(()=>this.fs.promises.rename(o,this.handle.path))}),this.handle.borrow(async s=>{if(t?.isCancellationRequested)return;let i=0;for await(let n of r){if(t?.isCancellationRequested)return;await s.write(n,0,n.byteLength,i),i+=n.byteLength}})}dispose(){this.handle.dispose()}},li=class{constructor(r){this.uri=r.toString(),this.fsPath=r.fsPath,this.isReadonly=Re.workspace.fs.isWritableFileSystem(this.uri)===!1}watch(r,t){return pi(this.uri,r,t)}async getSize(){return(await Re.workspace.fs.stat(Re.Uri.parse(this.uri))).size}async read(r,t){let o=await this.getContents(),c=Math.min(t.length,o.length-r);return t.set(o.subarray(r,c+r)),c}async writeStream(r,t){let o=0,c=[];for await(let n of r){if(t?.isCancellationRequested)throw new Re.CancellationError;c.push(n),o+=n.length}let s=new Uint8Array(o),i=0;for(let n of c)s.set(n,i),i+=n.length;await Re.workspace.fs.writeFile(Re.Uri.parse(this.uri),s)}async writeBulk(r){let t=await this.getContents();for(let{data:o,offset:c}of r)t.set(o,c);return Re.workspace.fs.writeFile(Re.Uri.parse(this.uri),t)}invalidate(){this.contents=void 0}dispose(){this.contents=void 0}getContents(){return this.contents??(this.contents=Re.workspace.fs.readFile(Re.Uri.parse(this.uri))),this.contents}},Is=class extends li{constructor(r,t){super(r);this.contents=t}getSize(){return Promise.resolve(this.contents.byteLength)}},Cs=class{constructor(r,t){this.isReadonly=t;this.supportsIncremetalAccess=!0;this.uri=r.toString()}watch(r,t){return pi(this.uri,r,t)}async getSize(){}async read(r,t){let o=await Re.workspace.fs.readFile(this.referenceRange(r,r+t.length)),c=Math.min(t.length,o.length-r);return t.set(o.subarray(r,c+r)),c}async writeStream(){throw new Error("Not supported")}async writeBulk(r){await Promise.all(r.map(t=>Re.workspace.fs.writeFile(this.referenceRange(t.offset,t.offset+t.data.length),t.data)))}referenceRange(r,t){return Re.Uri.parse(this.uri).with({query:`?range=${r}:${t}`})}invalidate(){}dispose(){}},pi=(e,r,t)=>{let o=e.split("/"),c=o.pop(),s=new Re.RelativePattern(Re.Uri.parse(o.join("/")),c),i=Re.workspace.createFileSystemWatcher(s);return i.onDidChange(r),i.onDidDelete(t),i};var di=class{start(r,t){this._request?.dispose(),this._request=t,(async()=>{for await(let o of t.search())r.sendEvent({type:2,data:o})})()}cancel(){this._request?.dispose(),this._request=void 0}};var zt=class extends ai{constructor(r,t,o){super();this.model=r;this.isLargeFile=t;this.baseAddress=o;this.lastSave=0;this.searchProvider=new di;this._onDidDispose=this._register(new lt.EventEmitter);this.onDidDispose=this._onDidDispose.event;this._onDidRevert=this._register(new lt.EventEmitter);this.onDidRevert=this._onDidRevert.event}static async create(r,{backupId:t,untitledDocumentData:o},c){let s=await ui(r,o),i=new $r({accessor:s,isFiniteSize:!0,supportsLengthChanges:!0,edits:t?{unsaved:await new zr(lt.Uri.parse(t)).read(),saved:[]}:void 0}),n=zt.parseQuery(r.query),a=n.baseAddress?zt.parseHexOrDecInt(n.baseAddress):0,l=await s.getSize();c.sendTelemetryEvent("fileOpen",{},{fileSize:l??0});let p=lt.workspace.getConfiguration().get("hexeditor.maxFileSize")*1e6,u=!t&&!s.supportsIncremetalAccess&&(l??0)>p;return{document:new zt(i,u,a),accessor:s}}get isReadonly(){return this.model.isReadonly}get uri(){return lt.Uri.parse(this.model.uri)}readWithEdits(r){return this.model.readWithEdits(r)}async readBufferWithEdits(r,t){let o=new Uint8Array(t),c=0;for await(let s of this.model.readWithEdits(r)){let i=Math.min(s.length,o.length-c);if(o.set(s.subarray(0,i),c),c+=i,c===t)return o}return o.slice(0,c)}async readBuffer(r,t){let o=new Uint8Array(t),c=await this.model.readInto(r,o);return c===t?o:o.slice(0,c)}dispose(){this._onDidDispose.fire(),this.model.dispose(),super.dispose()}get isSynced(){return this.model.isSynced}get edits(){return this.model.edits}get unsavedEditIndex(){return this.model.unsavedEditIndex}makeEdits(r){return this.model.makeEdits(r)}insert(r,t){return this.model.makeEdits([{op:0,offset:r,value:t}])}async replace(r,t){let o=await this.readBufferWithEdits(r,t.length);return o.length===t.length?this.makeEdits([{op:2,offset:r,value:t,previous:o}]):this.makeEdits([{op:2,offset:r,value:t.subarray(0,o.length),previous:o},{op:0,offset:r+o.length,value:t.subarray(o.length)}])}size(){return this.model.size()}async save(r){this.lastSave=Date.now(),await this.model.save(),this.lastSave=Date.now()}async saveAs(r,t){if(t&&t.isCancellationRequested)return;if(!this.model.isFiniteSize)throw new Error("Cannot save a document without a finite size");let o=await ui(r);this.lastSave=Date.now(),await o.writeStream(this.model.readWithEdits()),this.lastSave=Date.now(),this.model.dispose(),this.model=new $r({accessor:o,isFiniteSize:!0,supportsLengthChanges:!0})}async revert(r){this.model.revert(),this._onDidRevert.fire()}async backup(r){return await new zr(r).write(this.model.unsavedEdits),{id:r.toString(),delete:async()=>{try{await lt.workspace.fs.delete(r)}catch{}}}}static parseQuery(r){let t={};if(r){let o=(r[0]==="?"?r.substr(1):r).split("&");for(let c of o){let s=c.split("="),i=s.shift();i&&(t[i]=s.join("="))}}return t}static parseHexOrDecInt(r){return r=r.toLowerCase(),r.startsWith("0x")?parseInt(r.substring(2),16):parseInt(r,10)}};var Wr=Symbol("Wildcard"),ws=new Uint8Array(255);for(let e=0;e<255;e++)ws[e]=e;var fi=new Uint8Array(255);for(let e=0;e<255;e++)fi[e]=String.fromCharCode(e).toUpperCase().charCodeAt(0);var hi=class{constructor(r,t,o=ws){this.needle=r;this.onMatch=t;this.equivalencyTable=o;this.needleLen=0;this.index=0;this.usableBuffer=0;for(let c of r)c===Wr?this.needleLen++:this.needleLen+=c.length;this.buffer=new Uint8Array(this.needleLen)}push(r){let{needleLen:t,buffer:o}=this;for(let c=0;c<r.length;c++)o[this.index++%t]=r[c],this.usableBuffer++,this.attemptMatch()}attemptMatch(){let{needle:r,needleLen:t,buffer:o,index:c,equivalencyTable:s}=this;if(this.usableBuffer<t)return;let i=0;for(let a=0;a<r.length;a++){let l=r[a];if(l===Wr){i++;continue}for(let p=0;p<l.length;p++){if(s[l[p]]!==s[o[(c+i)%t]])return;i++}}this.matchTmpBuf||(this.matchTmpBuf=new Uint8Array(t));let n=this.index%t;this.matchTmpBuf.set(o.subarray(n),0),this.matchTmpBuf.set(o.subarray(0,n),t-n),this.onMatch(this.index-t,this.matchTmpBuf),this.usableBuffer=0}};var _i=class{constructor(r,t){this.filesize=r;this.cap=t;this.buffers=new mr;this.fileOffset=0;this.lastYieldedTime=Date.now();this.results=[]}get capped(){return this.cap===0}push(r,t,o){let c=this.buffers.set(r,()=>new Uint8Array(r));this.cap===void 0?this.results.push({from:t,to:o,previous:c}):this.cap>0&&(this.results.push({from:t,to:o,previous:c}),this.cap--)}toYield(){let r=Date.now();if(r-this.lastYieldedTime>_i.targetUpdateInterval){this.lastYieldedTime=r;let t=this.results;return this.results=[],{progress:this.filesize?this.fileOffset/this.filesize:0,results:t}}}final(){return{progress:1,capped:this.capped,results:this.results}}},Kr=_i;Kr.targetUpdateInterval=1e3;var vi=class{constructor(r,t,o,c){this.document=r;this.query=t;this.isCaseSensitive=o;this.cap=c;this.cancelled=!1}dispose(){this.cancelled=!0}async*search(){let{isCaseSensitive:r,query:t,document:o,cap:c}=this,s=new Kr(await o.size(),c),i=new hi(t.literal.map(n=>n==="*"?Wr:n),(n,a)=>s.push(a,n,n+a.length),r?void 0:fi);for await(let n of o.readWithEdits(0)){if(this.cancelled||s.capped){yield s.final();return}i.push(n),s.fileOffset+=n.length;let a=s.toYield();a&&(yield a)}yield s.final()}},zp=8*1024,mi=class{constructor(r,t,o,c){this.document=r;this.cap=c;this.cancelled=!1;this.re=new RegExp(t.re,o?"g":"ig")}dispose(){this.cancelled=!0}async*search(){let r="",t=0,{re:o,document:c}=this,s=new TextDecoder,i=new TextEncoder,n=new Kr(await c.size(),this.cap);for await(let a of c.readWithEdits(0)){if(this.cancelled||n.capped){yield n.final();return}r+=s.decode(a);let l=0;for(let f of r.matchAll(o)){let h=t+yn(r.slice(0,f.index)),v=yn(f[0]);n.push(i.encode(f[0]),h,h+v),l=f.index+f[0].length}n.fileOffset+=a.length;let p=Math.max(r.length-zp,l);p>0&&(t+=p,o.lastIndex=0,r=r.slice(p));let u=n.toYield();u&&(yield u)}yield n.final()}};var gi=class{constructor(){this._webviews=new Set}*get(r){let t=r.toString();for(let o of this._webviews)o.resource===t&&(yield o)}add(r,t,o){let c={resource:r.toString(),messaging:t,webviewPanel:o};this._webviews.add(c),o.onDidDispose(()=>{this._webviews.delete(c)})}};var Os={columnWidth:16,showDecodedText:!0,defaultEndianness:"little",inspectorType:"aside"},Ps=Object.keys(Os),Wt=class{constructor(r,t,o){this._context=r;this._telemetryReporter=t;this._dataInspectorView=o;this.webviews=new gi;this._onDidChangeCustomDocument=new be.EventEmitter;this.onDidChangeCustomDocument=this._onDidChangeCustomDocument.event;this._requestId=1;this._callbacks=new Map}static register(r,t,o){return be.window.registerCustomEditorProvider(Wt.viewType,new Wt(r,t,o),{supportsMultipleEditorsPerDocument:!1})}async openCustomDocument(r,t,o){let{document:c,accessor:s}=await zt.create(r,t,this._telemetryReporter),i=[];i.push(c.onDidRevert(()=>{for(let{messaging:l}of this.webviews.get(c.uri))l.sendEvent({type:3,edits:{edits:[],data:new Uint8Array}}),l.sendEvent({type:5})}));let n=async()=>{if(c.isSynced){Date.now()-c.lastSave<5e3||c.revert();return}let l="This file has changed on disk, but you have unsaved changes. Saving now will overwrite the file on disk with your changes.",p="Overwrite",u="Revert",f=await be.window.showWarningMessage(l,p,u);f===p?be.commands.executeCommand("workbench.action.files.save"):f==="Revert"&&be.commands.executeCommand("workbench.action.files.revert")},a=()=>{be.window.showWarningMessage("This file has been deleted! Saving now will create a new file on disk.","Overwrite","Close Editor").then(l=>{l==="Overwrite"?be.commands.executeCommand("workbench.action.files.save"):l==="Close Editor"&&be.commands.executeCommand("workbench.action.closeActiveEditor")})};return i.push(s.watch(n,a)),c.onDidDispose(()=>{be.commands.executeCommand("setContext","hexEditor:showSidebarInspector",!1),si(i)}),c}async resolveCustomEditor(r,t,o){let c=new bn(i=>this.onMessage(c,r,i),i=>t.webview.postMessage(i));this.webviews.add(r.uri,c,t),Wt.currentWebview=c;let s=be.workspace.getConfiguration("hexeditor").get("inspectorType")==="sidebar";s&&(be.commands.executeCommand("setContext","hexEditor:showSidebarInspector",!0),this._dataInspectorView.show({autoReveal:!0})),t.webview.options={enableScripts:!0},t.webview.html=this.getHtmlForWebview(t.webview),t.onDidChangeViewState(i=>{be.commands.executeCommand("setContext","hexEditor:showSidebarInspector",s&&i.webviewPanel.visible),i.webviewPanel.visible?(Wt.currentWebview=c,this._dataInspectorView.show({autoReveal:!0,forceFocus:!0})):Wt.currentWebview=void 0}),t.webview.onDidReceiveMessage(i=>c.handleMessage(i))}async saveCustomDocument(r,t){await r.save(t);for(let{messaging:o}of this.webviews.get(r.uri))o.sendEvent({type:4,unsavedEditIndex:r.unsavedEditIndex})}saveCustomDocumentAs(r,t,o){return r.saveAs(t,o)}revertCustomDocument(r,t){return r.revert(t)}backupCustomDocument(r,t,o){return r.backup(t.destination)}getHtmlForWebview(r){let t=r.asWebviewUri(be.Uri.joinPath(this._context.extensionUri,"dist","editor.js")),o=r.asWebviewUri(be.Uri.joinPath(this._context.extensionUri,"dist","editor.css")),c=Ir();return`
			<!DOCTYPE html>
			<html lang="en">
			<head>
				<meta charset="UTF-8">

				<!--
				Use a content security policy to only allow loading images from https or from our extension directory,
				and only allow scripts that have a specific nonce.
				-->
				<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src ${r.cspSource} blob:; font-src ${r.cspSource}; style-src ${r.cspSource}; script-src 'nonce-${c}';">

				<meta name="viewport" content="width=device-width, initial-scale=1.0">

				<link href="${o}" rel="stylesheet" />
				<script nonce="${c}" src="${t}" defer><\/script>

				<title>Hex Editor</title>
			</head>
			<body>
			</body>
			</html>`}getBodyHTML(){return`
		<div class="column left">
			<div class="header" aria-hidden="true">00000000</div>
			<div class="rowwrapper" id="hexaddr">
			</div>
		</div>
		<div id="editor-container">
			<div class="column middle">
				<div class="header">
					<span>00</span><span>01</span><span>02</span><span>03</span><span>04</span><span>05</span><span>06</span><span>07</span><span>08</span><span>09</span><span>0A</span><span>0B</span><span>0C</span><span>0D</span><span>0E</span><span>0F</span>
				</div>
				<div class="rowwrapper" id="hexbody">
				</div>
			</div>
			<div class="column right">
				<div class="header">DECODED TEXT</div>
				<div class="rowwrapper" id="ascii">
				</div>
			</div>
			<div id="scrollbar">
				<div role="scrollbar" id="scroll-thumb">
				</div>
			</div>
		</div>
		<div id="search-container">
		</div>
		`}postMessageWithResponse(r,t,o){let c=this._requestId++,s=new Promise(i=>this._callbacks.set(c,i));return r.webview.postMessage({type:t,requestId:c,body:o}),s}readEditorSettings(){let r=be.workspace.getConfiguration("hexeditor"),t={...Os};for(let o of Ps)r.has(o)&&(t[o]=r.get(o));return t}writeEditorSettings(r){let t=be.workspace.getConfiguration("hexeditor");for(let o of Ps){let c=t.inspect(o),s=c?c.workspaceFolderValue!==void 0?be.ConfigurationTarget.WorkspaceFolder:c.workspaceValue!==void 0?be.ConfigurationTarget.Workspace:be.ConfigurationTarget.Global:be.ConfigurationTarget.Global;t.update(o,r[o],s)}}async onMessage(r,t,o){switch(o.type){case 10:return{type:0,initialOffset:t.baseAddress,editorSettings:this.readEditorSettings(),edits:_r(t.edits),unsavedEditIndex:t.unsavedEditIndex,fileSize:await t.size(),isLargeFile:t.isLargeFile,isReadonly:t.isReadonly};case 12:let c=await t.readBuffer(o.offset,o.bytes);return{type:1,data:gn(c)};case 13:this.publishEdit(r,t,t.makeEdits(bs(o.edits)));return;case 19:this.publishEdit(r,t,o.mode==="insert"?t.insert(o.offset,o.data):await t.replace(o.offset,o.data)),r.sendEvent({type:3,edits:_r(t.edits)});return;case 20:{let i=await Promise.all(o.selections.sort((l,p)=>l[0]-p[0]).map(l=>t.readBuffer(l[0],l[1]-l[0]))),n=Ao(i),a=o.asText?new TextDecoder().decode(n):Pr(n);be.env.clipboard.writeText(a);return}case 15:t.searchProvider.cancel();return;case 14:let s;"re"in o.query?s=new mi(t,o.query,o.caseSensitive,o.cap):s=new vi(t,o.query,o.caseSensitive,o.cap),t.searchProvider.start(r,s);return;case 16:this._dataInspectorView.handleEditorMessage({method:"reset"});break;case 17:this._dataInspectorView.handleEditorMessage({method:"update",data:gn(await t.readBufferWithEdits(o.offset,8))});break;case 18:this.writeEditorSettings(o.editorSettings);break}}publishEdit(r,t,o){this._onDidChangeCustomDocument.fire({document:t,undo:()=>r.sendEvent({type:3,edits:_r(o.undo())}),redo:()=>r.sendEvent({type:3,edits:_r(o.redo())})})}},er=Wt;er.viewType="hexEditor.hexedit";var xs="ms-vscode.hexeditor",Yr;function Wp(e){let r=At.extensions.getExtension(e).packageJSON;return{version:r.version,aiKey:r.aiKey}}function Kp(e){let r=new lr(e.extensionUri),t=Wp(xs);e.subscriptions.push(At.window.registerWebviewViewProvider(lr.viewType,r)),Yr=new Rs.default(xs,t.version,t.aiKey);let o=At.commands.registerTextEditorCommand("hexEditor.openFile",s=>{At.commands.executeCommand("vscode.openWith",s.document.uri,"hexEditor.hexedit")}),c=At.commands.registerCommand("hexEditor.goToOffset",()=>{er.currentWebview&&wo(er.currentWebview)});e.subscriptions.push(c),e.subscriptions.push(o),e.subscriptions.push(Yr),e.subscriptions.push(er.register(e,Yr,r))}function Yp(){Yr.dispose()}module.exports=da(Qp);0&&(module.exports={activate,deactivate});
